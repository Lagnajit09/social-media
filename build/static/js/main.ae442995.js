/*! For license information please see main.ae442995.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function j(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function z(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case E:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){X(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function ae(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ge=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Ie=null;function Ee(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Se(e){xe?Ie?Ie.push(e):Ie=[e]:xe=e}function Te(){if(xe){var e=xe,t=Ie;if(Ie=xe=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==xe||null!==Ie)&&(Ne(),Te())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var De=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){De=!1}function Le(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,je=!1,Ue=null,Ve={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,a,o,s,u){Me=!1,Fe=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(Be(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ge(i),e;if(o===r)return Ge(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ft(s):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,xt,It,Et,St=!1,Tt=[],Ct=null,Nt=null,At=null,Rt=new Map,Pt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=yi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Et(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){jt(e)&&n.delete(t)}function Vt(){St=!1,null!==Ct&&jt(Ct)&&(Ct=null),null!==Nt&&jt(Nt)&&(Nt=null),null!==At&&jt(At)&&(At=null),Rt.forEach(Ut),Pt.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&zt(Ct,e),null!==Nt&&zt(Nt,e),null!==At&&zt(At,e),Rt.forEach(t),Pt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var qt=b.ReactCurrentBatchConfig,Gt=!0;function Kt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Wt(e,t,n,r){if(Gt){var i=Yt(e,t,n,r);if(null===i)Gr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Gr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=yi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),gn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(yn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function En(){return In}var Sn=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Sn),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(Rn),Dn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Kn(e,t,n,r){Se(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Wn=null;function Qn(e){jr(e,0)}function Yn(e){if(W(bi(e)))return e}function $n(e,t){if("change"===e)return t}var Xn=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Wn=Hn=null)}function nr(e){if("value"===e.propertyName&&Yn(Wn)){var t=[];Kn(t,Wn,e,we(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Wn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,yr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=Hr(gr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Ir={};function Er(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return xr[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Sr=Er("animationend"),Tr=Er("animationiteration"),Cr=Er("animationstart"),Nr=Er("transitionend"),Ar=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Ar.set(e,t),u(t,[e])}for(var Dr=0;Dr<Rr.length;Dr++){var Or=Rr[Dr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(Sr,"onAnimationEnd"),Pr(Tr,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,c){if(ze.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,je||(je=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Fr(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Fr(i,s,c),a=u}}}if(je)throw e=Ue,je=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch($t(t)){case 1:var i=Kt;break;case 4:i=Ht;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=yi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}Re((function(){var r=a,i=we(n),o=[];e:{var s=Ar.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Tn;break;case"focusin":c="focus",u=mn;break;case"focusout":c="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Nn;break;case Sr:case Tr:case Cr:u=gn;break;case Nr:u=An;break;case"scroll":u=hn;break;case"wheel":u=Pn;break;case"copy":case"cut":case"paste":u=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Pe(p,h))&&l.push(Kr(p,v,d)))),f)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(f=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==u?s:bi(u),d=null==c?s:bi(c),(s=new l(v,p+"leave",u,n,i)).target=f,s.relatedTarget=d,v=null,yi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,u&&c)e:{for(h=c,p=0,d=l=u;d;d=Wr(d))p++;for(d=0,v=h;v;v=Wr(v))d++;for(;0<p-d;)l=Wr(l),p--;for(;0<d-p;)h=Wr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Wr(l),h=Wr(h)}l=null}else l=null;null!==u&&Qr(o,s,u,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(u=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=$n;else if(Gn(s))if(Xn)m=or;else{m=ir;var g=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ar);switch(m&&(m=m(e,r))?Kn(o,m,n,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=r?bi(r):window,e){case"focusin":(Gn(g)||"true"===g.contentEditable)&&(mr=g,gr=r,yr=null);break;case"focusout":yr=gr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var y;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(y=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(g=Hr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:g}),y?k.data=y:null!==(y=zn(n))&&(k.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,jn);case"textInput":return(e=t.data)===jn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}jr(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=Pe(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Pe(n,a))&&o.unshift(Kr(n,u,s)):i||null!=(u=Pe(n,a))&&o.push(Kr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,gi="__reactHandles$"+fi;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],xi=-1;function Ii(e){return{current:e}}function Ei(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Si(e,t){xi++,_i[xi]=e.current,e.current=t}var Ti={},Ci=Ii(Ti),Ni=Ii(!1),Ai=Ti;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ei(Ni),Ei(Ci)}function Oi(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Si(Ci,t),Si(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,Si(Ci,e),Si(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ni),Ei(Ci),Si(Ci,e)):Ei(Ni),Si(Ni,n)}var ji=null,Ui=!1,Vi=!1;function zi(e){null===ji?ji=[e]:ji.push(e)}function Bi(){if(!Vi&&null!==ji){Vi=!0;var e=0,t=kt;try{var n=ji;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Ui=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),We(Ze,Bi),i}finally{kt=t,Vi=!1}}return null}var qi=[],Gi=0,Ki=null,Hi=0,Wi=[],Qi=0,Yi=null,$i=1,Xi="";function Ji(e,t){qi[Gi++]=Hi,qi[Gi++]=Ki,Ki=e,Hi=t}function Zi(e,t,n){Wi[Qi++]=$i,Wi[Qi++]=Xi,Wi[Qi++]=Yi,Yi=e;var r=$i;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else $i=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Ki;)Ki=qi[--Gi],qi[Gi]=null,Hi=qi[--Gi],qi[Gi]=null;for(;e===Yi;)Yi=Wi[--Qi],Wi[Qi]=null,Xi=Wi[--Qi],Wi[Qi]=null,$i=Wi[--Qi],Wi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(ua(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ua(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ga=Ii(null),ya=null,ka=null,ba=null;function wa(){ba=ka=ya=null}function _a(e){var t=ga.current;Ei(ga),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ya=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ya)throw Error(a(308));ka=e,ya.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Sa=null;function Ta(e){null===Sa?Sa=[e]:Sa.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Da(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?a=c:o.next=c,o=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==a){var f=i.baseState;for(o=0,l=c=u=null,s=a;;){var h=s.lane,d=s.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Aa=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else d={eventTime:d,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=d,u=f):l=l.next=d,o|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(u=f),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fu|=o,e.lanes=o,e.memoizedState=f}}function ja(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Da(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Da(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Da(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function Ba(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Pi(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ga(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Ka(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Ra(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Pi(t)?Ai:Ci.current,i.context=Ri(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&za.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Wa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case _:return(t=Uc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Wa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case P:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Wa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Wa(t,r)}return null}function v(i,a,s,u){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<s.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var g=d(i,f,s[v],u);if(null===g){null===f&&(f=m);break}e&&f&&null===g.alternate&&t(i,f),a=o(g,a,v),null===l?c=g:l.sibling=g,l=g,f=m}if(v===s.length)return n(i,f),ia&&Ji(i,v),c;if(null===f){for(;v<s.length;v++)null!==(f=h(i,s[v],u))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Ji(i,v),c}for(f=r(i,f);v<s.length;v++)null!==(m=p(f,i,v,s[v],u))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),c}function m(i,s,u,c){var l=L(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var f=l=null,v=s,m=s=0,g=null,y=u.next();null!==v&&!y.done;m++,y=u.next()){v.index>m?(g=v,v=null):g=v.sibling;var k=d(i,v,y.value,c);if(null===k){null===v&&(v=g);break}e&&v&&null===k.alternate&&t(i,v),s=o(k,s,m),null===f?l=k:f.sibling=k,f=k,v=g}if(y.done)return n(i,v),ia&&Ji(i,m),l;if(null===v){for(;!y.done;m++,y=u.next())null!==(y=h(i,y.value,c))&&(s=o(y,s,m),null===f?l=y:f.sibling=y,f=y);return ia&&Ji(i,m),l}for(v=r(i,v);!y.done;m++,y=u.next())null!==(y=p(v,i,m,y.value,c))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),s=o(y,s,m),null===f?l=y:f.sibling=y,f=y);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,m),l}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Mc(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Lc(o.type,o.key,o.props,null,r.mode,u)).ref=Ha(r,a,o),u.return=r,r=u)}return s(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,u)).return=r,r=a}return s(r);case P:return e(r,a,(l=o._init)(o._payload),u)}if(te(o))return v(r,a,o,u);if(L(o))return m(r,a,o,u);Wa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=jc(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var $a=Ya(!0),Xa=Ya(!1),Ja={},Za=Ii(Ja),eo=Ii(Ja),to=Ii(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Si(to,t),Si(eo,e),Si(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Za),Si(Za,t)}function io(){Ei(Za),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no(Za.current),n=ue(t,e.type);t!==n&&(Si(eo,e),Si(Za,n))}function oo(e){eo.current===e&&(Ei(Za),Ei(eo))}var so=Ii(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,mo=null,go=null,yo=!1,ko=!1,bo=0,wo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,go=mo=null,t.updateQueue=null,fo.current=cs,e=n(r,i)}while(ko)}if(fo.current=os,t=null!==mo&&null!==mo.next,po=0,go=mo=vo=null,yo=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==bo;return bo=0,e}function So(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===go?vo.memoizedState=go=e:go=go.next=e,go}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===go?vo.memoizedState:go.next;if(null!==t)go=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===go?vo.memoizedState=go=e:go=go.next=e}return go}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=h,s=r):c=c.next=h,vo.lanes|=f,Fu|=f}l=l.next}while(null!==l&&l!==o);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fu|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Po(e,t){var n=vo,r=To(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,bs=!0),r=r.queue,Go(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==go&&1&go.memoizedState.tag){if(n.flags|=2048,Uo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Au)throw Error(a(349));0!==(30&po)||Do(n,t,i)}return i}function Do(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&rc(t,e,1,-1)}function jo(e){var t=So();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function zo(e,t,n,r){var i=So();vo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}vo.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function qo(e,t){return zo(8390656,8,e,t)}function Go(e,t){return Bo(2048,8,e,t)}function Ko(e,t){return Bo(4,2,e,t)}function Ho(e,t){return Bo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Wo.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,Fu|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function es(){return To().memoizedState}function ts(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),as(n,t,r)}}function ns(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(i.next=i,Ta(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function is(e,t){ko=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var os={readContext:Ea,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},ss={readContext:Ea,useCallback:function(e,t){return So().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=So();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=So();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},So().memoizedState=e},useState:jo,useDebugValue:Yo,useDeferredValue:function(e){return So().memoizedState=e},useTransition:function(){var e=jo(!1),t=e[0];return e=Zo.bind(null,e[1]),So().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=So();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Au)throw Error(a(349));0!==(30&po)||Do(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=So(),t=Au.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Ea,useCallback:$o,useContext:Ea,useEffect:Go,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Xo,useReducer:No,useRef:Vo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(To(),mo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Po,useId:es,unstable_isNewReconciler:!1},cs={readContext:Ea,useCallback:$o,useContext:Ea,useEffect:Go,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Xo,useReducer:Ao,useRef:Vo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Jo(t,mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Po,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Da(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ku||(Ku=!0,Hu=r),hs(0,t)},n}function vs(e,t,n){(n=Da(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===Wu?Wu=new Set([this]):Wu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Da(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ks=b.ReactCurrentOwner,bs=!1;function ws(e,t,n,r){t.child=null===e?Xa(t,null,n,r):$a(t,e.child,n,r)}function _s(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=Io(e,t,n,r,a,i),n=Eo(),null===e||bs?(ia&&n&&ea(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ks(e,t,i))}function xs(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Dc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Is(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Ks(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function Is(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ks(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Ts(e,t,n,r,i)}function Es(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Ou,Du),Du|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Ou,Du),Du|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Ou,Du),Du|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Ou,Du),Du|=r;return ws(e,t,i,n),t.child}function Ss(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,i){var a=Pi(n)?Ai:Ci.current;return a=Ri(t,a),Ia(t,i),n=Io(e,t,n,r,a,i),r=Eo(),null===e||bs?(ia&&r&&ea(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ks(e,t,i))}function Cs(e,t,n,r,i){if(Pi(n)){var a=!0;Mi(t)}else a=!1;if(Ia(t,i),null===t.stateNode)Gs(e,t),qa(t,n,r),Ka(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Ri(t,c=Pi(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&Ga(t,o,r,c),Aa=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),u=t.memoizedState,s!==r||h!==u||Ni.current||Aa?("function"===typeof l&&(Va(t,n,l,r),u=t.memoizedState),(s=Aa||Ba(t,n,s,r,h,u,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Pa(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ma(t.type,s),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ea(u):u=Ri(t,u=Pi(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==f||h!==u)&&Ga(t,o,r,u),Aa=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;s!==f||h!==p||Ni.current||Aa?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Aa||Ba(t,n,c,r,h,p,u)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ns(e,t,n,r,a,i)}function Ns(e,t,n,r,i,a){Ss(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ks(e,t,a);r=t.stateNode,ks.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,s,a)):ws(e,t,s,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function As(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Rs(e,t,n,r,i){return da(),pa(i),t.flags|=256,ws(e,t,n,r),t.child}var Ps,Ds,Os,Ls,Ms={dehydrated:null,treeContext:null,retryLane:0};function Fs(e){return{baseLanes:e,cachePool:null,transitions:null}}function js(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(so,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Fc(u,i,0,null),e=Mc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Fs(n),t.memoizedState=Ms,e):Us(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Vs(e,t,s,r=fs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,s),t.child.memoizedState=Fs(s),t.memoizedState=Ms,o);if(0===(1&t.mode))return Vs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Vs(e,t,s,r=fs(o=Error(a(419)),r,void 0))}if(u=0!==(s&e.childLanes),bs||u){if(null!==(r=Au)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),rc(r,e,i,-1))}return mc(),Vs(e,t,s,r=fs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Wi[Qi++]=$i,Wi[Qi++]=Xi,Wi[Qi++]=Yi,$i=e.id,Xi=e.overflow,Yi=t),t=Us(t,r.children),t.flags|=4096,t)}(e,t,u,i,r,o,n);if(s){s=i.fallback,u=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Oc(r,s):(s=Mc(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Fs(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ms,i}return e=(s=e.child).sibling,i=Oc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Us(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vs(e,t,n,r){return null!==r&&pa(r),$a(t,e.child,null,n),(e=Us(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function Bs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zs(e,n,t);else if(19===e.tag)zs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bs(t,!0,n,null,a);break;case"together":Bs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ks(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hs(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ws(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ws(t),null;case 1:case 17:return Pi(t.type)&&Di(),Ws(t),null;case 3:return r=t.stateNode,io(),Ei(Ni),Ei(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(sc(aa),aa=null))),Ds(e,t),Ws(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Os(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Ws(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":$(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var u in ye(n,o),i=null,o)if(o.hasOwnProperty(u)){var c=o[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&Ur("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[hi]=t,e[di]=r,Ps(e,t,!1,!1),t.stateNode=e;e:{switch(u=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ye(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,u))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ws(t),null;case 6:if(e&&null!=t.stateNode)Ls(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ws(t),null;case 13:if(Ei(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ws(t),o=!1}else null!==aa&&(sc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Lu&&(Lu=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ws(t),null);case 4:return io(),Ds(e,t),null===e&&Br(t.stateNode.containerInfo),Ws(t),null;case 10:return _a(t.type._context),Ws(t),null;case 19:if(Ei(so),null===(o=t.memoizedState))return Ws(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Hs(o,!1);else{if(0!==Lu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Hs(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>qu&&(t.flags|=128,r=!0,Hs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ia)return Ws(t),null}else 2*Xe()-o.renderingStartTime>qu&&1073741824!==n&&(t.flags|=128,r=!0,Hs(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=so.current,Si(so,r?1&n|2:1&n),t):(Ws(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Du)&&(Ws(t),6&t.subtreeFlags&&(t.flags|=8192)):Ws(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ys(e,t){switch(ta(t),t.tag){case 1:return Pi(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ni),Ei(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(so),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ps=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ds=function(){},Os=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ye(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var u=i[l];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||u===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ls=function(e,t,n,r){n!==r&&(t.flags|=4)};var $s=!1,Xs=!1,Js="function"===typeof WeakSet?WeakSet:Set,Zs=null;function eu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function tu(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var nu=!1;function ru(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&tu(t,n,a)}i=i.next}while(i!==r)}}function iu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function au(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ou(e){var t=e.alternate;null!==t&&(e.alternate=null,ou(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[gi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function su(e){return 5===e.tag||3===e.tag||4===e.tag}function uu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||su(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var fu=null,hu=!1;function du(e,t,n){for(n=n.child;null!==n;)pu(e,t,n),n=n.sibling}function pu(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Xs||eu(n,t);case 6:var r=fu,i=hu;fu=null,du(e,t,n),hu=i,null!==(fu=r)&&(hu?(e=fu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fu.removeChild(n.stateNode));break;case 18:null!==fu&&(hu?(e=fu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),Bt(e)):ui(fu,n.stateNode));break;case 4:r=fu,i=hu,fu=n.stateNode.containerInfo,hu=!0,du(e,t,n),fu=r,hu=i;break;case 0:case 11:case 14:case 15:if(!Xs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&tu(n,t,o),i=i.next}while(i!==r)}du(e,t,n);break;case 1:if(!Xs&&(eu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Ec(n,t,s)}du(e,t,n);break;case 21:du(e,t,n);break;case 22:1&n.mode?(Xs=(r=Xs)||null!==n.memoizedState,du(e,t,n),Xs=r):du(e,t,n);break;default:du(e,t,n)}}function vu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function mu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:fu=u.stateNode,hu=!1;break e;case 3:case 4:fu=u.stateNode.containerInfo,hu=!0;break e}u=u.return}if(null===fu)throw Error(a(160));pu(o,s,i),fu=null,hu=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ec(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gu(t,e),t=t.sibling}function gu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mu(t,e),yu(e),4&r){try{ru(3,e,e.return),iu(3,e)}catch(m){Ec(e,e.return,m)}try{ru(5,e,e.return)}catch(m){Ec(e,e.return,m)}}break;case 1:mu(t,e),yu(e),512&r&&null!==n&&eu(n,n.return);break;case 5:if(mu(t,e),yu(e),512&r&&null!==n&&eu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Ec(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===o.type&&null!=o.name&&X(i,o),ke(u,s);var l=ke(u,o);for(s=0;s<c.length;s+=2){var f=c[s],h=c[s+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(u){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Ec(e,e.return,m)}}break;case 6:if(mu(t,e),yu(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ec(e,e.return,m)}}break;case 3:if(mu(t,e),yu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){Ec(e,e.return,m)}break;case 4:default:mu(t,e),yu(e);break;case 13:mu(t,e),yu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bu=Xe())),4&r&&vu(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Xs=(l=Xs)||f,mu(t,e),Xs=l):mu(t,e),yu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zs=e,f=e.child;null!==f;){for(h=Zs=f;null!==Zs;){switch(p=(d=Zs).child,d.tag){case 0:case 11:case 14:case 15:ru(4,d,d.return);break;case 1:eu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Ec(r,n,m)}}break;case 5:eu(d,d.return);break;case 22:if(null!==d.memoizedState){_u(h);continue}}null!==p?(p.return=d,Zs=p):_u(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=ve("display",s))}catch(m){Ec(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Ec(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:mu(t,e),yu(e),4&r&&vu(e);case 21:}}function yu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(su(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),lu(e,uu(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cu(e,uu(e),o);break;default:throw Error(a(161))}}catch(s){Ec(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ku(e,t,n){Zs=e,bu(e,t,n)}function bu(e,t,n){for(var r=0!==(1&e.mode);null!==Zs;){var i=Zs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$s;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Xs;s=$s;var c=Xs;if($s=o,(Xs=u)&&!c)for(Zs=i;null!==Zs;)u=(o=Zs).child,22===o.tag&&null!==o.memoizedState?xu(i):null!==u?(u.return=o,Zs=u):xu(i);for(;null!==a;)Zs=a,bu(a,t,n),a=a.sibling;Zs=i,$s=s,Xs=c}wu(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zs=a):wu(e)}}function wu(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xs||iu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ja(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ja(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}Xs||512&t.flags&&au(t)}catch(d){Ec(t,t.return,d)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function _u(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function xu(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{iu(4,t)}catch(u){Ec(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){Ec(t,i,u)}}var a=t.return;try{au(t)}catch(u){Ec(t,a,u)}break;case 5:var o=t.return;try{au(t)}catch(u){Ec(t,o,u)}}}catch(u){Ec(t,t.return,u)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var Iu,Eu=Math.ceil,Su=b.ReactCurrentDispatcher,Tu=b.ReactCurrentOwner,Cu=b.ReactCurrentBatchConfig,Nu=0,Au=null,Ru=null,Pu=0,Du=0,Ou=Ii(0),Lu=0,Mu=null,Fu=0,ju=0,Uu=0,Vu=null,zu=null,Bu=0,qu=1/0,Gu=null,Ku=!1,Hu=null,Wu=null,Qu=!1,Yu=null,$u=0,Xu=0,Ju=null,Zu=-1,ec=0;function tc(){return 0!==(6&Nu)?Xe():-1!==Zu?Zu:Zu=Xe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Nu)&&0!==Pu?Pu&-Pu:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rc(e,t,n,r){if(50<Xu)throw Xu=0,Ju=null,Error(a(185));gt(e,n,r),0!==(2&Nu)&&e===Au||(e===Au&&(0===(2&Nu)&&(ju|=n),4===Lu&&uc(e,Pu)),ic(e,r),1===n&&0===Nu&&0===(1&t.mode)&&(qu=Xe()+500,Ui&&Bi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ht(e,e===Au?Pu:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,zi(e)}(cc.bind(null,e)):zi(cc.bind(null,e)),oi((function(){0===(6&Nu)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zu=-1,ec=0,0!==(6&Nu))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Au?Pu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Nu;Nu|=2;var o=vc();for(Au===e&&Pu===t||(Gu=null,qu=Xe()+500,dc(e,t));;)try{kc();break}catch(u){pc(e,u)}wa(),Su.current=o,Nu=i,null!==Ru?t=0:(Au=null,Pu=0,t=Lu)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Mu,dc(e,0),uc(e,r),ic(e,Xe()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Mu,dc(e,0),uc(e,r),ic(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,zu,Gu);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=Bu+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,zu,Gu),t);break}_c(e,zu,Gu);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Eu(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,zu,Gu),r);break}_c(e,zu,Gu);break;default:throw Error(a(329))}}}return ic(e,Xe()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Vu;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=zu,zu=n,null!==t&&sc(t)),e}function sc(e){null===zu?zu=e:zu.push.apply(zu,e)}function uc(e,t){for(t&=~Uu,t&=~ju,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Nu))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return ic(e,Xe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Mu,dc(e,0),uc(e,t),ic(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,zu,Gu),ic(e,Xe()),null}function lc(e,t){var n=Nu;Nu|=1;try{return e(t)}finally{0===(Nu=n)&&(qu=Xe()+500,Ui&&Bi())}}function fc(e){null!==Yu&&0===Yu.tag&&0===(6&Nu)&&xc();var t=Nu;Nu|=1;var n=Cu.transition,r=kt;try{if(Cu.transition=null,kt=1,e)return e()}finally{kt=r,Cu.transition=n,0===(6&(Nu=t))&&Bi()}}function hc(){Du=Ou.current,Ei(Ou)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ru)for(n=Ru.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:io(),Ei(Ni),Ei(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(so);break;case 10:_a(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Au=e,Ru=e=Oc(e.current,null),Pu=Du=t,Lu=0,Mu=null,Uu=ju=Fu=0,zu=Vu=null,null!==Sa){for(t=0;t<Sa.length;t++)if(null!==(r=(n=Sa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Sa=null}return e}function pc(e,t){for(;;){var n=Ru;try{if(wa(),fo.current=os,yo){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}yo=!1}if(po=0,go=mo=vo=null,ko=!1,bo=0,Tu.current=null,null===n||null===n.return){Lu=1,Mu=t,Ru=null;break}e:{var o=e,s=n.return,u=n,c=t;if(t=Pu,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=u,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,ys(p,s,u,0,t),1&p.mode&&ms(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){ms(o,l,t),mc();break e}c=Error(a(426))}else if(ia&&1&u.mode){var g=gs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),ys(g,s,u,0,t),pa(ls(c,u));break e}}o=c=ls(c,u),4!==Lu&&(Lu=2),null===Vu?Vu=[o]:Vu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,ps(0,c,t));break e;case 1:u=c;var y=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Wu||!Wu.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(b){t=b,Ru===n&&null!==n&&(Ru=n=n.return);continue}break}}function vc(){var e=Su.current;return Su.current=os,null===e?os:e}function mc(){0!==Lu&&3!==Lu&&2!==Lu||(Lu=4),null===Au||0===(268435455&Fu)&&0===(268435455&ju)||uc(Au,Pu)}function gc(e,t){var n=Nu;Nu|=2;var r=vc();for(Au===e&&Pu===t||(Gu=null,dc(e,t));;)try{yc();break}catch(i){pc(e,i)}if(wa(),Nu=n,Su.current=r,null!==Ru)throw Error(a(261));return Au=null,Pu=0,Lu}function yc(){for(;null!==Ru;)bc(Ru)}function kc(){for(;null!==Ru&&!Ye();)bc(Ru)}function bc(e){var t=Iu(e.alternate,e,Du);e.memoizedProps=e.pendingProps,null===t?wc(e):Ru=t,Tu.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qs(n,t,Du)))return void(Ru=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Ru=n);if(null===e)return Lu=6,void(Ru=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ru=t);Ru=t=e}while(null!==t);0===Lu&&(Lu=5)}function _c(e,t,n){var r=kt,i=Cu.transition;try{Cu.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==Yu);if(0!==(6&Nu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Au&&(Ru=Au=null,Pu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qu||(Qu=!0,Ac(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cu.transition,Cu.transition=null;var s=kt;kt=1;var u=Nu;Nu|=4,Tu.current=null,function(e,t){if(ei=Gt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,u=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(u=s+i),h!==o||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(u=s),d===o&&++f===r&&(c=s),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Gt=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,g=v.memoizedState,y=t.stateNode,k=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Ec(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}v=nu,nu=!1}(e,n),gu(n,e),pr(ti),Gt=!!ei,ti=ei=null,e.current=n,ku(n,e,i),$e(),Nu=u,kt=s,Cu.transition=o}else e.current=n;if(Qu&&(Qu=!1,Yu=e,$u=i),o=e.pendingLanes,0===o&&(Wu=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ku)throw Ku=!1,e=Hu,Hu=null,e;0!==(1&$u)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Ju?Xu++:(Xu=0,Ju=e):Xu=0,Bi()}(e,t,n,r)}finally{Cu.transition=i,kt=r}return null}function xc(){if(null!==Yu){var e=bt($u),t=Cu.transition,n=kt;try{if(Cu.transition=null,kt=16>e?16:e,null===Yu)var r=!1;else{if(e=Yu,Yu=null,$u=0,0!==(6&Nu))throw Error(a(331));var i=Nu;for(Nu|=4,Zs=e.current;null!==Zs;){var o=Zs,s=o.child;if(0!==(16&Zs.flags)){var u=o.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(Zs=l;null!==Zs;){var f=Zs;switch(f.tag){case 0:case 11:case 15:ru(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zs=h;else for(;null!==Zs;){var d=(f=Zs).sibling,p=f.return;if(ou(f),f===l){Zs=null;break}if(null!==d){d.return=p,Zs=d;break}Zs=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Zs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(o=Zs).flags))switch(o.tag){case 0:case 11:case 15:ru(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Zs=y;break e}Zs=o.return}}var k=e.current;for(Zs=k;null!==Zs;){var b=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Zs=b;else e:for(s=k;null!==Zs;){if(0!==(2048&(u=Zs).flags))try{switch(u.tag){case 0:case 11:case 15:iu(9,u)}}catch(_){Ec(u,u.return,_)}if(u===s){Zs=null;break e}var w=u.sibling;if(null!==w){w.return=u.return,Zs=w;break e}Zs=u.return}}if(Nu=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Cu.transition=t}}return!1}function Ic(e,t,n){e=Oa(e,t=ps(0,t=ls(n,t),1),1),t=tc(),null!==e&&(gt(e,1,t),ic(e,t))}function Ec(e,t,n){if(3===e.tag)Ic(e,e,n);else for(;null!==t;){if(3===t.tag){Ic(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wu||!Wu.has(r))){t=Oa(t,e=vs(t,e=ls(n,e),1),1),e=tc(),null!==t&&(gt(t,1,e),ic(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Au===e&&(Pu&n)===n&&(4===Lu||3===Lu&&(130023424&Pu)===Pu&&500>Xe()-Bu?dc(e,0):Uu|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Na(e,t))&&(gt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Ac(e,t){return We(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Rc(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Dc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case x:return Mc(n.children,i,o,t);case I:s=8,i|=8;break;case E:return(e=Pc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case N:return(e=Pc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Pc(19,n,t,i)).elementType=A,e.lanes=o,e;case D:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:s=10;break e;case T:s=9;break e;case C:s=11;break e;case R:s=14;break e;case P:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pc(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function jc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,a,o,s,u){return e=new Vc(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(a),e}function Bc(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,s,u){return(e=zc(n,r,!0,e,0,a,0,s,u)).context=Bc(null),n=e.current,(a=Da(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,gt(e,i,r),ic(e,r),e}function Gc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Da(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Iu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:As(t),da();break;case 5:ao(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(ga,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?js(e,t,n):(Si(so,1&so.current),null!==(e=Ks(e,t,n))?e.sibling:null);Si(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return Ks(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Gs(e,t),e=t.pendingProps;var i=Ri(t,Ci.current);Ia(t,n),i=Io(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ra(t),i.updater=za,t.stateNode=i,i._reactInternals=t,Ka(t,r,e,n),t=Ns(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Gs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===R)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=Cs(null,t,r,e,n);break e;case 11:t=_s(null,t,r,e,n);break e;case 14:t=xs(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cs(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(As(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Pa(e,t),Fa(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Rs(e,t,r,n,i=ls(Error(a(423)),t));break e}if(r!==i){t=Rs(e,t,r,n,i=ls(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ks(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Ss(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ca(t),null;case 13:return js(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_s(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Si(ga,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ni.current){t=Ks(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Da(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),xa(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Ea(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),xs(e,t,r,i=ma(r.type,i),n);case 15:return Is(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Gs(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,Ia(t,n),qa(t,r,i),Ka(t,r,i,n),Ns(null,t,r,!0,e,n);case 19:return qs(e,t,n);case 22:return Es(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Kc(o);s.call(e)}}Gc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Kc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Kc(u);s.call(e)}}var u=zc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=u,e[pi]=u.current,Br(8===e.nodeType?e.parentNode:e),fc((function(){Gc(t,u,n,r)})),u}(n,t,e,i,r);return Kc(o)}$c.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Gc(e,t,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Gc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(yt(t,1|n),ic(t,Xe()),0===(6&Nu)&&(qu=Xe()+500,Bi()))}break;case 13:fc((function(){var t=Na(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Wc(e,1)}},_t=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)rc(t,e,134217728,tc());Wc(e,134217728)}},xt=function(e){if(13===e.tag){var t=nc(e),n=Na(e,t);if(null!==n)rc(n,e,t,tc());Wc(e,t)}},It=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));W(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,Ne=fc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Se,Te,lc]},nl={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:s.current}}t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var b=k.prototype=new y;b.constructor=k,v(b,g.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:x.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+C(u,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(s=e[c],c);u+=N(s,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=N(s=s.value,t,i,l=a+C(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},D={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:D,ReactCurrentOwner:x};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)_.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>a(u,n))c<i&&0>a(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,D(_);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function _(e,n){v=!1,m&&(m=!1,y(S),S=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var u=!0;else{var f=r(l);null!==f&&O(w,f.startTime-n),u=!1}return u}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,I=!1,E=null,S=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?x():(I=!1,E=null)}}else I=!1}if("function"===typeof k)x=function(){k(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=A,x=function(){P.postMessage(null)}}else x=function(){g(A,0)};function D(e){E=e,I||(I=!0,x())}function O(e,n){S=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,D(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(y(S),S=-1):m=!0,O(w,a-o))):(e.sortIndex=s,n(c,e),v||p||(v=!0,D(_))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}!function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return G},SDK_VERSION:function(){return ot},_DEFAULT_ENTRY_NAME:function(){return We},_addComponent:function(){return Xe},_addOrOverwriteComponent:function(){return Je},_apps:function(){return Ye},_clearComponents:function(){return nt},_components:function(){return $e},_getProvider:function(){return et},_registerComponent:function(){return Ze},_removeServiceInstance:function(){return tt},deleteApp:function(){return lt},getApp:function(){return ut},getApps:function(){return ct},initializeApp:function(){return st},onLog:function(){return dt},registerVersion:function(){return ht},setLogLevel:function(){return pt}});var t=n(791),r=n.t(t,2),i=n(250);function a(e){if(Array.isArray(e))return e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||s(e,t)||u()}var l=n(184);var f=function(e){var n=c((0,t.useState)(""),2),r=n[0],i=n[1],a=c((0,t.useState)(""),2),o=a[0],s=a[1],u=c((0,t.useState)(!1),2),f=u[0],h=u[1],d=c((0,t.useState)(!1),2),p=(d[0],d[1]),v=c((0,t.useState)(!1),2),m=v[0],g=v[1];(0,t.useEffect)((function(){var e=setTimeout((function(){console.log("Checking form validity!"),p(r.includes("@")&&o.trim().length>8)}),500);return function(){console.log("CLEANUP"),clearTimeout(e)}}),[r,o]);var y=function(){console.log("register btn clicked"),e.onRegisterClicked()};return(0,l.jsxs)("div",{className:"register__div",children:[(0,l.jsxs)("nav",{className:"mobile__nav",children:[(0,l.jsx)("h1",{className:"nav__logo",children:"l'sBook"}),(0,l.jsx)("button",{onClick:y,children:"Register"})]}),(0,l.jsx)("div",{className:"login-container",children:(0,l.jsxs)("div",{className:"card",children:[(0,l.jsxs)("div",{className:"card-left",children:[(0,l.jsxs)("h1",{children:["HELLO",(0,l.jsx)("br",{}),"WORLD"]}),(0,l.jsx)("p",{children:"Upload images and videos online to share with your friends across the world. Communicate with new people everyday."}),(0,l.jsx)("span",{children:"Don't have an account?"}),(0,l.jsx)("button",{onClick:y,children:"Register"})]}),(0,l.jsxs)("div",{className:"card-right",children:[(0,l.jsx)("h1",{children:"Login"}),(0,l.jsxs)("form",{children:[(0,l.jsxs)("div",{className:"input ".concat(f?"invalidEmail":""),children:[(0,l.jsx)("input",{type:"email",placeholder:"Email",value:r,onChange:function(e){i(e.target.value)},onBlur:function(){r.includes("@")||h(!0)}}),(0,l.jsxs)("p",{className:"error ".concat(f?"errorEmailMsg":""),children:[" ","Please enter a valid email adress."]})]}),(0,l.jsxs)("div",{className:"input ".concat(m?"invalidPassword":""),children:[(0,l.jsx)("input",{type:"password",placeholder:"Password",value:o,onChange:function(e){s(e.target.value)},onBlur:function(){o.trim().length>8||g(!0)}}),(0,l.jsxs)("p",{className:"error ".concat(m?"errorPasswordMsg":""),children:[" ","Password must have atleast 8 characters."]})]}),(0,l.jsx)("button",{disabled:!r&&!o,type:"submit",onClick:function(t){console.log("login form valid.... calling login page"),t.preventDefault(),e.onLogin(r,o)},children:"Login"})]})]})]})})]})};function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function d(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===h(t)?t:String(t)}function p(e,t,n){return(t=d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function g(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function I(e){var t=x();return function(){var n,r=_(e);if(t){var i=_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===h(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}(this,n)}}function E(e,t,n){return E=x()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&b(i,n.prototype),i},E.apply(null,arguments)}function S(e){var t="function"===typeof Map?new Map:void 0;return S=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return E(e,arguments,_(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),b(r,e)},S(e)}var T=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},C={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,f=(3&a)<<4|s>>4,h=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(T(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw new N;var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var f=s<<6&192|u;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},N=function(e){w(n,e);var t=I(n);function n(){var e;return v(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return g(n)}(S(Error)),A=function(e){return function(e){var t=T(e);return C.encodeByteArray(t,!0)}(e).replace(/\./g,"")},R=function(e){try{return C.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function P(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=P(e[n],t[n]));return e}var D=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},O=function(){try{return D()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&R(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},L=function(){var e;return null===(e=O())||void 0===e?void 0:e.config},M=function(){function e(){var t=this;v(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return g(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function F(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[A(JSON.stringify({alg:"none",type:"JWT"})),A(JSON.stringify(a)),""].join(".")}function j(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function U(){var e,t=null===(e=O())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function V(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function z(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function B(){var e=j();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function q(){try{return"object"===typeof indexedDB}catch(e){return!1}}var G=function(e){w(n,e);var t=I(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(k(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(k(a),K.prototype.create),a}return g(n)}(S(Error)),K=function(){function e(t,n,r){v(this,e),this.service=t,this.serviceName=n,this.errors=r}return g(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(H,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new G(n,a,t)}}]),e}();var H=/\{\$([^}]+)}/g;function W(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Q(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Y(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if($(s)&&$(u)){if(!Y(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function $(e){return null!==e&&"object"===typeof e}function X(e){for(var t=[],n=function(){var e=c(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function J(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=c(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Z(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function ee(e,t){var n=new te(e,t);return n.subscribe.bind(n)}var te=function(){function e(t,n){var r=this;v(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return g(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=y(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=ne),void 0===r.error&&(r.error=ne),void 0===r.complete&&(r.complete=ne);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function ne(){}function re(e){return e&&e._delegate?e._delegate:e}function ie(){ie=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(N){u=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),s=new S(i||[]);return r(o,"_invoke",{value:_(e,n,s)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=c;var f={};function d(){}function p(){}function v(){}var m={};u(m,a,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(T([])));y&&y!==t&&n.call(y,a)&&(m=y);var k=v.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,a,o,s){var u=l(e[r],e,a);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==h(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,s)}),(function(e){i("throw",e,o,s)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,s)}))}s(u.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function _(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=x(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=v,r(k,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(k),u(k,s,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function ae(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function oe(e){return function(e){if(Array.isArray(e))return o(e)}(e)||ae(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function ue(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){se(a,r,i,o,s,"next",e)}function s(e){se(a,r,i,o,s,"throw",e)}o(void 0)}))}}var ce=function(){function e(t,n,r){v(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return g(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),le="[DEFAULT]",fe=function(){function e(t,n){v(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return g(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new M;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:le})}catch(u){}var t,n=y(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=c(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(u){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=ue(ie().mark((function e(){var t;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(oe(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),oe(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=y(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=c(i.value,2),u=s[0],l=s[1];r===this.normalizeInstanceIdentifier(u)&&l.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(s){i.e(s)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t=e.instanceIdentifier,n=e.options,r=void 0===n?{}:n,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:he(t),options:r}),this.instances.set(t,i),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(a){}return i||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le;return this.component?this.component.multipleInstances?e:le:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();function he(e){return e===le?void 0:e}var de,pe,ve=function(){function e(t){v(this,e),this.name=t,this.providers=new Map}return g(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new fe(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),me=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(pe||(pe={}));var ge={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},ye=pe.INFO,ke=(p(de={},pe.DEBUG,"log"),p(de,pe.VERBOSE,"log"),p(de,pe.INFO,"info"),p(de,pe.WARN,"warn"),p(de,pe.ERROR,"error"),de),be=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=ke[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},we=function(){function e(t){v(this,e),this.name=t,this._logLevel=ye,this._logHandler=be,this._userLogHandler=null,me.push(this)}return g(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in pe))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?ge[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,pe.DEBUG].concat(t)),this._logHandler.apply(this,[this,pe.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,pe.VERBOSE].concat(t)),this._logHandler.apply(this,[this,pe.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,pe.INFO].concat(t)),this._logHandler.apply(this,[this,pe.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,pe.WARN].concat(t)),this._logHandler.apply(this,[this,pe.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,pe.ERROR].concat(t)),this._logHandler.apply(this,[this,pe.ERROR].concat(t))}}]),e}();function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ie,Ee,Se=function(e,t){return t.some((function(t){return e instanceof t}))};var Te=new WeakMap,Ce=new WeakMap,Ne=new WeakMap,Ae=new WeakMap,Re=new WeakMap;var Pe={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ce.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ne.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Le(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function De(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ee||(Ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Me(this),n),Le(Te.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Le(e.apply(Me(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Me(this),t].concat(r));return Ne.set(a,t.sort?t.sort():[t]),Le(a)}}function Oe(e){return"function"===typeof e?De(e):(e instanceof IDBTransaction&&function(e){if(!Ce.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Ce.set(e,t)}}(e),Se(e,Ie||(Ie=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Pe):e)}function Le(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Le(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Te.set(t,e)})).catch((function(){})),Re.set(t,e),t}(e);if(Ae.has(e))return Ae.get(e);var t=Oe(e);return t!==e&&(Ae.set(e,t),Re.set(t,e)),t}var Me=function(e){return Re.get(e)};var Fe,je,Ue=["get","getKey","getAll","getAllKeys","count"],Ve=["put","add","delete","clear"],ze=new Map;function Be(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(ze.get(t))return ze.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Ve.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Ue.includes(n))){var a=function(){var e=ue(ie().mark((function e(t){var a,o,s,u,c,l,f=arguments;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=f.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=f[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return ze.set(t,a),a}}}Pe=function(e){return xe(xe({},e),{},{get:function(t,n,r){return Be(t,n)||e.get(t,n,r)},has:function(t,n){return!!Be(t,n)||e.has(t,n)}})}(Pe);var qe=function(){function e(t){v(this,e),this.container=t}return g(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Ge="@firebase/app",Ke="0.9.14",He=new we("@firebase/app"),We="[DEFAULT]",Qe=(p(Fe={},Ge,"fire-core"),p(Fe,"@firebase/app-compat","fire-core-compat"),p(Fe,"@firebase/analytics","fire-analytics"),p(Fe,"@firebase/analytics-compat","fire-analytics-compat"),p(Fe,"@firebase/app-check","fire-app-check"),p(Fe,"@firebase/app-check-compat","fire-app-check-compat"),p(Fe,"@firebase/auth","fire-auth"),p(Fe,"@firebase/auth-compat","fire-auth-compat"),p(Fe,"@firebase/database","fire-rtdb"),p(Fe,"@firebase/database-compat","fire-rtdb-compat"),p(Fe,"@firebase/functions","fire-fn"),p(Fe,"@firebase/functions-compat","fire-fn-compat"),p(Fe,"@firebase/installations","fire-iid"),p(Fe,"@firebase/installations-compat","fire-iid-compat"),p(Fe,"@firebase/messaging","fire-fcm"),p(Fe,"@firebase/messaging-compat","fire-fcm-compat"),p(Fe,"@firebase/performance","fire-perf"),p(Fe,"@firebase/performance-compat","fire-perf-compat"),p(Fe,"@firebase/remote-config","fire-rc"),p(Fe,"@firebase/remote-config-compat","fire-rc-compat"),p(Fe,"@firebase/storage","fire-gcs"),p(Fe,"@firebase/storage-compat","fire-gcs-compat"),p(Fe,"@firebase/firestore","fire-fst"),p(Fe,"@firebase/firestore-compat","fire-fst-compat"),p(Fe,"fire-js","fire-js"),p(Fe,"firebase","fire-js-all"),Fe),Ye=new Map,$e=new Map;function Xe(e,t){try{e.container.addComponent(t)}catch(n){He.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Je(e,t){e.container.addOrOverwriteComponent(t)}function Ze(e){var t=e.name;if($e.has(t))return He.debug("There were multiple attempts to register component ".concat(t,".")),!1;$e.set(t,e);var n,r=y(Ye.values());try{for(r.s();!(n=r.n()).done;){Xe(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function et(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function tt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:We;et(e,t).clearInstance(n)}function nt(){$e.clear()}var rt=(p(je={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),p(je,"bad-app-name","Illegal App name: '{$appName}"),p(je,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),p(je,"app-deleted","Firebase App named '{$appName}' already deleted"),p(je,"no-options","Need to provide options, when not being deployed to hosting via source."),p(je,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),p(je,"invalid-log-argument","First argument to `onLog` must be null or a function."),p(je,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),p(je,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),p(je,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),p(je,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),je),it=new K("app","Firebase",rt),at=function(){function e(t,n,r){var i=this;v(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ce("app",(function(){return i}),"PUBLIC"))}return g(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw it.create("app-deleted",{appName:this._name})}}]),e}(),ot="10.0.0";function st(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:We,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw it.create("bad-app-name",{appName:String(i)});if(n||(n=L()),!n)throw it.create("no-options");var a=Ye.get(i);if(a){if(Y(n,a.options)&&Y(r,a.config))return a;throw it.create("duplicate-app",{appName:i})}var o,s=new ve(i),u=y($e.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(f){u.e(f)}finally{u.f()}var l=new at(n,r,s);return Ye.set(i,l),l}function ut(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=Ye.get(e);if(!t&&e===We&&L())return st();if(!t)throw it.create("no-app",{appName:e});return t}function ct(){return Array.from(Ye.values())}function lt(e){return ft.apply(this,arguments)}function ft(){return(ft=ue(ie().mark((function e(t){var n;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Ye.has(n)){e.next=6;break}return Ye.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ht(e,t,n){var r,i=null!==(r=Qe[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void He.warn(s.join(" "))}Ze(new ce("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function dt(e,t){if(null!==e&&"function"!==typeof e)throw it.create("invalid-log-argument");!function(e,t){var n,r=y(me);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=ge[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var s=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:pe[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function pt(e){var t;t=e,me.forEach((function(e){e.setLogLevel(t)}))}var vt="firebase-heartbeat-database",mt=1,gt="firebase-heartbeat-store",yt=null;function kt(){return yt||(yt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=Le(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(Le(s.result),e.oldVersion,e.newVersion,Le(s.transaction),e)})),r&&s.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),u}(vt,mt,{upgrade:function(e,t){if(0===t)e.createObjectStore(gt)}}).catch((function(e){throw it.create("idb-open",{originalErrorMessage:e.message})}))),yt}function bt(e){return wt.apply(this,arguments)}function wt(){return wt=ue(ie().mark((function e(t){var n,r,i;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,kt();case 3:return n=e.sent,e.next=6,n.transaction(gt).objectStore(gt).get(It(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof G?He.warn(e.t0.message):(i=it.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),He.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),wt.apply(this,arguments)}function _t(e,t){return xt.apply(this,arguments)}function xt(){return xt=ue(ie().mark((function e(t,n){var r,i,a,o;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,kt();case 3:return r=e.sent,i=r.transaction(gt,"readwrite"),a=i.objectStore(gt),e.next=8,a.put(n,It(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof G?He.warn(e.t0.message):(o=it.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),He.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),xt.apply(this,arguments)}function It(e){return"".concat(e.name,"!").concat(e.options.appId)}var Et=function(){function e(t){var n=this;v(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new At(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return g(e,[{key:"triggerHeartbeat",value:function(){var e=ue(ie().mark((function e(){var t,n,r;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=St(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=ue(ie().mark((function e(){var t,n,r,i,a;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=St(),n=Tt(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=A(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function St(){return(new Date).toISOString().substring(0,10)}function Tt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=y(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Rt(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Rt(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Ct,Nt,At=function(){function e(t){v(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return g(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=ue(ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=ue(ie().mark((function e(){var t;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,bt(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=ue(ie().mark((function e(t){var n,r;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",_t(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=ue(ie().mark((function e(t){var n,r;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",_t(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(oe(r.heartbeats),oe(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Rt(e){return A(JSON.stringify({version:2,heartbeats:e})).length}Ct="",Ze(new ce("platform-logger",(function(e){return new qe(e)}),"PRIVATE")),Ze(new ce("heartbeat",(function(e){return new Et(e)}),"PRIVATE")),ht(Ge,Ke,Ct),ht(Ge,Ke,"esm2017"),ht("fire-js","");var Pt=function(){function e(t,n){var r=this;v(this,e),this._delegate=t,this.firebase=n,Xe(t,new ce("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return g(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),lt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:We;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:We;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Xe(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Je(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Dt=(p(Nt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),p(Nt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Nt),Ot=new K("app-compat","Firebase",Dt);var Lt=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=st(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(W(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:ht,setLogLevel:pt,onLog:dt,apps:null,SDK_VERSION:ot,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Ze(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Ot.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&P(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!W(n,e=e||We))throw Ot.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Pt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){P(n,e)},createSubscribe:ee,ErrorFactory:K,deepExtend:P}),n}(),Mt=new we("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Mt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Ft=self.firebase.SDK_VERSION;Ft&&Ft.indexOf("LITE")>=0&&Mt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var jt=Lt;!function(e){ht("@firebase/app-compat","0.2.14",e)}();function Ut(){return Ut="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Ut.apply(this,arguments)}jt.registerVersion("firebase","10.0.0","app-compat");var Vt,zt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Bt={},qt=qt||{},Gt=zt||self;function Kt(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Ht(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Wt="closure_uid_"+(1e9*Math.random()>>>0),Qt=0;function Yt(e,t,n){return e.call.apply(e.bind,arguments)}function $t(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Xt(e,t,n){return(Xt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Yt:$t).apply(null,arguments)}function Jt(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Zt(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function en(){this.s=this.s,this.o=this.o}en.prototype.s=!1,en.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Wt)&&e[Wt]||(e[Wt]=++Qt))},en.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var tn=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function nn(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function rn(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Kt(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function an(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}an.prototype.h=function(){this.defaultPrevented=!0};var on=function(){if(!Gt.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Gt.addEventListener("test",(function(){}),t),Gt.removeEventListener("test",(function(){}),t)}catch(n){}return e}();function sn(e){return/^[\s\xa0]*$/.test(e)}function un(){var e=Gt.navigator;return e&&(e=e.userAgent)?e:""}function cn(e){return-1!=un().indexOf(e)}function ln(e){return ln[" "](e),e}ln[" "]=function(){};var fn,hn,dn=cn("Opera"),pn=cn("Trident")||cn("MSIE"),vn=cn("Edge"),mn=vn||pn,gn=cn("Gecko")&&!(-1!=un().toLowerCase().indexOf("webkit")&&!cn("Edge"))&&!(cn("Trident")||cn("MSIE"))&&!cn("Edge"),yn=-1!=un().toLowerCase().indexOf("webkit")&&!cn("Edge");function kn(){var e=Gt.document;return e?e.documentMode:void 0}e:{var bn="",wn=function(){var e=un();return gn?/rv:([^\);]+)(\)|;)/.exec(e):vn?/Edge\/([\d\.]+)/.exec(e):pn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):yn?/WebKit\/(\S+)/.exec(e):dn?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(wn&&(bn=wn?wn[1]:""),pn){var _n=kn();if(null!=_n&&_n>parseFloat(bn)){fn=String(_n);break e}}fn=bn}if(Gt.document&&pn){var xn=kn();hn=xn||(parseInt(fn,10)||void 0)}else hn=void 0;var In=hn;function En(e,t){if(an.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(gn){e:{try{ln(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Sn[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&En.$.h.call(this)}}Zt(En,an);var Sn={2:"touch",3:"pen",4:"mouse"};En.prototype.h=function(){En.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Tn="closure_listenable_"+(1e6*Math.random()|0),Cn=0;function Nn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Cn,this.fa=this.ia=!1}function An(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Rn(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Pn(e){var t={};for(var n in e)t[n]=e[n];return t}var Dn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function On(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Dn.length;a++)n=Dn[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Ln(e){this.src=e,this.g={},this.h=0}function Mn(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=tn(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(An(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Fn(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}Ln.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Fn(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Nn(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var jn="closure_lm_"+(1e6*Math.random()|0),Un={};function Vn(e,t,n,r,i){if(r&&r.once)return Bn(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Vn(e,t[a],n,r,i);return null}return n=Yn(n),e&&e[Tn]?e.O(t,n,Ht(r)?!!r.capture:!!r,i):zn(e,t,n,!1,r,i)}function zn(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Ht(i)?!!i.capture:!!i,s=Wn(e);if(s||(e[jn]=s=new Ln(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Hn;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)on||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Kn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Bn(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Bn(e,t[a],n,r,i);return null}return n=Yn(n),e&&e[Tn]?e.P(t,n,Ht(r)?!!r.capture:!!r,i):zn(e,t,n,!0,r,i)}function qn(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)qn(e,t[a],n,r,i);else r=Ht(r)?!!r.capture:!!r,n=Yn(n),e&&e[Tn]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Fn(a=e.g[t],n,r,i))&&(An(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Wn(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Fn(t,n,r,i)),(n=-1<e?t[e]:null)&&Gn(n))}function Gn(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Tn])Mn(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Kn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Wn(t))?(Mn(n,e),0==n.h&&(n.src=null,t[jn]=null)):An(e)}}}function Kn(e){return e in Un?Un[e]:Un[e]="on"+e}function Hn(e,t){if(e.fa)e=!0;else{t=new En(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Gn(e),e=n.call(r,t)}return e}function Wn(e){return(e=e[jn])instanceof Ln?e:null}var Qn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yn(e){return"function"===typeof e?e:(e[Qn]||(e[Qn]=function(t){return e.handleEvent(t)}),e[Qn])}function $n(){en.call(this),this.i=new Ln(this),this.S=this,this.J=null}function Xn(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new an(t,e);else if(t instanceof an)t.target=t.target||e;else{var i=t;On(t=new an(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Jn(o,r,!0,t)&&i}if(i=Jn(o=t.g=e,r,!0,t)&&i,i=Jn(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Jn(o=t.g=n[a],r,!1,t)&&i}function Jn(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var s=o.listener,u=o.la||o.src;o.ia&&Mn(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}Zt($n,en),$n.prototype[Tn]=!0,$n.prototype.removeEventListener=function(e,t,n,r){qn(this,e,t,n,r)},$n.prototype.N=function(){if($n.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)An(n[r]);delete t.g[e],t.h--}}this.J=null},$n.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},$n.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Zn=Gt.JSON.stringify,er=function(){function e(t,n){v(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return g(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function tr(){var e=cr,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var nr=function(){function e(){v(this,e),this.h=this.g=null}return g(e,[{key:"add",value:function(e,t){var n=rr.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),rr=new er((function(){return new ir}),(function(e){return e.reset()})),ir=function(){function e(){v(this,e),this.next=this.g=this.h=null}return g(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function ar(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function or(e){Gt.setTimeout((function(){throw e}),0)}var sr,ur=!1,cr=new nr,lr=function(){var e=Gt.Promise.resolve(void 0);sr=function(){e.then(fr)}},fr=function(){for(var e;e=tr();){try{e.h.call(e.g)}catch(n){or(n)}var t=rr;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ur=!1};function hr(e,t){$n.call(this),this.h=e||1,this.g=t||Gt,this.j=Xt(this.qb,this),this.l=Date.now()}function dr(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function pr(e,t,n){if("function"===typeof e)n&&(e=Xt(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Xt(e.handleEvent,e)}return 2147483647<Number(t)?-1:Gt.setTimeout(e,t||0)}function vr(e){e.g=pr((function(){e.g=null,e.i&&(e.i=!1,vr(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Zt(hr,$n),(Vt=hr.prototype).ga=!1,Vt.T=null,Vt.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Xn(this,"tick"),this.ga&&(dr(this),this.start()))}},Vt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Vt.N=function(){hr.$.N.call(this),dr(this),delete this.g};var mr=function(e){w(n,e);var t=I(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return g(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:vr(this)}},{key:"N",value:function(){Ut(_(n.prototype),"N",this).call(this),this.g&&(Gt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(en);function gr(e){en.call(this),this.h=e,this.g={}}Zt(gr,en);var yr=[];function kr(e,t,n,r){Array.isArray(n)||(n&&(yr[0]=n.toString()),n=yr);for(var i=0;i<n.length;i++){var a=Vn(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function br(e){Rn(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Gn(e)}),e),e.g={}}function wr(){this.g=!0}function _r(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Zn(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}gr.prototype.N=function(){gr.$.N.call(this),br(this)},gr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},wr.prototype.Ea=function(){this.g=!1},wr.prototype.info=function(){};var xr={},Ir=null;function Er(){return Ir=Ir||new $n}function Sr(e){an.call(this,xr.Ta,e)}function Tr(e){var t=Er();Xn(t,new Sr(t))}function Cr(e,t){an.call(this,xr.STAT_EVENT,e),this.stat=t}function Nr(e){var t=Er();Xn(t,new Cr(t,e))}function Ar(e,t){an.call(this,xr.Ua,e),this.size=t}function Rr(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Gt.setTimeout((function(){e()}),t)}xr.Ta="serverreachability",Zt(Sr,an),xr.STAT_EVENT="statevent",Zt(Cr,an),xr.Ua="timingevent",Zt(Ar,an);var Pr={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Dr={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Or(){}function Lr(e){return e.h||(e.h=e.i())}function Mr(){}Or.prototype.h=null;var Fr,jr={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ur(){an.call(this,"d")}function Vr(){an.call(this,"c")}function zr(){}function Br(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new gr(this),this.P=Gr,e=mn?125:void 0,this.V=new hr(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new qr}function qr(){this.i=null,this.g="",this.h=!1}Zt(Ur,an),Zt(Vr,an),Zt(zr,Or),zr.prototype.g=function(){return new XMLHttpRequest},zr.prototype.i=function(){return{}},Fr=new zr;var Gr=45e3,Kr={},Hr={};function Wr(e,t,n){e.L=1,e.v=hi(si(t)),e.s=n,e.S=!0,Qr(e,null)}function Qr(e,t){e.G=Date.now(),Jr(e),e.A=si(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Ei(n.i,"t",r),e.C=0,n=e.l.J,e.h=new qr,e.g=Sa(e.l,n?t:null,!e.s),0<e.O&&(e.M=new mr(Xt(e.Pa,e,e.g),e.O)),kr(e.U,e.g,"readystatechange",e.nb),t=e.I?Pn(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Tr(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function Yr(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function $r(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=Xr(e,n))==Hr){4==t&&(e.o=4,Nr(14),i=!1),_r(e.j,e.m,null,"[Incomplete Response]");break}if(r==Kr){e.o=4,Nr(15),_r(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}_r(e.j,e.m,r,null),ri(e,r)}Yr(e)&&r!=Hr&&r!=Kr&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Nr(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),ya(t),t.M=!0,Nr(11))):(_r(e.j,e.m,n,"[Invalid Chunked Response]"),ni(e),ti(e))}function Xr(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Hr:(n=Number(t.substring(n,r)),isNaN(n)?Kr:(r+=1)+n>t.length?Hr:(t=t.slice(r,r+n),e.C=r+n,t))}function Jr(e){e.Y=Date.now()+e.P,Zr(e,e.P)}function Zr(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Rr(Xt(e.lb,e),t)}function ei(e){e.B&&(Gt.clearTimeout(e.B),e.B=null)}function ti(e){0==e.l.H||e.J||wa(e.l,e)}function ni(e){ei(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,dr(e.V),br(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function ri(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Pi(n.i,e)))if(!e.K&&Pi(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;ba(n),la(n)}ga(n),Nr(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Rr(Xt(n.ib,n),6e3));if(1>=Ri(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else xa(n,11)}else if((e.K||n.g==e)&&ba(n),!sn(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var s=a[4];null!=s&&(n.Ga=s,n.l.info("SVER="+n.Ga));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Di(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,fi(r.I,r.F,h))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=Ea(r,r.J?r.pa:null,r.Y),d.K){Oi(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.B&&(ei(p),Jr(p)),r.g=d}else ma(r);0<n.j.length&&ha(n)}else"stop"!=a[0]&&"close"!=a[0]||xa(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?xa(n,7):ca(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}Tr()}catch(a){}}function ii(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Kt(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Kt(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Kt(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Vt=Br.prototype).setTimeout=function(e){this.P=e},Vt.nb=function(e){e=e.target;var t=this.M;t&&3==ra(e)?t.l():this.Pa(e)},Vt.Pa=function(e){try{if(e==this.g)e:{var t=ra(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||mn||this.g&&(this.h.h||this.g.ja()||ia(this.g)))){this.J||4!=t||7==n||Tr(),ei(this);var r=this.g.da();this.ca=r;t:if(Yr(this)){var i=ia(this.g);e="";var a=i.length,o=4==ra(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ni(this),ti(this);var s="";break t}this.h.i=new Gt.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!sn(u)){var l=u;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Nr(12),ni(this),ti(this);break e}_r(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ri(this,r)}this.S?($r(this,t,s),mn&&this.i&&3==t&&(kr(this.U,this.V,"tick",this.mb),this.V.start())):(_r(this.j,this.m,s,null),ri(this,s)),4==t&&ni(this),this.i&&!this.J&&(4==t?wa(this.l,this):(this.i=!1,Jr(this)))}else(function(e){var t={};e=(e.g&&2<=ra(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!sn(e[n])){var r=ar(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<s.indexOf("Unknown SID")?(this.o=3,Nr(12)):(this.o=0,Nr(13)),ni(this),ti(this)}}}catch(t){}},Vt.mb=function(){if(this.g){var e=ra(this.g),t=this.g.ja();this.C<t.length&&(ei(this),$r(this,e,t),this.i&&4!=e&&Jr(this))}},Vt.cancel=function(){this.J=!0,ni(this)},Vt.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(Tr(),Nr(17)),ni(this),this.o=2,ti(this)):Zr(this,this.Y-e)};var ai=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oi(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof oi){this.h=e.h,ui(this,e.j),this.s=e.s,this.g=e.g,ci(this,e.m),this.l=e.l;var t=e.i,n=new wi;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),li(this,n),this.o=e.o}else e&&(t=String(e).match(ai))?(this.h=!1,ui(this,t[1]||"",!0),this.s=di(t[2]||""),this.g=di(t[3]||"",!0),ci(this,t[4]),this.l=di(t[5]||"",!0),li(this,t[6]||"",!0),this.o=di(t[7]||"")):(this.h=!1,this.i=new wi(null,this.h))}function si(e){return new oi(e)}function ui(e,t,n){e.j=n?di(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ci(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function li(e,t,n){t instanceof wi?(e.i=t,function(e,t){t&&!e.j&&(_i(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(xi(this,t),Ei(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=pi(t,ki)),e.i=new wi(t,e.h))}function fi(e,t,n){e.i.set(t,n)}function hi(e){return fi(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function di(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function pi(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,vi),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function vi(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}oi.prototype.toString=function(){var e=[],t=this.j;t&&e.push(pi(t,mi,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(pi(t,mi,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(pi(n,"/"==n.charAt(0)?yi:gi,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",pi(n,bi)),e.join("")};var mi=/[#\/\?@]/g,gi=/[#\?:]/g,yi=/[#\?]/g,ki=/[#\?@]/g,bi=/#/g;function wi(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function _i(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function xi(e,t){_i(e),t=Si(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ii(e,t){return _i(e),t=Si(e,t),e.g.has(t)}function Ei(e,t,n){xi(e,t),0<n.length&&(e.i=null,e.g.set(Si(e,t),nn(n)),e.h+=n.length)}function Si(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Vt=wi.prototype).add=function(e,t){_i(this),this.i=null,e=Si(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Vt.forEach=function(e,t){_i(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Vt.ta=function(){_i(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Vt.Z=function(e){_i(this);var t=[];if("string"===typeof e)Ii(this,e)&&(t=t.concat(this.g.get(Si(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Vt.set=function(e,t){return _i(this),this.i=null,Ii(this,e=Si(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Vt.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Vt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Ti=g((function e(t,n){v(this,e),this.g=t,this.map=n}));function Ci(e){this.l=e||Ni,Gt.PerformanceNavigationTiming?e=0<(e=Gt.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Gt.g&&Gt.g.Ka&&Gt.g.Ka()&&Gt.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ni=10;function Ai(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ri(e){return e.h?1:e.g?e.g.size:0}function Pi(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Di(e,t){e.g?e.g.add(t):e.h=t}function Oi(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Li(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=y(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return nn(e.i)}Ci.prototype.cancel=function(){if(this.i=Li(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=y(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var Mi,Fi=function(){function e(){v(this,e)}return g(e,[{key:"stringify",value:function(e){return Gt.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return Gt.JSON.parse(e,void 0)}}]),e}();function ji(){this.g=new Fi}function Ui(e,t,n){var r=n||"";try{ii(e,(function(e,n){var i=e;Ht(e)&&(i=Zn(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Vi(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function zi(e){this.l=e.fc||null,this.j=e.ob||!1}function Bi(e,t){$n.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=qi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Zt(zi,Or),zi.prototype.g=function(){return new Bi(this.l,this.j)},zi.prototype.i=(Mi={},function(){return Mi}),Zt(Bi,$n);var qi=0;function Gi(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Ki(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Hi(e)}function Hi(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Vt=Bi.prototype).open=function(e,t){if(this.readyState!=qi)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Hi(this)},Vt.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Gt).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Vt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ki(this)),this.readyState=qi},Vt.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Hi(this)),this.g&&(this.readyState=3,Hi(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Gt.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Gi(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Vt.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ki(this):Hi(this),3==this.readyState&&Gi(this)}},Vt.Za=function(e){this.g&&(this.response=this.responseText=e,Ki(this))},Vt.Ya=function(e){this.g&&(this.response=e,Ki(this))},Vt.ka=function(){this.g&&Ki(this)},Vt.setRequestHeader=function(e,t){this.v.append(e,t)},Vt.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Vt.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Bi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Wi=Gt.JSON.parse;function Qi(e){$n.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Yi,this.L=this.M=!1}Zt(Qi,$n);var Yi="",$i=/^https?$/i,Xi=["POST","PUT"];function Ji(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Zi(e),ta(e)}function Zi(e){e.F||(e.F=!0,Xn(e,"complete"),Xn(e,"error"))}function ea(e){if(e.h&&"undefined"!=typeof qt&&(!e.C[1]||4!=ra(e)||2!=e.da()))if(e.v&&4==ra(e))pr(e.La,0,e);else if(Xn(e,"readystatechange"),4==ra(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(ai)[1]||null;!a&&Gt.self&&Gt.self.location&&(a=Gt.self.location.protocol.slice(0,-1)),i=!$i.test(a?a.toLowerCase():"")}t=i}if(t)Xn(e,"complete"),Xn(e,"success");else{e.m=6;try{var o=2<ra(e)?e.g.statusText:""}catch(s){o=""}e.j=o+" ["+e.da()+"]",Zi(e)}}finally{ta(e)}}}function ta(e,t){if(e.g){na(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||Xn(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function na(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Gt.clearTimeout(e.A),e.A=null)}function ra(e){return e.g?e.g.readyState:0}function ia(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Yi:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(fo){return null}}function aa(e){var t="";return Rn(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function oa(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=aa(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):fi(e,t,n))}function sa(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ua(e){this.Ga=0,this.j=[],this.l=new wr,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=sa("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=sa("baseRetryDelayMs",5e3,e),this.hb=sa("retryDelaySeedMs",1e4,e),this.eb=sa("forwardChannelMaxRetries",2,e),this.xa=sa("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Ci(e&&e.concurrentRequestLimit),this.Ja=new ji,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function ca(e){if(fa(e),3==e.H){var t=e.W++,n=si(e.I);if(fi(n,"SID",e.K),fi(n,"RID",t),fi(n,"TYPE","terminate"),pa(e,n),(t=new Br(e,e.l,t)).L=2,t.v=hi(si(n)),n=!1,Gt.navigator&&Gt.navigator.sendBeacon)try{n=Gt.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&Gt.Image&&((new Image).src=t.v,n=!0),n||(t.g=Sa(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Jr(t)}Ia(e)}function la(e){e.g&&(ya(e),e.g.cancel(),e.g=null)}function fa(e){la(e),e.u&&(Gt.clearTimeout(e.u),e.u=null),ba(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Gt.clearTimeout(e.m),e.m=null)}function ha(e){if(!Ai(e.i)&&!e.m){e.m=!0;var t=e.Na;sr||lr(),ur||(sr(),ur=!0),cr.add(t,e),e.C=0}}function da(e,t){var n;n=t?t.m:e.W++;var r=si(e.I);fi(r,"SID",e.K),fi(r,"RID",n),fi(r,"AID",e.V),pa(e,r),e.o&&e.s&&oa(r,e.o,e.s),n=new Br(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=va(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Di(e.i,n),Wr(n,r,t)}function pa(e,t){e.na&&Rn(e.na,(function(e,n){fi(t,n,e)})),e.h&&ii({},(function(e,n){fi(t,n,e)}))}function va(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Xt(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].g,l=i[u].map;if(0>(c-=a))a=Math.max(0,i[u].g-100),s=!1;else try{Ui(l,o,"req"+c+"_")}catch(As){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function ma(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;sr||lr(),ur||(sr(),ur=!0),cr.add(t,e),e.A=0}}function ga(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Rr(Xt(e.Ma,e),_a(e,e.A)),e.A++,!0)}function ya(e){null!=e.B&&(Gt.clearTimeout(e.B),e.B=null)}function ka(e){e.g=new Br(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=si(e.wa);fi(t,"RID","rpc"),fi(t,"SID",e.K),fi(t,"AID",e.V),fi(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&fi(t,"TO",e.qa),fi(t,"TYPE","xmlhttp"),pa(e,t),e.o&&e.s&&oa(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=hi(si(t)),n.s=null,n.S=!0,Qr(n,e)}function ba(e){null!=e.v&&(Gt.clearTimeout(e.v),e.v=null)}function wa(e,t){var n=null;if(e.g==t){ba(e),ya(e),e.g=null;var r=2}else{if(!Pi(e.i,t))return;n=t.F,Oi(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;Xn(r=Er(),new Ar(r,n)),ha(e)}else ma(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Ri(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Rr(Xt(e.Na,e,t),_a(e,e.C)),e.C++,!0))}(e,t)||2==r&&ga(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:xa(e,5);break;case 4:xa(e,10);break;case 3:xa(e,6);break;default:xa(e,2)}}function _a(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function xa(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Xt(e.pb,e);n||(n=new oi("//www.google.com/images/cleardot.gif"),Gt.location&&"http"==Gt.location.protocol||ui(n,"https"),hi(n)),function(e,t){var n=new wr;if(Gt.Image){var r=new Image;r.onload=Jt(Vi,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Jt(Vi,n,r,"TestLoadImage: error",!1,t),r.onabort=Jt(Vi,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Jt(Vi,n,r,"TestLoadImage: timeout",!1,t),Gt.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Nr(2);e.H=0,e.h&&e.h.za(t),Ia(e),fa(e)}function Ia(e){if(e.H=0,e.ma=[],e.h){var t=Li(e.i);0==t.length&&0==e.j.length||(rn(e.ma,t),rn(e.ma,e.j),e.i.i.length=0,nn(e.j),e.j.length=0),e.h.ya()}}function Ea(e,t,n){var r=n instanceof oi?si(n):new oi(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ci(r,r.m);else{var i=Gt.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new oi(null);r&&ui(a,r),t&&(a.g=t),i&&ci(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&fi(r,n,t),fi(r,"VER",e.ra),pa(e,r),r}function Sa(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Qi(new zi({ob:!0})):new Qi(e.va)).Oa(e.J),t}function Ta(){}function Ca(){if(pn&&!(10<=Number(In)))throw Error("Environmental error: no available transport.")}function Na(e,t){$n.call(this),this.g=new ua(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!sn(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!sn(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Pa(this)}function Aa(e){Ur.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Ra(){Vr.call(this),this.status=1}function Pa(e){this.g=e}function Da(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Oa(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function La(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(Vt=Qi.prototype).Oa=function(e){this.M=e},Vt.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Fr.g(),this.C=this.u?Lr(this.u):Lr(Fr),this.g.onreadystatechange=Xt(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void Ji(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=y(r.keys());try{for(o.s();!(a=o.n()).done;){var s=a.value;n.set(s,r.get(s))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Gt.FormData&&e instanceof Gt.FormData,!(0<=tn(Xi,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var u,l=y(n);try{for(l.s();!(u=l.n()).done;){var f=c(u.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(p){l.e(p)}finally{l.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{na(this),0<this.B&&((this.L=function(e){return pn&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Xt(this.ua,this)):this.A=pr(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Ji(this,s)}},Vt.ua=function(){"undefined"!=typeof qt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Xn(this,"timeout"),this.abort(8))},Vt.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Xn(this,"complete"),Xn(this,"abort"),ta(this))},Vt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ta(this,!0)),Qi.$.N.call(this)},Vt.La=function(){this.s||(this.G||this.v||this.l?ea(this):this.kb())},Vt.kb=function(){ea(this)},Vt.isActive=function(){return!!this.g},Vt.da=function(){try{return 2<ra(this)?this.g.status:-1}catch(Mi){return-1}},Vt.ja=function(){try{return this.g?this.g.responseText:""}catch(Mi){return""}},Vt.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Wi(t)}},Vt.Ia=function(){return this.m},Vt.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Vt=ua.prototype).ra=8,Vt.H=1,Vt.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new Br(this,this.l,e),n=this.s;if(this.U&&(n?On(n=Pn(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=va(this,t,r),fi(i=si(this.I),"RID",e),fi(i,"CVER",22),this.F&&fi(i,"X-HTTP-Session-Id",this.F),pa(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(aa(n)))+"&"+r:this.o&&oa(i,this.o,n)),Di(this.i,t),this.bb&&fi(i,"TYPE","init"),this.P?(fi(i,"$req",r),fi(i,"SID","null"),t.aa=!0,Wr(t,i,null)):Wr(t,i,r),this.H=2}}else 3==this.H&&(e?da(this,e):0==this.j.length||Ai(this.i)||da(this))},Vt.Ma=function(){if(this.u=null,ka(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Rr(Xt(this.jb,this),e)}},Vt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Nr(10),la(this),ka(this))},Vt.ib=function(){null!=this.v&&(this.v=null,la(this),ga(this),Nr(19))},Vt.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Nr(2)):(this.l.info("Failed to ping google.com"),Nr(1))},Vt.isActive=function(){return!!this.h&&this.h.isActive(this)},(Vt=Ta.prototype).Ba=function(){},Vt.Aa=function(){},Vt.za=function(){},Vt.ya=function(){},Vt.isActive=function(){return!0},Vt.Va=function(){},Ca.prototype.g=function(e,t){return new Na(e,t)},Zt(Na,$n),Na.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Nr(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Ea(e,null,e.Y),ha(e)},Na.prototype.close=function(){ca(this.g)},Na.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Zn(e),e=n);t.j.push(new Ti(t.fb++,e)),3==t.H&&ha(t)},Na.prototype.N=function(){this.g.h=null,delete this.j,ca(this.g),delete this.g,Na.$.N.call(this)},Zt(Aa,Ur),Zt(Ra,Vr),Zt(Pa,Ta),Pa.prototype.Ba=function(){Xn(this.g,"a")},Pa.prototype.Aa=function(e){Xn(this.g,new Aa(e))},Pa.prototype.za=function(e){Xn(this.g,new Ra)},Pa.prototype.ya=function(){Xn(this.g,"b")},Zt(Da,(function(){this.blockSize=-1})),Da.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Da.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)Oa(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){Oa(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){Oa(this,r),i=0;break}}this.h=i,this.i+=t},Da.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Ma={};function Fa(e){return-128<=e&&128>e?function(e,t){var n=Ma;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new La([0|e],0>e?-1:0)})):new La([0|e],0>e?-1:0)}function ja(e){if(isNaN(e)||!isFinite(e))return Va;if(0>e)return Ka(ja(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Ua;return new La(t,0)}var Ua=4294967296,Va=Fa(0),za=Fa(1),Ba=Fa(16777216);function qa(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Ga(e){return-1==e.h}function Ka(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new La(n,~e.h).add(za)}function Ha(e,t){return e.add(Ka(t))}function Wa(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Qa(e,t){this.g=e,this.h=t}function Ya(e,t){if(qa(t))throw Error("division by zero");if(qa(e))return new Qa(Va,Va);if(Ga(e))return t=Ya(Ka(e),t),new Qa(Ka(t.g),Ka(t.h));if(Ga(t))return t=Ya(e,Ka(t)),new Qa(Ka(t.g),t.h);if(30<e.g.length){if(Ga(e)||Ga(t))throw Error("slowDivide_ only works with positive integers.");for(var n=za,r=t;0>=r.X(e);)n=$a(n),r=$a(r);var i=Xa(n,1),a=Xa(r,1);for(r=Xa(r,2),n=Xa(n,2);!qa(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=Xa(r,1),n=Xa(n,1)}return t=Ha(e,i.R(t)),new Qa(i,t)}for(i=Va;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=ja(n)).R(t);Ga(o)||0<o.X(e);)o=(a=ja(n-=r)).R(t);qa(a)&&(a=za),i=i.add(a),e=Ha(e,o)}return new Qa(i,e)}function $a(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new La(n,e.h)}function Xa(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new La(i,e.h)}(Vt=La.prototype).ea=function(){if(Ga(this))return-Ka(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Ua+r)*t,t*=Ua}return e},Vt.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(qa(this))return"0";if(Ga(this))return"-"+Ka(this).toString(e);for(var t=ja(Math.pow(e,6)),n=this,r="";;){var i=Ya(n,t).g,a=((0<(n=Ha(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(qa(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Vt.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Vt.X=function(e){return Ga(e=Ha(this,e))?-1:qa(e)?0:1},Vt.abs=function(){return Ga(this)?Ka(this):this},Vt.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new La(n,-2147483648&n[n.length-1]?-1:0)},Vt.R=function(e){if(qa(this)||qa(e))return Va;if(Ga(this))return Ga(e)?Ka(this).R(Ka(e)):Ka(Ka(this).R(e));if(Ga(e))return Ka(this.R(Ka(e)));if(0>this.X(Ba)&&0>e.X(Ba))return ja(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),s=e.D(i)>>>16,u=65535&e.D(i);n[2*r+2*i]+=o*u,Wa(n,2*r+2*i),n[2*r+2*i+1]+=a*u,Wa(n,2*r+2*i+1),n[2*r+2*i+1]+=o*s,Wa(n,2*r+2*i+1),n[2*r+2*i+2]+=a*s,Wa(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new La(n,0)},Vt.gb=function(e){return Ya(this,e).h},Vt.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new La(n,this.h&e.h)},Vt.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new La(n,this.h|e.h)},Vt.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new La(n,this.h^e.h)},Ca.prototype.createWebChannel=Ca.prototype.g,Na.prototype.send=Na.prototype.u,Na.prototype.open=Na.prototype.m,Na.prototype.close=Na.prototype.close,Pr.NO_ERROR=0,Pr.TIMEOUT=8,Pr.HTTP_ERROR=6,Dr.COMPLETE="complete",Mr.EventType=jr,jr.OPEN="a",jr.CLOSE="b",jr.ERROR="c",jr.MESSAGE="d",$n.prototype.listen=$n.prototype.O,Qi.prototype.listenOnce=Qi.prototype.P,Qi.prototype.getLastError=Qi.prototype.Sa,Qi.prototype.getLastErrorCode=Qi.prototype.Ia,Qi.prototype.getStatus=Qi.prototype.da,Qi.prototype.getResponseJson=Qi.prototype.Wa,Qi.prototype.getResponseText=Qi.prototype.ja,Qi.prototype.send=Qi.prototype.ha,Qi.prototype.setWithCredentials=Qi.prototype.Oa,Da.prototype.digest=Da.prototype.l,Da.prototype.reset=Da.prototype.reset,Da.prototype.update=Da.prototype.j,La.prototype.add=La.prototype.add,La.prototype.multiply=La.prototype.R,La.prototype.modulo=La.prototype.gb,La.prototype.compare=La.prototype.X,La.prototype.toNumber=La.prototype.ea,La.prototype.toString=La.prototype.toString,La.prototype.getBits=La.prototype.D,La.fromNumber=ja,La.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Ka(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=ja(Math.pow(n,8)),i=Va,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),s=parseInt(t.substring(a,a+o),n);8>o?(o=ja(Math.pow(n,o)),i=i.R(o).add(ja(s))):i=(i=i.R(r)).add(ja(s))}return i};var Ja=Bt.createWebChannelTransport=function(){return new Ca},Za=Bt.getStatEventTarget=function(){return Er()},eo=Bt.ErrorCode=Pr,to=Bt.EventType=Dr,no=Bt.Event=xr,ro=Bt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},io=Bt.FetchXmlHttpFactory=zi,ao=Bt.WebChannel=Mr,oo=Bt.XhrIo=Qi,so=Bt.Md5=Da,uo=Bt.Integer=La,co="@firebase/firestore",lo=function(){function e(t){v(this,e),this.uid=t}return g(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();lo.UNAUTHENTICATED=new lo(null),lo.GOOGLE_CREDENTIALS=new lo("google-credentials-uid"),lo.FIRST_PARTY=new lo("first-party-uid"),lo.MOCK_USER=new lo("mock-user");var fo="10.0.0",ho=new we("@firebase/firestore");function po(){return ho.logLevel}function vo(e){if(ho.logLevel<=pe.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(yo);ho.debug.apply(ho,["Firestore (".concat(fo,"): ").concat(e)].concat(oe(i)))}}function mo(e){if(ho.logLevel<=pe.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(yo);ho.error.apply(ho,["Firestore (".concat(fo,"): ").concat(e)].concat(oe(i)))}}function go(e){if(ho.logLevel<=pe.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(yo);ho.warn.apply(ho,["Firestore (".concat(fo,"): ").concat(e)].concat(oe(i)))}}function yo(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function ko(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(fo,") INTERNAL ASSERTION FAILED: ")+e;throw mo(t),new Error(t)}function bo(e,t){e||ko()}function wo(e,t){return e}var _o={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},xo=function(e){w(n,e);var t=I(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return g(n)}(G),Io=g((function e(){var t=this;v(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Eo=g((function e(t,n){v(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),So=function(){function e(){v(this,e)}return g(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(lo.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),To=function(){function e(t){v(this,e),this.token=t,this.changeListener=null}return g(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Co=function(){function e(t){v(this,e),this.t=t,this.currentUser=lo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return g(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Io;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Io,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(ue(ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){vo("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(vo("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Io)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(vo("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(bo("string"==typeof n.accessToken),new Eo(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return bo(null===e||"string"==typeof e),new lo(e)}}]),e}(),No=function(){function e(t,n,r){v(this,e),this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=lo.FIRST_PARTY,this.I=new Map}return g(e,[{key:"T",value:function(){return this.P?this.P():null}},{key:"headers",get:function(){this.I.set("X-Goog-AuthUser",this.l);var e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}]),e}(),Ao=function(){function e(t,n,r){v(this,e),this.l=t,this.h=n,this.P=r}return g(e,[{key:"getToken",value:function(){return Promise.resolve(new No(this.l,this.h,this.P))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(lo.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Ro=g((function e(t){v(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Po=function(){function e(t){v(this,e),this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}return g(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&vo("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.R;return n.R=e.token,vo("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){vo("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.A.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.A.getImmediate({optional:!0});e?i(e):vo("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(bo("string"==typeof t.token),e.R=t.token,new Ro(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Do(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Oo=function(){function e(){v(this,e)}return g(e,null,[{key:"V",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=Do(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function Lo(e,t){return e<t?-1:e>t?1:0}function Mo(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Fo(e){return e+"\0"}var jo=function(){function e(t,n){if(v(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new xo(_o.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new xo(_o.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new xo(_o.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new xo(_o.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return g(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Lo(this.nanoseconds,e.nanoseconds):Lo(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Uo=function(){function e(t){v(this,e),this.timestamp=t}return g(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new jo(0,0))}},{key:"max",value:function(){return new e(new jo(253402300799,999999999))}}]),e}(),Vo=function(){function e(t,n,r){v(this,e),void 0===n?n=0:n>t.length&&ko(),void 0===r?r=t.length-n:r>t.length-n&&ko(),this.segments=t,this.offset=n,this.len=r}return g(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),zo=function(e){w(n,e);var t=I(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new xo(_o.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,oe(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Vo),Bo=/^[_a-zA-Z][_a-zA-Z0-9]*$/,qo=function(e){w(n,e);var t=I(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Bo.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new xo(_o.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new xo(_o.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new xo(_o.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new xo(_o.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Vo),Go=function(){function e(t){v(this,e),this.path=t}return g(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===zo.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(zo.fromString(t))}},{key:"fromName",value:function(t){return new e(zo.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(zo.emptyPath())}},{key:"comparator",value:function(e,t){return zo.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new zo(t.slice()))}}]),e}(),Ko=g((function e(t,n,r,i){v(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Ho(e){return e.fields.find((function(e){return 2===e.kind}))}function Wo(e){return e.fields.filter((function(e){return 2!==e.kind}))}Ko.UNKNOWN_ID=-1;var Qo=g((function e(t,n){v(this,e),this.fieldPath=t,this.kind=n}));var Yo=function(){function e(t,n){v(this,e),this.sequenceNumber=t,this.offset=n}return g(e,null,[{key:"empty",value:function(){return new e(0,Jo.min())}}]),e}();function $o(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Uo.fromTimestamp(1e9===r?new jo(n+1,0):new jo(n,r));return new Jo(i,Go.empty(),t)}function Xo(e){return new Jo(e.readTime,e.key,-1)}var Jo=function(){function e(t,n,r){v(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return g(e,null,[{key:"min",value:function(){return new e(Uo.min(),Go.empty(),-1)}},{key:"max",value:function(){return new e(Uo.max(),Go.empty(),-1)}}]),e}();function Zo(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Go.comparator(e.documentKey,t.documentKey))?n:Lo(e.largestBatchId,t.largestBatchId)}var es="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ts=function(){function e(){v(this,e),this.onCommittedListeners=[]}return g(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function ns(e){return rs.apply(this,arguments)}function rs(){return(rs=ue(ie().mark((function e(t){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===_o.FAILED_PRECONDITION&&t.message===es){e.next=2;break}throw t;case 2:vo("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var is=function(){function e(t){var n=this;v(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return g(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&ko(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=y(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,s=function(){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},u=0;u<i;u++)s()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),as=function(){function e(t,n){var r=this;v(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.m=new Io,this.transaction.oncomplete=function(){r.m.resolve()},this.transaction.onabort=function(){n.error?r.m.reject(new us(t,n.error)):r.m.resolve()},this.transaction.onerror=function(e){var n=ds(e.target.error);r.m.reject(new us(t,n))}}return g(e,[{key:"g",get:function(){return this.m.promise}},{key:"abort",value:function(e){e&&this.m.reject(e),this.aborted||(vo("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"p",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new ls(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new us(n,t)}}}]),e}(),os=function(){function e(t,n,r){v(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(j())&&mo("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return g(e,[{key:"N",value:function(){var e=ue(ie().mark((function e(t){var n=this;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return vo("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new us(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new xo(_o.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new xo(_o.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new us(t,n))},i.onupgradeneeded=function(e){vo("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.B(t,i.transaction,e.oldVersion,n.version).next((function(){vo("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.L&&(this.db.onversionchange=function(e){return n.L(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"k",value:function(e){this.L=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=ue(ie().mark((function e(t,n,r,i){var a,o,s,u,c=this;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,s=ie().mark((function e(){var n,s,u,l;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.N(t);case 4:return c.db=e.sent,n=as.open(c.db,t,a?"readonly":"readwrite",r),s=i(n).next((function(e){return n.p(),e})).catch((function(e){return n.abort(e),is.reject(e)})).toPromise(),s.catch((function(){})),e.next=9,n.g;case 9:return e.t0=s,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),u=e.t1,l="FirebaseError"!==u.name&&o<3,vo("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(u)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(s(),"t0",4);case 4:if("object"!==typeof(u=e.t0)){e.next=7;break}return e.abrupt("return",u.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return vo("SimpleDb","Removing database:",e),fs(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"v",value:function(){if(!q())return!1;if(e.C())return!0;var t=j(),n=e.D(t),r=0<n&&n<10,i=e.F(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.M)}},{key:"O",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"F",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),ss=function(){function e(t){v(this,e),this.q=t,this.K=!1,this.$=null}return g(e,[{key:"isDone",get:function(){return this.K}},{key:"U",get:function(){return this.$}},{key:"cursor",set:function(e){this.q=e}},{key:"done",value:function(){this.K=!0}},{key:"W",value:function(e){this.$=e}},{key:"delete",value:function(){return fs(this.q.delete())}}]),e}(),us=function(e){w(n,e);var t=I(n);function n(e,r){var i;return v(this,n),(i=t.call(this,_o.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return g(n)}(xo);function cs(e){return"IndexedDbTransactionError"===e.name}var ls=function(){function e(t){v(this,e),this.store=t}return g(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(vo("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(vo("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),fs(n)}},{key:"add",value:function(e){return vo("SimpleDb","ADD",this.store.name,e,e),fs(this.store.add(e))}},{key:"get",value:function(e){var t=this;return fs(this.store.get(e)).next((function(n){return void 0===n&&(n=null),vo("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return vo("SimpleDb","DELETE",this.store.name,e),fs(this.store.delete(e))}},{key:"count",value:function(){return vo("SimpleDb","COUNT",this.store.name),fs(this.store.count())}},{key:"G",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.j(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new is((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new is((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){vo("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.j(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.j(r,t)}},{key:"X",value:function(e){var t=this.cursor({});return new is((function(n,r){t.onerror=function(e){var t=ds(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"j",value:function(e,t){var n=[];return new is((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new ss(i),o=t(i.primaryKey,i.value,a);if(o instanceof is){var s=o.catch((function(e){return a.done(),is.reject(e)}));n.push(s)}a.isDone?r():null===a.U?i.continue():i.continue(a.U)}else r()}})).next((function(){return is.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function fs(e){return new is((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=ds(e.target.error);n(t)}}))}var hs=!1;function ds(e){var t=os.D(j());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new xo("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return hs||(hs=!0,setTimeout((function(){throw r}),0)),r}}return e}var ps=function(){function e(t,n){v(this,e),this.asyncQueue=t,this.ee=n,this.task=null}return g(e,[{key:"start",value:function(){this.te(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"te",value:function(e){var t=this;vo("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,ue(ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=vo,e.t1="Documents written: ",e.next=6,t.ee.ne();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!cs(e.t4)){e.next=17;break}vo("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,ns(e.t4);case 19:return e.next=21,t.te(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),vs=function(){function e(t,n){v(this,e),this.localStore=t,this.persistence=n}return g(e,[{key:"ne",value:function(){var e=ue(ie().mark((function e(){var t,n=this,r=arguments;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.re(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"re",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return is.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return vo("IndexBackiller","Processing collection: ".concat(t)),n.ie(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"ie",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.se(i,n)})).next((function(n){return vo("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"se",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Xo(t);Zo(r,n)>0&&(n=r)})),new Jo(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),ms=function(){function e(t,n){var r=this;v(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.oe(e)},this._e=function(e){return n.writeSequenceNumber(e)})}return g(e,[{key:"oe",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this._e&&this._e(e),e}}]),e}();function gs(e){return null==e}function ys(e){return 0===e&&1/e==-1/0}function ks(e){return"number"==typeof e&&Number.isInteger(e)&&!ys(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function bs(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=_s(t)),t=ws(e.get(n),t);return _s(t)}function ws(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function _s(e){return e+"\x01\x01"}function xs(e){var t=e.length;if(bo(t>=2),2===t)return bo("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),zo.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&ko(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:ko()}a=o+2}return new zo(r)}ms.ae=-1;var Is=["userId","batchId"];function Es(e,t){return[e,bs(t)]}function Ss(e,t,n){return[e,bs(t),n]}var Ts={},Cs=["prefixPath","collectionGroup","readTime","documentId"],Ns=["prefixPath","collectionGroup","documentId"],As=["collectionGroup","readTime","prefixPath","documentId"],Rs=["canonicalId","targetId"],Ps=["targetId","path"],Ds=["path","targetId"],Os=["collectionId","parent"],Ls=["indexId","uid"],Ms=["uid","sequenceNumber"],Fs=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],js=["indexId","uid","orderedDocumentKey"],Us=["userId","collectionPath","documentId"],Vs=["userId","collectionPath","largestBatchId"],zs=["userId","collectionGroup","largestBatchId"],Bs=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),qs=[].concat(oe(Bs),["documentOverlays"]),Gs=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ks=Gs,Hs=[].concat(Ks,["indexConfiguration","indexState","indexEntries"]),Ws=function(e){w(n,e);var t=I(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).ue=e,i.currentSequenceNumber=r,i}return g(n)}(ts);function Qs(e,t){var n=wo(e);return os.O(n.ue,t)}function Ys(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function $s(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Xs(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Js=function(){function e(t,n){v(this,e),this.comparator=t,this.root=n||eu.EMPTY}return g(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,eu.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,eu.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Zs(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Zs(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Zs(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Zs(this.root,e,this.comparator,!0)}}]),e}(),Zs=function(){function e(t,n,r,i){v(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return g(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),eu=function(){function e(t,n,r,i,a){v(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return g(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw ko();if(this.right.isRed())throw ko();var e=this.left.check();if(e!==this.right.check())throw ko();return e+(this.isRed()?0:1)}}]),e}();eu.EMPTY=null,eu.RED=!0,eu.BLACK=!1,eu.EMPTY=new(function(){function e(){v(this,e),this.size=0}return g(e,[{key:"key",get:function(){throw ko()}},{key:"value",get:function(){throw ko()}},{key:"color",get:function(){throw ko()}},{key:"left",get:function(){throw ko()}},{key:"right",get:function(){throw ko()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new eu(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var tu=function(){function e(t){v(this,e),this.comparator=t,this.data=new Js(this.comparator)}return g(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new nu(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new nu(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),nu=function(){function e(t){v(this,e),this.iter=t}return g(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function ru(e){return e.hasNext()?e.getNext():void 0}var iu=function(){function e(t){v(this,e),this.fields=t,t.sort(qo.comparator)}return g(e,[{key:"unionWith",value:function(t){var n,r=new tu(qo.comparator),i=y(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,s=y(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.add(u)}}catch(c){s.e(c)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=y(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Mo(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),au=function(e){w(n,e);var t=I(n);function n(){var e;return v(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return g(n)}(S(Error));var ou=function(e){function t(e){v(this,t),this.binaryString=e}return g(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Lo(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new au("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();ou.EMPTY_BYTE_STRING=new ou("");var su=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uu(e){if(bo(!!e),"string"==typeof e){var t=0,n=su.exec(e);if(bo(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:cu(e.seconds),nanos:cu(e.nanos)}}function cu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function lu(e){return"string"==typeof e?ou.fromBase64String(e):ou.fromUint8Array(e)}function fu(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function hu(e){var t=e.mapValue.fields.__previous_value__;return fu(t)?hu(t):t}function du(e){var t=uu(e.mapValue.fields.__local_write_time__.timestampValue);return new jo(t.seconds,t.nanos)}var pu=g((function e(t,n,r,i,a,o,s,u,c){v(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=u,this.useFetchStreams=c})),vu=function(){function e(t,n){v(this,e),this.projectId=t,this.database=n||"(default)"}return g(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),mu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},gu={nullValue:"NULL_VALUE"};function yu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?fu(e)?4:Pu(e)?9007199254740991:10:ko()}function ku(e,t){if(e===t)return!0;var n=yu(e);if(n!==yu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return du(e).isEqual(du(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=uu(e.timestampValue),r=uu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return lu(e.bytesValue).isEqual(lu(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return cu(e.geoPointValue.latitude)===cu(t.geoPointValue.latitude)&&cu(e.geoPointValue.longitude)===cu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return cu(e.integerValue)===cu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=cu(e.doubleValue),r=cu(t.doubleValue);return n===r?ys(n)===ys(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Mo(e.arrayValue.values||[],t.arrayValue.values||[],ku);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ys(n)!==Ys(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ku(n[i],r[i])))return!1;return!0}(e,t);default:return ko()}}function bu(e,t){return void 0!==(e.values||[]).find((function(e){return ku(e,t)}))}function wu(e,t){if(e===t)return 0;var n=yu(e),r=yu(t);if(n!==r)return Lo(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Lo(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=cu(e.integerValue||e.doubleValue),r=cu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return _u(e.timestampValue,t.timestampValue);case 4:return _u(du(e),du(t));case 5:return Lo(e.stringValue,t.stringValue);case 6:return function(e,t){var n=lu(e),r=lu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Lo(n[i],r[i]);if(0!==a)return a}return Lo(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Lo(cu(e.latitude),cu(t.latitude));return 0!==n?n:Lo(cu(e.longitude),cu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=wu(n[i],r[i]);if(a)return a}return Lo(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===mu.mapValue&&t===mu.mapValue)return 0;if(e===mu.mapValue)return 1;if(t===mu.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=Lo(r[o],a[o]);if(0!==s)return s;var u=wu(n[r[o]],i[a[o]]);if(0!==u)return u}return Lo(r.length,a.length)}(e.mapValue,t.mapValue);default:throw ko()}}function _u(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Lo(e,t);var n=uu(e),r=uu(t),i=Lo(n.seconds,r.seconds);return 0!==i?i:Lo(n.nanos,r.nanos)}function xu(e){return Iu(e)}function Iu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=uu(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return lu(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Go.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){var t,n="[",r=!0,i=y(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Iu(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=y(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Iu(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):ko()}function Eu(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Su(e){return!!e&&"integerValue"in e}function Tu(e){return!!e&&"arrayValue"in e}function Cu(e){return!!e&&"nullValue"in e}function Nu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Au(e){return!!e&&"mapValue"in e}function Ru(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return $s(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Ru(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Ru(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Pu(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Du(e){return"nullValue"in e?gu:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Eu(vu.empty(),Go.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:ko()}function Ou(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Eu(vu.empty(),Go.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?mu:ko()}function Lu(e,t){var n=wu(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Mu(e,t){var n=wu(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Fu=function(){function e(t){v(this,e),this.value=t}return g(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Au(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ru(t)}},{key:"setAll",value:function(e){var t=this,n=qo.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Ru(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Au(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return ku(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Au(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){$s(t,(function(t,n){return e[t]=n}));var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Ru(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function ju(e){var t=[];return $s(e.fields,(function(e,n){var r=new qo([e]);if(Au(n)){var i=ju(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=y(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new iu(t)}var Uu=function(){function e(t,n,r,i,a,o,s){v(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}return g(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Uo.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Fu.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Fu.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Uo.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Uo.min(),Uo.min(),Uo.min(),Fu.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Uo.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Uo.min(),Uo.min(),Fu.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Uo.min(),Uo.min(),Fu.empty(),2)}}]),e}(),Vu=g((function e(t,n){v(this,e),this.position=t,this.inclusive=n}));function zu(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Go.comparator(Go.fromName(o.referenceValue),n.key):wu(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Bu(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!ku(e.position[n],t.position[n]))return!1;return!0}var qu=g((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";v(this,e),this.field=t,this.dir=n}));function Gu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Ku=g((function e(){v(this,e)})),Hu=function(e){w(n,e);var t=I(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return g(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(wu(t,this.value)):null!==t&&yu(this.value)===yu(t)&&this.matchesComparison(wu(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ko()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new nc(e,t,r):"array-contains"===t?new oc(e,r):"in"===t?new sc(e,r):"not-in"===t?new uc(e,r):"array-contains-any"===t?new cc(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new rc(e,n):new ic(e,n)}}]),n}(Ku),Wu=function(e){w(n,e);var t=I(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).filters=e,i.op=r,i.ce=null,i}return g(n,[{key:"matches",value:function(e){return Qu(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ce||(this.ce=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ce}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.le((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"le",value:function(e){var t,n=y(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Ku);function Qu(e){return"and"===e.op}function Yu(e){return"or"===e.op}function $u(e){return Xu(e)&&Qu(e)}function Xu(e){var t,n=y(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Wu)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Ju(e){if(e instanceof Hu)return e.field.canonicalString()+e.op.toString()+xu(e.value);if($u(e))return e.filters.map((function(e){return Ju(e)})).join(",");var t=e.filters.map((function(e){return Ju(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Zu(e,t){return e instanceof Hu?function(e,t){return t instanceof Hu&&e.op===t.op&&e.field.isEqual(t.field)&&ku(e.value,t.value)}(e,t):e instanceof Wu?function(e,t){return t instanceof Wu&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Zu(n,t.filters[r])}),!0)}(e,t):void ko()}function ec(e,t){var n=e.filters.concat(t);return Wu.create(n,e.op)}function tc(e){return e instanceof Hu?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(xu(e.value))}(e):e instanceof Wu?function(e){return e.op.toString()+" {"+e.getFilters().map(tc).join(" ,")+"}"}(e):"Filter"}var nc=function(e){w(n,e);var t=I(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,e,r,i)).key=Go.fromName(i.referenceValue),a}return g(n,[{key:"matches",value:function(e){var t=Go.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Hu),rc=function(e){w(n,e);var t=I(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,"in",r)).keys=ac("in",r),i}return g(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Hu),ic=function(e){w(n,e);var t=I(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,"not-in",r)).keys=ac("not-in",r),i}return g(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Hu);function ac(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Go.fromName(e.referenceValue)}))}var oc=function(e){w(n,e);var t=I(n);function n(e,r){return v(this,n),t.call(this,e,"array-contains",r)}return g(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Tu(t)&&bu(t.arrayValue,this.value)}}]),n}(Hu),sc=function(e){w(n,e);var t=I(n);function n(e,r){return v(this,n),t.call(this,e,"in",r)}return g(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&bu(this.value.arrayValue,t)}}]),n}(Hu),uc=function(e){w(n,e);var t=I(n);function n(e,r){return v(this,n),t.call(this,e,"not-in",r)}return g(n,[{key:"matches",value:function(e){if(bu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!bu(this.value.arrayValue,t)}}]),n}(Hu),cc=function(e){w(n,e);var t=I(n);function n(e,r){return v(this,n),t.call(this,e,"array-contains-any",r)}return g(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Tu(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return bu(t.value.arrayValue,e)}))}}]),n}(Hu),lc=g((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;v(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.he=null}));function fc(e){return new lc(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function hc(e){var t=wo(e);if(null===t.he){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Ju(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),gs(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return xu(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return xu(e)})).join(",")),t.he=n}return t.he}function dc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Gu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Zu(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Bu(e.startAt,t.startAt)&&Bu(e.endAt,t.endAt)}function pc(e){return Go.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function vc(e,t){return e.filters.filter((function(e){return e instanceof Hu&&e.field.isEqual(t)}))}function mc(e,t,n){var r,i=gu,a=!0,o=y(vc(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=gu,c=!0;switch(s.op){case"<":case"<=":u=Du(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,c=!1;break;case"!=":case"not-in":u=gu}Lu({value:i,inclusive:a},{value:u,inclusive:c})<0&&(i=u,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Lu({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function gc(e,t,n){var r,i=mu,a=!0,o=y(vc(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=mu,c=!0;switch(s.op){case">=":case">":u=Ou(s.value),c=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,c=!1;break;case"!=":case"not-in":u=mu}Mu({value:i,inclusive:a},{value:u,inclusive:c})>0&&(i=u,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Mu({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var yc=g((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;v(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.Pe=null,this.Ie=null,this.startAt,this.endAt}));function kc(e,t,n,r,i,a,o,s){return new yc(e,t,n,r,i,a,o,s)}function bc(e){return new yc(e)}function wc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function _c(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function xc(e){var t,n=y(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function Ic(e){return null!==e.collectionGroup}function Ec(e){var t=wo(e);if(null===t.Pe){t.Pe=[];var n=xc(t),r=_c(t);if(null!==n&&null===r)n.isKeyField()||t.Pe.push(new qu(n)),t.Pe.push(new qu(qo.keyField(),"asc"));else{var i,a=!1,o=y(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.Pe.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.Pe.push(new qu(qo.keyField(),u))}}}return t.Pe}function Sc(e){var t=wo(e);if(!t.Ie)if("F"===t.limitType)t.Ie=fc(t.path,t.collectionGroup,Ec(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=y(Ec(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new qu(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new Vu(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new Vu(t.startAt.position,t.startAt.inclusive):null;t.Ie=fc(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.Ie}function Tc(e,t){t.getFirstInequalityField(),xc(e);var n=e.filters.concat([t]);return new yc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Cc(e,t,n){return new yc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Nc(e,t){return dc(Sc(e),Sc(t))&&e.limitType===t.limitType}function Ac(e){return"".concat(hc(Sc(e)),"|lt:").concat(e.limitType)}function Rc(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return tc(e)})).join(", "),"]")),gs(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return xu(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return xu(e)})).join(",")),"Target(".concat(t,")")}(Sc(e)),"; limitType=").concat(e.limitType,")")}function Pc(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Go.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=y(Ec(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=y(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=zu(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ec(e),t))&&!(e.endAt&&!function(e,t,n){var r=zu(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ec(e),t))}(e,t)}function Dc(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Oc(e){return function(t,n){var r,i=!1,a=y(Ec(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=Lc(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function Lc(e,t,n){var r=e.field.isKeyField()?Go.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?wu(r,i):ko()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ko()}}var Mc=function(){function e(t,n){v(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return g(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(u){i.e(u)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){$s(this.inner,(function(t,n){var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(u){i.e(u)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Xs(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Fc=new Js(Go.comparator);function jc(){return Fc}var Uc=new Js(Go.comparator);function Vc(){for(var e=Uc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function zc(e){var t=Uc;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Bc(){return Gc()}function qc(){return Gc()}function Gc(){return new Mc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Kc=new Js(Go.comparator),Hc=new tu(Go.comparator);function Wc(){for(var e=Hc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Qc=new tu(Lo);function Yc(){return Qc}function $c(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ys(t)?"-0":t}}function Xc(e){return{integerValue:""+e}}function Jc(e,t){return ks(t)?Xc(t):$c(e,t)}var Zc=g((function e(){v(this,e),this._=void 0}));function el(e,t,n){return e instanceof rl?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&fu(t)&&(t=hu(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof il?al(e,t):e instanceof ol?sl(e,t):function(e,t){var n=nl(e,t),r=cl(n)+cl(e.Te);return Su(n)&&Su(e.Te)?Xc(r):$c(e.serializer,r)}(e,t)}function tl(e,t,n){return e instanceof il?al(e,t):e instanceof ol?sl(e,t):n}function nl(e,t){return e instanceof ul?function(e){return Su(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}var rl=function(e){w(n,e);var t=I(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n)}(Zc),il=function(e){w(n,e);var t=I(n);function n(e){var r;return v(this,n),(r=t.call(this)).elements=e,r}return g(n)}(Zc);function al(e,t){var n,r=ll(t),i=y(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return ku(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var ol=function(e){w(n,e);var t=I(n);function n(e){var r;return v(this,n),(r=t.call(this)).elements=e,r}return g(n)}(Zc);function sl(e,t){var n,r=ll(t),i=y(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!ku(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var ul=function(e){w(n,e);var t=I(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).serializer=e,i.Te=r,i}return g(n)}(Zc);function cl(e){return cu(e.integerValue||e.doubleValue)}function ll(e){return Tu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var fl=g((function e(t,n){v(this,e),this.field=t,this.transform=n}));var hl=g((function e(t,n){v(this,e),this.version=t,this.transformResults=n})),dl=function(){function e(t,n){v(this,e),this.updateTime=t,this.exists=n}return g(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function pl(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var vl=g((function e(){v(this,e)}));function ml(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Cl(e.key,dl.none()):new wl(e.key,e.data,dl.none());var n,r=e.data,i=Fu.empty(),a=new tu(qo.comparator),o=y(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?i.delete(s):i.set(s,u),a=a.add(s)}}}catch(c){o.e(c)}finally{o.f()}return new _l(e.key,i,new iu(a.toArray()),dl.none())}function gl(e,t,n){e instanceof wl?function(e,t,n){var r=e.value.clone(),i=Il(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof _l?function(e,t,n){if(pl(e.precondition,t)){var r=Il(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(xl(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function yl(e,t,n,r){return e instanceof wl?function(e,t,n,r){if(!pl(e.precondition,t))return n;var i=e.value.clone(),a=El(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof _l?function(e,t,n,r){if(!pl(e.precondition,t))return n;var i=El(e.fieldTransforms,r,t),a=t.data;return a.setAll(xl(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return pl(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function kl(e,t){var n,r=null,i=y(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=nl(a.transform,o||null);null!=s&&(null===r&&(r=Fu.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function bl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Mo(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof il&&t instanceof il||e instanceof ol&&t instanceof ol?Mo(e.elements,t.elements,ku):e instanceof ul&&t instanceof ul?ku(e.Te,t.Te):e instanceof rl&&t instanceof rl}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var wl=function(e){w(n,e);var t=I(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return v(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return g(n,[{key:"getFieldMask",value:function(){return null}}]),n}(vl),_l=function(e){w(n,e);var t=I(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return v(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return g(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(vl);function xl(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Il(e,t,n){var r=new Map;bo(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,tl(o,s,n[i]))}return r}function El(e,t,n){var r,i=new Map,a=y(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,el(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Sl,Tl,Cl=function(e){w(n,e);var t=I(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return g(n,[{key:"getFieldMask",value:function(){return null}}]),n}(vl),Nl=function(e){w(n,e);var t=I(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return g(n,[{key:"getFieldMask",value:function(){return null}}]),n}(vl),Al=function(){function e(t,n,r,i){v(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return g(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&gl(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=y(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=yl(i,e,t,this.localWriteTime))}}catch(u){r.e(u)}finally{r.f()}var a,o=y(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(e.key)&&(t=yl(s,e,t,this.localWriteTime))}}catch(u){o.e(u)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=qc();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=ml(o,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Uo.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Wc())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Mo(this.mutations,e.mutations,(function(e,t){return bl(e,t)}))&&Mo(this.baseMutations,e.baseMutations,(function(e,t){return bl(e,t)}))}}]),e}(),Rl=function(){function e(t,n,r,i){v(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return g(e,null,[{key:"from",value:function(t,n,r){bo(t.mutations.length===r.length);for(var i=Kc,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Pl=function(){function e(t,n){v(this,e),this.largestBatchId=t,this.mutation=n}return g(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Dl=g((function e(t,n){v(this,e),this.count=t,this.unchangedNames=n}));function Ol(e){switch(e){default:return ko();case _o.CANCELLED:case _o.UNKNOWN:case _o.DEADLINE_EXCEEDED:case _o.RESOURCE_EXHAUSTED:case _o.INTERNAL:case _o.UNAVAILABLE:case _o.UNAUTHENTICATED:return!1;case _o.INVALID_ARGUMENT:case _o.NOT_FOUND:case _o.ALREADY_EXISTS:case _o.PERMISSION_DENIED:case _o.FAILED_PRECONDITION:case _o.ABORTED:case _o.OUT_OF_RANGE:case _o.UNIMPLEMENTED:case _o.DATA_LOSS:return!0}}function Ll(e){if(void 0===e)return mo("GRPC error has no .code"),_o.UNKNOWN;switch(e){case Sl.OK:return _o.OK;case Sl.CANCELLED:return _o.CANCELLED;case Sl.UNKNOWN:return _o.UNKNOWN;case Sl.DEADLINE_EXCEEDED:return _o.DEADLINE_EXCEEDED;case Sl.RESOURCE_EXHAUSTED:return _o.RESOURCE_EXHAUSTED;case Sl.INTERNAL:return _o.INTERNAL;case Sl.UNAVAILABLE:return _o.UNAVAILABLE;case Sl.UNAUTHENTICATED:return _o.UNAUTHENTICATED;case Sl.INVALID_ARGUMENT:return _o.INVALID_ARGUMENT;case Sl.NOT_FOUND:return _o.NOT_FOUND;case Sl.ALREADY_EXISTS:return _o.ALREADY_EXISTS;case Sl.PERMISSION_DENIED:return _o.PERMISSION_DENIED;case Sl.FAILED_PRECONDITION:return _o.FAILED_PRECONDITION;case Sl.ABORTED:return _o.ABORTED;case Sl.OUT_OF_RANGE:return _o.OUT_OF_RANGE;case Sl.UNIMPLEMENTED:return _o.UNIMPLEMENTED;case Sl.DATA_LOSS:return _o.DATA_LOSS;default:return ko()}}(Tl=Sl||(Sl={}))[Tl.OK=0]="OK",Tl[Tl.CANCELLED=1]="CANCELLED",Tl[Tl.UNKNOWN=2]="UNKNOWN",Tl[Tl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tl[Tl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tl[Tl.NOT_FOUND=5]="NOT_FOUND",Tl[Tl.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tl[Tl.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tl[Tl.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tl[Tl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tl[Tl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tl[Tl.ABORTED=10]="ABORTED",Tl[Tl.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tl[Tl.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tl[Tl.INTERNAL=13]="INTERNAL",Tl[Tl.UNAVAILABLE=14]="UNAVAILABLE",Tl[Tl.DATA_LOSS=15]="DATA_LOSS";var Ml=function(){function e(){v(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return g(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return Fl}},{key:"getOrCreateInstance",value:function(){return null===Fl&&(Fl=new e),Fl}}]),e}(),Fl=null;function jl(){return new TextEncoder}var Ul=new uo([4294967295,4294967295],0);function Vl(e){var t=jl().encode(e),n=new so;return n.update(t),new Uint8Array(n.digest())}function zl(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new uo([n,r],0),new uo([i,a],0)]}var Bl=function(){function e(t,n,r){if(v(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ql("Invalid padding: ".concat(n));if(r<0)throw new ql("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new ql("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new ql("Invalid padding when bitmap length is 0: ".concat(n));this.de=8*t.length-n,this.Ae=uo.fromNumber(this.de)}return g(e,[{key:"Re",value:function(e,t,n){var r=e.add(t.multiply(uo.fromNumber(n)));return 1===r.compare(Ul)&&(r=new uo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ae).toNumber()}},{key:"Ve",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"mightContain",value:function(e){if(0===this.de)return!1;for(var t=c(zl(Vl(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Re(n,r,i);if(!this.Ve(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.de)for(var t=c(zl(Vl(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Re(n,r,i);this.me(a)}}},{key:"me",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),ql=function(e){w(n,e);var t=I(n);function n(){var e;return v(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return g(n)}(S(Error)),Gl=function(){function e(t,n,r,i,a){v(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return g(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Kl.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Uo.min(),i,new Js(Lo),jc(),Wc())}}]),e}(),Kl=function(){function e(t,n,r,i,a){v(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return g(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Wc(),Wc(),Wc())}}]),e}(),Hl=g((function e(t,n,r,i){v(this,e),this.fe=t,this.removedTargetIds=n,this.key=r,this.ge=i})),Wl=g((function e(t,n){v(this,e),this.targetId=t,this.pe=n})),Ql=g((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ou.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;v(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Yl=function(){function e(){v(this,e),this.ye=0,this.we=Jl(),this.Se=ou.EMPTY_BYTE_STRING,this.be=!1,this.De=!0}return g(e,[{key:"current",get:function(){return this.be}},{key:"resumeToken",get:function(){return this.Se}},{key:"ve",get:function(){return 0!==this.ye}},{key:"Ce",get:function(){return this.De}},{key:"Fe",value:function(e){e.approximateByteSize()>0&&(this.De=!0,this.Se=e)}},{key:"Me",value:function(){var e=Wc(),t=Wc(),n=Wc();return this.we.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ko()}})),new Kl(this.Se,this.be,e,t,n)}},{key:"xe",value:function(){this.De=!1,this.we=Jl()}},{key:"Oe",value:function(e,t){this.De=!0,this.we=this.we.insert(e,t)}},{key:"Ne",value:function(e){this.De=!0,this.we=this.we.remove(e)}},{key:"Be",value:function(){this.ye+=1}},{key:"Le",value:function(){this.ye-=1}},{key:"ke",value:function(){this.De=!0,this.be=!0}}]),e}(),$l=function(){function e(t){v(this,e),this.qe=t,this.Qe=new Map,this.Ke=jc(),this.$e=Xl(),this.Ue=new Js(Lo)}return g(e,[{key:"We",value:function(e){var t,n=y(e.fe);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.ge&&e.ge.isFoundDocument()?this.Ge(r,e.ge):this.ze(r,e.key,e.ge)}}catch(s){n.e(s)}finally{n.f()}var i,a=y(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ze(o,e.key,e.ge)}}catch(s){a.e(s)}finally{a.f()}}},{key:"je",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.He(n);switch(e.state){case 0:t.Je(n)&&r.Fe(e.resumeToken);break;case 1:r.Le(),r.ve||r.xe(),r.Fe(e.resumeToken);break;case 2:r.Le(),r.ve||t.removeTarget(n);break;case 3:t.Je(n)&&(r.ke(),r.Fe(e.resumeToken));break;case 4:t.Je(n)&&(t.Ye(n),r.Fe(e.resumeToken));break;default:ko()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Qe.forEach((function(e,r){n.Je(r)&&t(r)}))}},{key:"Ze",value:function(e){var t,n,r=e.targetId,i=e.pe.count,a=this.Xe(r);if(a){var o=a.target;if(pc(o))if(0===i){var s=new Go(o.path);this.ze(r,s,Uu.newNoDocument(s,Uo.min()))}else bo(1===i);else{var u=this.et(r);if(u!==i){var c=this.tt(e,u);if(0!==c.status){this.Ye(r);var l=2===c.status?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(r,l)}null===(t=Ml.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n,r){var i,a,o,s,u,c,l={localCacheCount:n,existenceFilterCount:r.count},f=r.unchangedNames;return f&&(l.bloomFilter={applied:0===e,hashCount:null!==(i=null==f?void 0:f.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(s=null===(o=null===(a=null==f?void 0:f.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==s?s:0,padding:null!==(c=null===(u=null==f?void 0:f.bits)||void 0===u?void 0:u.padding)&&void 0!==c?c:0},t&&(l.bloomFilter.mightContain=t)),l}(c.status,null!==(n=c.nt)&&void 0!==n?n:null,u,e.pe))}}}}},{key:"tt",value:function(e,t){var n=this,r=e.pe,i=r.unchangedNames,a=r.count;if(!i||!i.bits)return{status:1};var o,s,u=i.bits,c=u.bitmap,l=void 0===c?"":c,f=u.padding,h=void 0===f?0:f,d=i.hashCount,p=void 0===d?0:d;try{o=lu(l).toUint8Array()}catch(e){if(e instanceof au)return go("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),{status:1};throw e}try{s=new Bl(o,h,p)}catch(e){return go(e instanceof ql?"BloomFilter error: ":"Applying bloom filter failed: ",e),{status:1}}var v=function(e){var t=n.qe.rt();return s.mightContain("projects/".concat(t.projectId,"/databases/").concat(t.database,"/documents/").concat(e))};return 0===s.de?{status:1}:{status:a===t-this.it(e.targetId,v)?0:2,nt:v}}},{key:"it",value:function(e,t){var n=this,r=this.qe.getRemoteKeysForTarget(e),i=0;return r.forEach((function(r){t(r.path.canonicalString())||(n.ze(e,r,null),i++)})),i}},{key:"st",value:function(e){var t=this,n=new Map;this.Qe.forEach((function(r,i){var a=t.Xe(i);if(a){if(r.current&&pc(a.target)){var o=new Go(a.target.path);null!==t.Ke.get(o)||t.ot(i,o)||t.ze(i,o,Uu.newNoDocument(o,e))}r.Ce&&(n.set(i,r.Me()),r.xe())}}));var r=Wc();this.$e.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Xe(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Ke.forEach((function(t,n){return n.setReadTime(e)}));var i=new Gl(e,n,this.Ue,this.Ke,r);return this.Ke=jc(),this.$e=Xl(),this.Ue=new Js(Lo),i}},{key:"Ge",value:function(e,t){if(this.Je(e)){var n=this.ot(e,t.key)?2:0;this.He(e).Oe(t.key,n),this.Ke=this.Ke.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e))}}},{key:"ze",value:function(e,t,n){if(this.Je(e)){var r=this.He(e);this.ot(e,t)?r.Oe(t,1):r.Ne(t),this.$e=this.$e.insert(t,this._t(t).delete(e)),n&&(this.Ke=this.Ke.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Qe.delete(e)}},{key:"et",value:function(e){var t=this.He(e).Me();return this.qe.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Be",value:function(e){this.He(e).Be()}},{key:"He",value:function(e){var t=this.Qe.get(e);return t||(t=new Yl,this.Qe.set(e,t)),t}},{key:"_t",value:function(e){var t=this.$e.get(e);return t||(t=new tu(Lo),this.$e=this.$e.insert(e,t)),t}},{key:"Je",value:function(e){var t=null!==this.Xe(e);return t||vo("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Xe",value:function(e){var t=this.Qe.get(e);return t&&t.ve?null:this.qe.ut(e)}},{key:"Ye",value:function(e){var t=this;this.Qe.set(e,new Yl),this.qe.getRemoteKeysForTarget(e).forEach((function(n){t.ze(e,n,null)}))}},{key:"ot",value:function(e,t){return this.qe.getRemoteKeysForTarget(e).has(t)}}]),e}();function Xl(){return new Js(Go.comparator)}function Jl(){return new Js(Go.comparator)}var Zl={asc:"ASCENDING",desc:"DESCENDING"},ef={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tf={and:"AND",or:"OR"},nf=g((function e(t,n){v(this,e),this.databaseId=t,this.useProto3Json=n}));function rf(e,t){return e.useProto3Json||gs(t)?t:{value:t}}function af(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function of(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function sf(e,t){return af(e,t.toTimestamp())}function uf(e){return bo(!!e),Uo.fromTimestamp(function(e){var t=uu(e);return new jo(t.seconds,t.nanos)}(e))}function cf(e,t){return function(e){return new zo(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function lf(e){var t=zo.fromString(e);return bo(Df(t)),t}function ff(e,t){return cf(e.databaseId,t.path)}function hf(e,t){var n=lf(t);if(n.get(1)!==e.databaseId.projectId)throw new xo(_o.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new xo(_o.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Go(mf(n))}function df(e,t){return cf(e.databaseId,t)}function pf(e){var t=lf(e);return 4===t.length?zo.emptyPath():mf(t)}function vf(e){return new zo(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function mf(e){return bo(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function gf(e,t,n){return{name:ff(e,t),fields:n.value.mapValue.fields}}function yf(e,t,n){var r=hf(e,t.name),i=uf(t.updateTime),a=t.createTime?uf(t.createTime):Uo.min(),o=new Fu({mapValue:{fields:t.fields}}),s=Uu.newFoundDocument(r,i,a,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function kf(e,t){return"found"in t?function(e,t){bo(!!t.found),t.found.name,t.found.updateTime;var n=hf(e,t.found.name),r=uf(t.found.updateTime),i=t.found.createTime?uf(t.found.createTime):Uo.min(),a=new Fu({mapValue:{fields:t.found.fields}});return Uu.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){bo(!!t.missing),bo(!!t.readTime);var n=hf(e,t.missing),r=uf(t.readTime);return Uu.newNoDocument(n,r)}(e,t):ko()}function bf(e,t){var n;if(t instanceof wl)n={update:gf(e,t.key,t.value)};else if(t instanceof Cl)n={delete:ff(e,t.key)};else if(t instanceof _l)n={update:gf(e,t.key,t.data),updateMask:Pf(t.fieldMask)};else{if(!(t instanceof Nl))return ko();n={verify:ff(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof rl)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof il)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ol)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ul)return{fieldPath:t.field.canonicalString(),increment:n.Te};throw ko()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:sf(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ko()}(e,t.precondition)),n}function wf(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?dl.updateTime(uf(e.updateTime)):void 0!==e.exists?dl.exists(e.exists):dl.none()}(t.currentDocument):dl.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)bo("REQUEST_TIME"===t.setToServerValue),n=new rl;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new il(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new ol(i)}else"increment"in t?n=new ul(e,t.increment):ko();var a=qo.fromServerFormat(t.fieldPath);return new fl(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=hf(e,t.update.name),a=new Fu({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new iu(t.map((function(e){return qo.fromServerFormat(e)})))}(t.updateMask);return new _l(i,a,o,n,r)}return new wl(i,a,n,r)}if(t.delete){var s=hf(e,t.delete);return new Cl(s,n)}if(t.verify){var u=hf(e,t.verify);return new Nl(u,n)}return ko()}function _f(e,t){return{documents:[df(e,t.path)]}}function xf(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=df(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=df(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Rf(Wu.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Nf(e.field),direction:Sf(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o=rf(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function If(e){var t=pf(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){bo(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=Ef(e);return t instanceof Wu&&$u(t)?t.getFilters():[t]}(n.where));var s=[];n.orderBy&&(s=function(e){return e.map((function(e){return function(e){return new qu(Af(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)}))}(n.orderBy));var u=null;n.limit&&(u=function(e){var t;return gs(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Vu(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Vu(n,t)}(n.endAt)),kc(t,i,s,o,u,"F",c,l)}function Ef(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Af(e.unaryFilter.field);return Hu.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Af(e.unaryFilter.field);return Hu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Af(e.unaryFilter.field);return Hu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Af(e.unaryFilter.field);return Hu.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ko()}}(e):void 0!==e.fieldFilter?function(e){return Hu.create(Af(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ko()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Wu.create(e.compositeFilter.filters.map((function(e){return Ef(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return ko()}}(e.compositeFilter.op))}(e):ko()}function Sf(e){return Zl[e]}function Tf(e){return ef[e]}function Cf(e){return tf[e]}function Nf(e){return{fieldPath:e.canonicalString()}}function Af(e){return qo.fromServerFormat(e.fieldPath)}function Rf(e){return e instanceof Hu?function(e){if("=="===e.op){if(Nu(e.value))return{unaryFilter:{field:Nf(e.field),op:"IS_NAN"}};if(Cu(e.value))return{unaryFilter:{field:Nf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Nu(e.value))return{unaryFilter:{field:Nf(e.field),op:"IS_NOT_NAN"}};if(Cu(e.value))return{unaryFilter:{field:Nf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nf(e.field),op:Tf(e.op),value:e.value}}}(e):e instanceof Wu?function(e){var t=e.getFilters().map((function(e){return Rf(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Cf(e.op),filters:t}}}(e):ko()}function Pf(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Df(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var Of=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Uo.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Uo.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ou.EMPTY_BYTE_STRING,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;v(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=u}return g(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),Lf=g((function e(t){v(this,e),this.ct=t}));function Mf(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ff(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:ff(e,t.key),fields:t.data.value.mapValue.fields,updateTime:af(e,t.version.toTimestamp()),createTime:af(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:jf(t.version)};else{if(!t.isUnknownDocument())return ko();r.unknownDocument={path:n.path.toArray(),version:jf(t.version)}}return r}function Ff(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function jf(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Uf(e){var t=new jo(e.seconds,e.nanoseconds);return Uo.fromTimestamp(t)}function Vf(e,t){for(var n=(t.baseMutations||[]).map((function(t){return wf(e.ct,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return wf(e.ct,t)})),s=jo.fromMillis(t.localWriteTimeMs);return new Al(t.batchId,s,n,o)}function zf(e){var t,n=Uf(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?Uf(e.lastLimboFreeSnapshotVersion):Uo.min();return t=function(e){return void 0!==e.documents}(e.query)?function(e){return bo(1===e.documents.length),Sc(bc(pf(e.documents[0])))}(e.query):function(e){return Sc(If(e))}(e.query),new Of(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,n,r,ou.fromBase64String(e.resumeToken))}function Bf(e,t){var n,r=jf(t.snapshotVersion),i=jf(t.lastLimboFreeSnapshotVersion);n=pc(t.target)?_f(e.ct,t.target):xf(e.ct,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:hc(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function qf(e){var t=If({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Cc(t,t.limit,"L"):t}function Gf(e,t){return new Pl(t.largestBatchId,wf(e.ct,t.overlayMutation))}function Kf(e,t){var n=t.path.lastSegment();return[e,bs(t.path.popLast()),n]}function Hf(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:jf(r.readTime),documentKey:bs(r.documentKey.path),largestBatchId:r.largestBatchId}}var Wf=function(){function e(){v(this,e)}return g(e,[{key:"getBundleMetadata",value:function(e,t){return Qf(e).get(t).next((function(e){if(e)return function(e){return{id:e.bundleId,createTime:Uf(e.createTime),version:e.version}}(e)}))}},{key:"saveBundleMetadata",value:function(e,t){return Qf(e).put(function(e){return{bundleId:e.id,createTime:jf(uf(e.createTime)),version:e.version}}(t))}},{key:"getNamedQuery",value:function(e,t){return Yf(e).get(t).next((function(e){if(e)return function(e){return{name:e.name,query:qf(e.bundledQuery),readTime:Uf(e.readTime)}}(e)}))}},{key:"saveNamedQuery",value:function(e,t){return Yf(e).put(function(e){return{name:e.name,readTime:jf(uf(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Qf(e){return Qs(e,"bundles")}function Yf(e){return Qs(e,"namedQueries")}var $f=function(){function e(t,n){v(this,e),this.serializer=t,this.userId=n}return g(e,[{key:"getOverlay",value:function(e,t){var n=this;return Xf(e).get(Kf(this.userId,t)).next((function(e){return e?Gf(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Bc();return is.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Pl(t,a);i.push(r.ht(e,o))})),is.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(bs(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Xf(e).J("collectionPathOverlayIndex",i))})),is.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Bc(),a=bs(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Xf(e).G("collectionPathOverlayIndex",o).next((function(e){var t,n=y(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Gf(r.serializer,a);i.set(o.getKey(),o)}}catch(s){n.e(s)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Bc(),s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Xf(e).Z({index:"collectionGroupOverlayIndex",range:s},(function(e,t,n){var s=Gf(a.serializer,t);o.size()<r||s.largestBatchId===i?(o.set(s.getKey(),s),i=s.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ht",value:function(e,t){return Xf(e).put(function(e,t,n){var r=c(Kf(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:bf(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"lt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Xf(e){return Qs(e,"documentOverlays")}var Jf=function(){function e(){v(this,e)}return g(e,[{key:"Pt",value:function(e,t){this.It(e,t),t.Tt()}},{key:"It",value:function(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(cu(e.integerValue));else if("doubleValue"in e){var n=cu(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),ys(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){var r=e.timestampValue;this.Et(t,20),"string"==typeof r?t.At(r):(t.At("".concat(r.seconds||"")),t.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(lu(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.Et(t,45),t.dt(i.latitude||0),t.dt(i.longitude||0)}else"mapValue"in e?Pu(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):ko()}},{key:"Rt",value:function(e,t){this.Et(t,25),this.St(e,t)}},{key:"St",value:function(e,t){t.At(e)}},{key:"yt",value:function(e,t){var n=e.fields||{};this.Et(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Rt(a,t),this.It(n[a],t)}}},{key:"wt",value:function(e,t){var n=e.values||[];this.Et(t,50);var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.It(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"gt",value:function(e,t){var n=this;this.Et(t,37),Go.fromName(e).path.forEach((function(e){n.Et(t,60),n.St(e,t)}))}},{key:"Et",value:function(e,t){e.dt(t)}},{key:"Vt",value:function(e){e.dt(2)}}]),e}();function Zf(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function eh(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Zf(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Jf.bt=new Jf;var th=function(){function e(){v(this,e),this.buffer=new Uint8Array(1024),this.position=0}return g(e,[{key:"Dt",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.vt(n.value),n=t.next();this.Ct()}},{key:"Ft",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Mt(n.value),n=t.next();this.xt()}},{key:"Ot",value:function(e){var t,n=y(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.vt(i);else if(i<2048)this.vt(960|i>>>6),this.vt(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.vt(480|i>>>12),this.vt(128|63&i>>>6),this.vt(128|63&i);else{var a=r.codePointAt(0);this.vt(240|a>>>18),this.vt(128|63&a>>>12),this.vt(128|63&a>>>6),this.vt(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ct()}},{key:"Nt",value:function(e){var t,n=y(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Mt(i);else if(i<2048)this.Mt(960|i>>>6),this.Mt(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Mt(480|i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i);else{var a=r.codePointAt(0);this.Mt(240|a>>>18),this.Mt(128|63&a>>>12),this.Mt(128|63&a>>>6),this.Mt(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.xt()}},{key:"Bt",value:function(e){var t=this.Lt(e),n=eh(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"qt",value:function(e){var t=this.Lt(e),n=eh(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Qt",value:function(){this.Kt(255),this.Kt(255)}},{key:"$t",value:function(){this.Ut(255),this.Ut(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Wt",value:function(){return this.buffer.slice(0,this.position)}},{key:"Lt",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"vt",value:function(e){var t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}},{key:"Mt",value:function(e){var t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}},{key:"Ct",value:function(){this.Kt(0),this.Kt(1)}},{key:"xt",value:function(){this.Ut(0),this.Ut(1)}},{key:"Kt",value:function(e){this.kt(1),this.buffer[this.position++]=e}},{key:"Ut",value:function(e){this.kt(1),this.buffer[this.position++]=~e}},{key:"kt",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),nh=function(){function e(t){v(this,e),this.Gt=t}return g(e,[{key:"ft",value:function(e){this.Gt.Dt(e)}},{key:"At",value:function(e){this.Gt.Ot(e)}},{key:"dt",value:function(e){this.Gt.Bt(e)}},{key:"Tt",value:function(){this.Gt.Qt()}}]),e}(),rh=function(){function e(t){v(this,e),this.Gt=t}return g(e,[{key:"ft",value:function(e){this.Gt.Ft(e)}},{key:"At",value:function(e){this.Gt.Nt(e)}},{key:"dt",value:function(e){this.Gt.qt(e)}},{key:"Tt",value:function(){this.Gt.$t()}}]),e}(),ih=function(){function e(){v(this,e),this.Gt=new th,this.zt=new nh(this.Gt),this.jt=new rh(this.Gt)}return g(e,[{key:"seed",value:function(e){this.Gt.seed(e)}},{key:"Ht",value:function(e){return 0===e?this.zt:this.jt}},{key:"Wt",value:function(){return this.Gt.Wt()}},{key:"reset",value:function(){this.Gt.reset()}}]),e}(),ah=function(){function e(t,n,r,i){v(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return g(e,[{key:"Jt",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function oh(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=sh(e.arrayValue,t.arrayValue))?n:0!==(n=sh(e.directionalValue,t.directionalValue))?n:Go.comparator(e.documentKey,t.documentKey)}function sh(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var uh=function(){function e(t){v(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Yt=t.orderBy,this.Zt=[];var n,r=y(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Xt=i:this.Zt.push(i)}}catch(a){r.e(a)}finally{r.f()}}return g(e,[{key:"en",value:function(e){bo(e.collectionGroup===this.collectionId);var t=Ho(e);if(void 0!==t&&!this.tn(t))return!1;for(var n=Wo(e),r=new Set,i=0,a=0;i<n.length&&this.tn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.Xt){if(!r.has(this.Xt.field.canonicalString())){var o=n[i];if(!this.nn(this.Xt,o)||!this.rn(this.Yt[a++],o))return!1}++i}for(;i<n.length;++i){var s=n[i];if(a>=this.Yt.length||!this.rn(this.Yt[a++],s))return!1}return!0}},{key:"tn",value:function(e){var t,n=y(this.Zt);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.nn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"nn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"rn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function ch(e){var t,n;if(bo(e instanceof Hu||e instanceof Wu),e instanceof Hu){if(e instanceof sc){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Hu.create(e.field,"==",t)})))||[];return Wu.create(r,"or")}return e}var i=e.filters.map((function(e){return ch(e)}));return Wu.create(i,e.op)}function lh(e){if(0===e.getFilters().length)return[];var t=ph(ch(e));return bo(dh(t)),fh(t)||hh(t)?[t]:t.getFilters()}function fh(e){return e instanceof Hu}function hh(e){return e instanceof Wu&&$u(e)}function dh(e){return fh(e)||hh(e)||function(e){if(e instanceof Wu&&Yu(e)){var t,n=y(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!fh(r)&&!hh(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function ph(e){if(bo(e instanceof Hu||e instanceof Wu),e instanceof Hu)return e;if(1===e.filters.length)return ph(e.filters[0]);var t=e.filters.map((function(e){return ph(e)})),n=Wu.create(t,e.op);return dh(n=gh(n))?n:(bo(n instanceof Wu),bo(Qu(n)),bo(n.filters.length>1),n.filters.reduce((function(e,t){return vh(e,t)})))}function vh(e,t){var n;return bo(e instanceof Hu||e instanceof Wu),bo(t instanceof Hu||t instanceof Wu),n=e instanceof Hu?t instanceof Hu?function(e,t){return Wu.create([e,t],"and")}(e,t):mh(e,t):t instanceof Hu?mh(t,e):function(e,t){if(bo(e.filters.length>0&&t.filters.length>0),Qu(e)&&Qu(t))return ec(e,t.getFilters());var n=Yu(e)?e:t,r=Yu(e)?t:e,i=n.filters.map((function(e){return vh(e,r)}));return Wu.create(i,"or")}(e,t),gh(n)}function mh(e,t){if(Qu(t))return ec(t,e.getFilters());var n=t.filters.map((function(t){return vh(e,t)}));return Wu.create(n,"or")}function gh(e){if(bo(e instanceof Hu||e instanceof Wu),e instanceof Hu)return e;var t=e.getFilters();if(1===t.length)return gh(t[0]);if(Xu(e))return e;var n=t.map((function(e){return gh(e)})),r=[];return n.forEach((function(t){t instanceof Hu?r.push(t):t instanceof Wu&&(t.op===e.op?r.push.apply(r,oe(t.filters)):r.push(t))})),1===r.length?r[0]:Wu.create(r,e.op)}var yh=function(){function e(){v(this,e),this.sn=new kh}return g(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.sn.add(t),is.resolve()}},{key:"getCollectionParents",value:function(e,t){return is.resolve(this.sn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return is.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return is.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return is.resolve(null)}},{key:"getIndexType",value:function(e,t){return is.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return is.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return is.resolve(null)}},{key:"getMinOffset",value:function(e,t){return is.resolve(Jo.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return is.resolve(Jo.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return is.resolve()}},{key:"updateIndexEntries",value:function(e,t){return is.resolve()}}]),e}(),kh=function(){function e(){v(this,e),this.index={}}return g(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new tu(zo.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new tu(zo.comparator)).toArray()}}]),e}(),bh=new Uint8Array(0),wh=function(){function e(t,n){v(this,e),this.user=t,this.databaseId=n,this.on=new kh,this._n=new Mc((function(e){return hc(e)}),(function(e,t){return dc(e,t)})),this.uid=t.uid||""}return g(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.on.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.on.add(t)}));var a={collectionId:r,parent:bs(i)};return _h(e).put(a)}return is.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Fo(t),""],!1,!0);return _h(e).G(r).next((function(e){var r,i=y(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(xs(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=Ih(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=Eh(e);return a.next((function(e){o.put(Hf(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Ih(e),r=Eh(e),i=xh(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=xh(e),i=!0,a=new Map;return is.forEach(this.an(t),(function(t){return n.un(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Wc(),o=[];return is.forEach(a,(function(i,a){vo("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(","))}(i)," to execute ").concat(hc(t)));var s=function(e,t){var n=Ho(t);if(void 0===n)return null;var r,i=y(vc(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),u=function(e,t){var n,r=new Map,i=y(Wo(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=y(vc(e,o.fieldPath));try{for(s.s();!(a=s.n()).done;){var u=a.value;switch(u.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),u.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),u.value),Array.from(r.values())}}}catch(c){s.e(c)}finally{s.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=[],i=!0,a=y(Wo(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?mc(e,o.fieldPath,e.startAt):gc(e,o.fieldPath,e.startAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new Vu(r,i)}(a,i),l=function(e,t){var n,r=[],i=!0,a=y(Wo(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?gc(e,o.fieldPath,e.endAt):mc(e,o.fieldPath,e.endAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new Vu(r,i)}(a,i),f=n.cn(i,a,c),h=n.cn(i,a,l),d=n.ln(i,a,u),p=n.hn(i.indexId,s,f,c.inclusive,h,l.inclusive,d);return is.forEach(p,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=Go.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return is.resolve(null)}))}},{key:"an",value:function(e){var t=this._n.get(e);return t||(t=0===e.filters.length?[e]:lh(Wu.create(e.filters,"and")).map((function(t){return fc(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this._n.set(e,t),t)}},{key:"hn",value:function(e,t,n,r,i,a,o){for(var s=this,u=(null!=t?t.length:1)*Math.max(n.length,i.length),c=u/(null!=t?t.length:1),l=[],f=function(){var u=t?s.Pn(t[h/c]):bh,f=s.In(e,u,n[h%c],r),d=s.Tn(e,u,i[h%c],a),p=o.map((function(t){return s.In(e,u,t,!0)}));l.push.apply(l,oe(s.createRange(f,d,p)))},h=0;h<u;++h)f();return l}},{key:"In",value:function(e,t,n,r){var i=new ah(e,Go.empty(),t,n);return r?i:i.Jt()}},{key:"Tn",value:function(e,t,n,r){var i=new ah(e,Go.empty(),t,n);return r?i.Jt():i}},{key:"un",value:function(e,t){var n=new uh(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=y(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.en(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.an(t);return is.forEach(i,(function(t){return n.un(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new tu(qo.comparator),r=!1,i=y(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=y(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var s=a.value;s.field.isKeyField()||("array-contains"===s.op||"array-contains-any"===s.op?r=!0:n=n.add(s.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var u,c=y(e.orderBy);try{for(c.s();!(u=c.n()).done;){var l=u.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"En",value:function(e,t){var n,r=new ih,i=y(Wo(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var s=r.Ht(a.kind);Jf.bt.Pt(o,s)}}catch(u){i.e(u)}finally{i.f()}return r.Wt()}},{key:"Pn",value:function(e){var t=new ih;return Jf.bt.Pt(e,t.Ht(0)),t.Wt()}},{key:"dn",value:function(e,t){var n=new ih;return Jf.bt.Pt(Eu(this.databaseId,t),n.Ht(function(e){var t=Wo(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}},{key:"ln",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new ih);var i,a=0,o=y(Wo(e));try{for(o.s();!(i=o.n()).done;){var s,u=i.value,c=n[a++],l=y(r);try{for(l.s();!(s=l.n()).done;){var f=s.value;if(this.An(t,u.fieldPath)&&Tu(c))r=this.Rn(r,u,c);else{var h=f.Ht(u.kind);Jf.bt.Pt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.Vn(r)}},{key:"cn",value:function(e,t,n){return this.ln(e,t,n.position)}},{key:"Vn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Wt();return t}},{key:"Rn",value:function(e,t,n){var r,i=oe(e),a=[],o=y(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var s,u=r.value,c=y(i);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=new ih;f.seed(l.Wt()),Jf.bt.Pt(u,f.Ht(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"An",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Hu&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Ih(e),i=Eh(e);return(t?r.G("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.G()).next((function(e){var t=[];return is.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Yo(t.sequenceNumber,new Jo(Uf(t.readTime),new Go(xs(t.documentKey)),t.largestBatchId)):Yo.empty(),r=e.fields.map((function(e){var t=c(e,2),n=t[0],r=t[1];return new Qo(qo.fromServerFormat(n),r)}));return new Ko(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Lo(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Ih(e),a=Eh(e);return this.mn(e).next((function(e){return i.G("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return is.forEach(t,(function(t){return a.put(Hf(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return is.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?is.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),is.forEach(a,(function(r){return n.fn(e,t,r).next((function(t){var a=n.gn(i,r);return t.isEqual(a)?is.resolve():n.pn(e,i,r,t,a)}))}))}))}))}},{key:"yn",value:function(e,t,n,r){return xh(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.dn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"wn",value:function(e,t,n,r){return xh(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.dn(n,t.key),t.key.path.toArray()])}},{key:"fn",value:function(e,t,n){var r=xh(e),i=new tu(oh);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.dn(n,t)])},(function(e,r){i=i.add(new ah(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"gn",value:function(e,t){var n=new tu(oh),r=this.En(t,e);if(null==r)return n;var i=Ho(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Tu(a)){var o,s=y(a.arrayValue.values||[]);try{for(s.s();!(o=s.n()).done;){var u=o.value;n=n.add(new ah(t.indexId,e.key,this.Pn(u),r))}}catch(c){s.e(c)}finally{s.f()}}}else n=n.add(new ah(t.indexId,e.key,bh,r));return n}},{key:"pn",value:function(e,t,n,r,i){var a=this;vo("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),s=ru(a),u=ru(o);s||u;){var c=!1,l=!1;if(s&&u){var f=n(s,u);f<0?l=!0:f>0&&(c=!0)}else null!=s?l=!0:c=!0;c?(r(u),u=ru(o)):l?(i(s),s=ru(a)):(s=ru(a),u=ru(o))}}(r,i,oh,(function(r){o.push(a.yn(e,t,n,r))}),(function(r){o.push(a.wn(e,t,n,r))})),is.waitFor(o)}},{key:"mn",value:function(e){var t=1;return Eh(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return oh(e,t)})).filter((function(e,t,n){return!t||0!==oh(e,n[t-1])}));var r=[];r.push(e);var i,a=y(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=oh(o,e),u=oh(o,t);if(0===s)r[0]=e.Jt();else if(s>0&&u<0)r.push(o),r.push(o.Jt());else if(u>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.Sn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,bh,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,bh,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"Sn",value:function(e,t){return oh(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(Sh)}},{key:"getMinOffset",value:function(e,t){var n=this;return is.mapArray(this.an(t),(function(t){return n.un(e,t).next((function(e){return e||ko()}))})).next(Sh)}}]),e}();function _h(e){return Qs(e,"collectionParents")}function xh(e){return Qs(e,"indexEntries")}function Ih(e){return Qs(e,"indexConfiguration")}function Eh(e){return Qs(e,"indexState")}function Sh(e){bo(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Zo(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Jo(t.readTime,t.documentKey,n)}var Th={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ch=function(){function e(t,n,r){v(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return g(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Nh(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.Z({range:o},(function(e,t,n){return s++,n.delete()}));a.push(u.next((function(){bo(1===s)})));var c,l=[],f=y(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Ss(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return is.waitFor(a).next((function(){return l}))}function Ah(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw ko();t=e.noDocument}return JSON.stringify(t).length}Ch.DEFAULT_COLLECTION_PERCENTILE=10,Ch.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ch.DEFAULT=new Ch(41943040,Ch.DEFAULT_COLLECTION_PERCENTILE,Ch.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ch.DISABLED=new Ch(-1,0,0);var Rh=function(){function e(t,n,r,i){v(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.bn={}}return g(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Dh(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Oh(e),o=Dh(e);return o.add({}).next((function(s){bo("number"==typeof s);var u,c=new Al(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return bf(e.ct,t)})),i=n.mutations.map((function(t){return bf(e.ct,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new tu((function(e,t){return Lo(e.canonicalString(),t.canonicalString())})),d=y(r);try{for(d.s();!(u=d.n()).done;){var p=u.value,v=Ss(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Ts))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.bn[s]=c.keys()})),is.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Dh(e).get(t).next((function(e){return e?(bo(e.userId===n.userId),Vf(n.serializer,e)):null}))}},{key:"Dn",value:function(e,t){var n=this;return this.bn[t]?is.resolve(this.bn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.bn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Dh(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(bo(t.batchId>=r),a=Vf(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Dh(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Dh(e).G("userMutationsIndex",n).next((function(e){return e.map((function(e){return Vf(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Es(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Oh(e).Z({range:i},(function(r,i,o){var s=c(r,3),u=s[0],l=s[1],f=s[2],h=xs(l);if(u===n.userId&&t.path.isEqual(h))return Dh(e).get(f).next((function(e){if(!e)throw ko();bo(e.userId===n.userId),a.push(Vf(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new tu(Lo),i=[];return t.forEach((function(t){var a=Es(n.userId,t.path),o=IDBKeyRange.lowerBound(a),s=Oh(e).Z({range:o},(function(e,i,a){var o=c(e,3),s=o[0],u=o[1],l=o[2],f=xs(u);s===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(s)})),is.waitFor(i).next((function(){return n.vn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Es(this.userId,r),o=IDBKeyRange.lowerBound(a),s=new tu(Lo);return Oh(e).Z({range:o},(function(e,t,a){var o=c(e,3),u=o[0],l=o[1],f=o[2],h=xs(l);u===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(f)):a.done()})).next((function(){return n.vn(e,s)}))}},{key:"vn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Dh(e).get(t).next((function(e){if(null===e)throw ko();bo(e.userId===n.userId),r.push(Vf(n.serializer,e))})))})),is.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Nh(e.ue,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Cn(t.batchId)})),is.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Cn",value:function(e){delete this.bn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return is.resolve();var r=IDBKeyRange.lowerBound(function(e){return[e]}(t.userId)),i=[];return Oh(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=xs(e[1]);i.push(a)}else r.done()})).next((function(){bo(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Ph(e,this.userId,t)}},{key:"Fn",value:function(e){var t=this;return Lh(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"lt",value:function(t,n,r,i){return bo(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Ph(e,t,n){var r=Es(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Oh(e).Z({range:a,Y:!0},(function(e,n,r){var a=c(e,3),s=a[0],u=a[1];a[2];s===t&&u===i&&(o=!0),r.done()})).next((function(){return o}))}function Dh(e){return Qs(e,"mutations")}function Oh(e){return Qs(e,"documentMutations")}function Lh(e){return Qs(e,"mutationQueues")}var Mh=function(){function e(t){v(this,e),this.Mn=t}return g(e,[{key:"next",value:function(){return this.Mn+=2,this.Mn}}],[{key:"xn",value:function(){return new e(0)}},{key:"On",value:function(){return new e(-1)}}]),e}(),Fh=function(){function e(t,n){v(this,e),this.referenceDelegate=t,this.serializer=n}return g(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Nn(e).next((function(n){var r=new Mh(n.highestTargetId);return n.highestTargetId=r.next(),t.Bn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Nn(e).next((function(e){return Uo.fromTimestamp(new jo(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Nn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Nn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Bn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Ln(e,t).next((function(){return n.Nn(e).next((function(r){return r.targetCount+=1,n.kn(t,r),n.Bn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Ln(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return jh(e).delete(t.targetId)})).next((function(){return n.Nn(e)})).next((function(t){return bo(t.targetCount>0),t.targetCount-=1,n.Bn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return jh(e).Z((function(o,s){var u=zf(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))})).next((function(){return is.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return jh(e).Z((function(e,n){var r=zf(n);t(r)}))}},{key:"Nn",value:function(e){return Uh(e).get("targetGlobalKey").next((function(e){return bo(null!==e),e}))}},{key:"Bn",value:function(e,t){return Uh(e).put("targetGlobalKey",t)}},{key:"Ln",value:function(e,t){return jh(e).put(Bf(this.serializer,t))}},{key:"kn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Nn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=hc(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return jh(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=zf(n);dc(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Vh(e);return t.forEach((function(t){var o=bs(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),is.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Vh(e);return is.forEach(t,(function(t){var a=bs(t.path);return is.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Vh(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Vh(e),i=Wc();return r.Z({range:n,Y:!0},(function(e,t,n){var r=xs(e[1]),a=new Go(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=bs(t.path),r=IDBKeyRange.bound([n],[Fo(n)],!1,!0),i=0;return Vh(e).Z({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=c(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"ut",value:function(e,t){return jh(e).get(t).next((function(e){return e?zf(e):null}))}}]),e}();function jh(e){return Qs(e,"targets")}function Uh(e){return Qs(e,"targetGlobal")}function Vh(e){return Qs(e,"targetDocuments")}function zh(e,t){var n=c(e,2),r=n[0],i=n[1],a=c(t,2),o=a[0],s=a[1],u=Lo(r,o);return 0===u?Lo(i,s):u}var Bh=function(){function e(t){v(this,e),this.qn=t,this.buffer=new tu(zh),this.Qn=0}return g(e,[{key:"Kn",value:function(){return++this.Qn}},{key:"$n",value:function(e){var t=[e,this.Kn()];if(this.buffer.size<this.qn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();zh(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),qh=function(){function e(t,n,r){v(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Un=null}return g(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Wn(6e4)}},{key:"stop",value:function(){this.Un&&(this.Un.cancel(),this.Un=null)}},{key:"started",get:function(){return null!==this.Un}},{key:"Wn",value:function(e){var t=this;vo("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Un=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,ue(ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Un=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!cs(e.t0)){e.next=12;break}vo("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,ns(e.t0);case 14:return e.next=16,t.Wn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),Gh=function(){function e(t,n){v(this,e),this.Gn=t,this.params=n}return g(e,[{key:"calculateTargetCount",value:function(e,t){return this.Gn.zn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return is.resolve(ms.ae);var r=new Bh(t);return this.Gn.forEachTarget(e,(function(e){return r.$n(e.sequenceNumber)})).next((function(){return n.Gn.jn(e,(function(e){return r.$n(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Gn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Gn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(vo("LruGarbageCollector","Garbage collection skipped; disabled"),is.resolve(Th)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(vo("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Th):n.Hn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Gn.getCacheSize(e)}},{key:"Hn",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(vo("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),po()<=pe.DEBUG&&vo("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),is.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function Kh(e,t){return new Gh(e,t)}var Hh=function(){function e(t,n){v(this,e),this.db=t,this.garbageCollector=Kh(this,n)}return g(e,[{key:"zn",value:function(e){var t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Jn",value:function(e){var t=0;return this.jn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"jn",value:function(e,t){return this.Yn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Wh(e,n)}},{key:"removeReference",value:function(e,t,n){return Wh(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Wh(e,t)}},{key:"Zn",value:function(e,t){return function(e,t){var n=!1;return Lh(e).X((function(r){return Ph(e,r,t).next((function(e){return e&&(n=!0),is.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Yn(e,(function(o,s){if(s<=t){var u=n.Zn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Uo.min()),Vh(e).delete(function(e){return[0,bs(e.path)]}(o))}))}));i.push(u)}})).next((function(){return is.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Wh(e,t)}},{key:"Yn",value:function(e,t){var n,r=Vh(e),i=ms.ae;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=c(e,2),o=a[0],s=(a[1],r.path),u=r.sequenceNumber;0===o?(i!==ms.ae&&t(new Go(xs(n)),i),i=u,n=s):i=ms.ae})).next((function(){i!==ms.ae&&t(new Go(xs(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Wh(e,t){return Vh(e).put(function(e,t){return{targetId:0,path:bs(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Qh=function(){function e(){v(this,e),this.changes=new Mc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return g(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Uu.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?is.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Yh=function(){function e(t){v(this,e),this.serializer=t}return g(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Zh(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Zh(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Ff(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Xn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Uu.newInvalidDocument(t);return Zh(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ed(t))},(function(e,i){r=n.er(t,i)})).next((function(){return r}))}},{key:"tr",value:function(e,t){var n=this,r={size:0,document:Uu.newInvalidDocument(t)};return Zh(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ed(t))},(function(e,i){r={document:n.er(t,i),size:Ah(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=jc();return this.nr(e,t,(function(e,t){var i=n.er(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"rr",value:function(e,t){var n=this,r=jc(),i=new Js(Go.comparator);return this.nr(e,t,(function(e,t){var a=n.er(e,t);r=r.insert(e,a),i=i.insert(e,Ah(t))})).next((function(){return{documents:r,ir:i}}))}},{key:"nr",value:function(e,t,n){if(t.isEmpty())return is.resolve();var r=new tu(nd);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(ed(r.first()),ed(r.last())),a=r.getIterator(),o=a.getNext();return Zh(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Go.fromSegments([].concat(oe(t.prefixPath),[t.collectionGroup,t.documentId]));o&&nd(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.W(ed(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),Ff(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],s=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Zh(e).G(IDBKeyRange.bound(o,s,!0)).next((function(e){var n,a=jc(),o=y(e);try{for(o.s();!(n=o.n()).done;){var s=n.value,u=i.er(Go.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);u.isFoundDocument()&&(Pc(t,u)||r.has(u.key))&&(a=a.insert(u.key,u))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=jc(),o=td(t,n),s=td(t,Jo.max());return Zh(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},(function(e,t,n){var o=i.er(Go.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Xh(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Jh(e).get("remoteDocumentGlobalKey").next((function(e){return bo(!!e),e}))}},{key:"Xn",value:function(e,t){return Jh(e).put("remoteDocumentGlobalKey",t)}},{key:"er",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=yf(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Go.fromSegments(t.noDocument.path),i=Uf(t.noDocument.readTime);n=Uu.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return ko();var a=Go.fromSegments(t.unknownDocument.path),o=Uf(t.unknownDocument.version);n=Uu.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new jo(e[0],e[1]);return Uo.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(Uo.min()))return n}return Uu.newInvalidDocument(e)}}]),e}();function $h(e){return new Yh(e)}var Xh=function(e){w(n,e);var t=I(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).sr=e,i.trackRemovals=r,i._r=new Mc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return g(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new tu((function(e,t){return Lo(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var s=t._r.get(a);if(n.push(t.sr.removeEntry(e,a,s.readTime)),o.isValidDocument()){var u=Mf(t.sr.serializer,o);i=i.add(a.path.popLast());var c=Ah(u);r+=c-s.size,n.push(t.sr.addEntry(e,a,u))}else if(r-=s.size,t.trackRemovals){var l=Mf(t.sr.serializer,o.convertToNoDocument(Uo.min()));n.push(t.sr.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.sr.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.sr.updateMetadata(e,r)),is.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.sr.tr(e,t).next((function(e){return n._r.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.sr.rr(e,t).next((function(e){var t=e.documents;return e.ir.forEach((function(e,r){n._r.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Qh);function Jh(e){return Qs(e,"remoteDocumentGlobal")}function Zh(e){return Qs(e,"remoteDocumentsV14")}function ed(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function td(e,t){var n=t.documentKey.path.toArray();return[e,Ff(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function nd(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Lo(n[a],r[a]))return i;return(i=Lo(n.length,r.length))||((i=Lo(n[n.length-2],r[r.length-2]))||Lo(n[n.length-1],r[r.length-1]))}var rd=g((function e(t,n){v(this,e),this.overlayedDocument=t,this.mutatedFields=n})),id=function(){function e(t,n,r,i){v(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return g(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&yl(r.mutation,e,iu.empty(),jo.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Wc()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Wc(),i=Bc();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Vc();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Bc();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Wc())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=jc(),a=Gc(),o=Gc();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof _l)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),yl(o.mutation,t,o.mutation.getFieldMask(),jo.now())):a.set(t.key,iu.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new rd(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Gc(),i=new Js((function(e,t){return e-t})),a=Wc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=y(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||iu.empty();o=e.applyToLocalView(a,o),r.set(n,o);var s=(i.get(e.batchId)||Wc()).add(n);i=i.insert(e.batchId,s)}}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})).next((function(){for(var o=[],s=i.getReverseIterator(),u=function(){var i=s.getNext(),u=i.key,c=i.value,l=qc();c.forEach((function(e){if(!a.has(e)){var n=ml(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,l))};s.hasNext();)u();return is.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Go.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ic(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):is.resolve(Bc()),s=-1,u=a;return o.next((function(t){return is.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),a.get(t)?is.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){u=u.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,u,t,Wc())})).next((function(e){return{batchId:s,changes:zc(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Go(t)).next((function(e){var t=Vc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Vc();return this.indexManager.getCollectionParents(e,i).next((function(o){return is.forEach(o,(function(o){var s=function(e,t){return new yc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Uu.newInvalidDocument(r)))}));var n=Vc();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&yl(a.mutation,i,iu.empty(),jo.now()),Pc(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),ad=function(){function e(t){v(this,e),this.serializer=t,this.ar=new Map,this.ur=new Map}return g(e,[{key:"getBundleMetadata",value:function(e,t){return is.resolve(this.ar.get(t))}},{key:"saveBundleMetadata",value:function(e,t){return this.ar.set(t.id,function(e){return{id:e.id,version:e.version,createTime:uf(e.createTime)}}(t)),is.resolve()}},{key:"getNamedQuery",value:function(e,t){return is.resolve(this.ur.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ur.set(t.name,function(e){return{name:e.name,query:qf(e.bundledQuery),readTime:uf(e.readTime)}}(t)),is.resolve()}}]),e}(),od=function(){function e(){v(this,e),this.overlays=new Js(Go.comparator),this.cr=new Map}return g(e,[{key:"getOverlay",value:function(e,t){return is.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Bc();return is.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ht(e,t,i)})),is.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.cr.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.cr.delete(n)),is.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Bc(),i=t.length+1,a=new Go(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return is.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Js((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=Bc(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=Bc(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return is.resolve(u)}},{key:"ht",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.cr.get(r.largestBatchId).delete(n.key);this.cr.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Pl(t,n));var a=this.cr.get(t);void 0===a&&(a=Wc(),this.cr.set(t,a)),this.cr.set(t,a.add(n.key))}}]),e}(),sd=function(){function e(){v(this,e),this.lr=new tu(ud.hr),this.Pr=new tu(ud.Ir)}return g(e,[{key:"isEmpty",value:function(){return this.lr.isEmpty()}},{key:"addReference",value:function(e,t){var n=new ud(e,t);this.lr=this.lr.add(n),this.Pr=this.Pr.add(n)}},{key:"Tr",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Er(new ud(e,t))}},{key:"dr",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Ar",value:function(e){var t=this,n=new Go(new zo([])),r=new ud(n,e),i=new ud(n,e+1),a=[];return this.Pr.forEachInRange([r,i],(function(e){t.Er(e),a.push(e.key)})),a}},{key:"Rr",value:function(){var e=this;this.lr.forEach((function(t){return e.Er(t)}))}},{key:"Er",value:function(e){this.lr=this.lr.delete(e),this.Pr=this.Pr.delete(e)}},{key:"Vr",value:function(e){var t=new Go(new zo([])),n=new ud(t,e),r=new ud(t,e+1),i=Wc();return this.Pr.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new ud(e,0),n=this.lr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),ud=function(){function e(t,n){v(this,e),this.key=t,this.mr=n}return g(e,null,[{key:"hr",value:function(e,t){return Go.comparator(e.key,t.key)||Lo(e.mr,t.mr)}},{key:"Ir",value:function(e,t){return Lo(e.mr,t.mr)||Go.comparator(e.key,t.key)}}]),e}(),cd=function(){function e(t,n){v(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.gr=1,this.pr=new tu(ud.hr)}return g(e,[{key:"checkEmpty",value:function(e){return is.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.gr;this.gr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Al(i,t,n,r);this.mutationQueue.push(a);var o,s=y(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.pr=this.pr.add(new ud(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return is.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return is.resolve(this.yr(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.wr(n),i=r<0?0:r;return is.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return is.resolve(0===this.mutationQueue.length?-1:this.gr-1)}},{key:"getAllMutationBatches",value:function(e){return is.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new ud(t,0),i=new ud(t,Number.POSITIVE_INFINITY),a=[];return this.pr.forEachInRange([r,i],(function(e){var t=n.yr(e.mr);a.push(t)})),is.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new tu(Lo);return t.forEach((function(e){var t=new ud(e,0),i=new ud(e,Number.POSITIVE_INFINITY);n.pr.forEachInRange([t,i],(function(e){r=r.add(e.mr)}))})),is.resolve(this.Sr(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Go.isDocumentKey(i)||(i=i.child(""));var a=new ud(new Go(i),0),o=new tu(Lo);return this.pr.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.mr)),!0)}),a),is.resolve(this.Sr(o))}},{key:"Sr",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.yr(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;bo(0===this.br(t.batchId,"removed")),this.mutationQueue.shift();var r=this.pr;return is.forEach(t.mutations,(function(i){var a=new ud(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.pr=r}))}},{key:"Cn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new ud(t,0),r=this.pr.firstAfterOrEqual(n);return is.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,is.resolve()}},{key:"br",value:function(e,t){return this.wr(e)}},{key:"wr",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"yr",value:function(e){var t=this.wr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),ld=function(){function e(t){v(this,e),this.Dr=t,this.docs=new Js(Go.comparator),this.size=0}return g(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Dr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return is.resolve(n?n.document.mutableCopy():Uu.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=jc();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Uu.newInvalidDocument(e))})),is.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=jc(),a=t.path,o=new Go(a.child("")),s=this.docs.getIteratorFrom(o);s.hasNext();){var u=s.getNext(),c=u.key,l=u.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Zo(Xo(l),n)<=0||(r.has(l.key)||Pc(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return is.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){ko()}},{key:"vr",value:function(e,t){return is.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new fd(this)}},{key:"getSize",value:function(e){return is.resolve(this.size)}}]),e}(),fd=function(e){w(n,e);var t=I(n);function n(e){var r;return v(this,n),(r=t.call(this)).sr=e,r}return g(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.sr.addEntry(e,i)):t.sr.removeEntry(r)})),is.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.sr.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.sr.getEntries(e,t)}}]),n}(Qh),hd=function(){function e(t){v(this,e),this.persistence=t,this.Cr=new Mc((function(e){return hc(e)}),dc),this.lastRemoteSnapshotVersion=Uo.min(),this.highestTargetId=0,this.Fr=0,this.Mr=new sd,this.targetCount=0,this.Or=Mh.xn()}return g(e,[{key:"forEachTarget",value:function(e,t){return this.Cr.forEach((function(e,n){return t(n)})),is.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return is.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return is.resolve(this.Fr)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Or.next(),is.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Fr&&(this.Fr=t),is.resolve()}},{key:"Ln",value:function(e){this.Cr.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Or=new Mh(t),this.highestTargetId=t),e.sequenceNumber>this.Fr&&(this.Fr=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Ln(t),this.targetCount+=1,is.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Ln(t),is.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Cr.delete(t.target),this.Mr.Ar(t.targetId),this.targetCount-=1,is.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Cr.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Cr.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),is.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return is.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Cr.get(t)||null;return is.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Mr.Tr(t,n),is.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Mr.dr(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),is.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Mr.Ar(t),is.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Mr.Vr(t);return is.resolve(n)}},{key:"containsKey",value:function(e,t){return is.resolve(this.Mr.containsKey(t))}}]),e}(),dd=function(){function e(t,n){var r=this;v(this,e),this.Nr={},this.overlays={},this.Br=new ms(0),this.Lr=!1,this.Lr=!0,this.referenceDelegate=t(this),this.kr=new hd(this),this.indexManager=new yh,this.remoteDocumentCache=function(e){return new ld(e)}((function(e){return r.referenceDelegate.qr(e)})),this.serializer=new Lf(n),this.Qr=new ad(this.serializer)}return g(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Lr=!1,Promise.resolve()}},{key:"started",get:function(){return this.Lr}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new od,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Nr[e.toKey()];return n||(n=new cd(t,this.referenceDelegate),this.Nr[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.kr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Qr}},{key:"runTransaction",value:function(e,t,n){var r=this;vo("MemoryPersistence","Starting transaction:",e);var i=new pd(this.Br.next());return this.referenceDelegate.Kr(),n(i).next((function(e){return r.referenceDelegate.$r(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ur",value:function(e,t){return is.or(Object.values(this.Nr).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),pd=function(e){w(n,e);var t=I(n);function n(e){var r;return v(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return g(n)}(ts),vd=function(){function e(t){v(this,e),this.persistence=t,this.Wr=new sd,this.Gr=null}return g(e,[{key:"jr",get:function(){if(this.Gr)return this.Gr;throw ko()}},{key:"addReference",value:function(e,t,n){return this.Wr.addReference(n,t),this.jr.delete(n.toString()),is.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Wr.removeReference(n,t),this.jr.add(n.toString()),is.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.jr.add(t.toString()),is.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Wr.Ar(t.targetId).forEach((function(e){return n.jr.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.jr.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Kr",value:function(){this.Gr=new Set}},{key:"$r",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return is.forEach(this.jr,(function(r){var i=Go.fromPath(r);return t.Hr(e,i).next((function(e){e||n.removeEntry(i,Uo.min())}))})).next((function(){return t.Gr=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hr(e,t).next((function(e){e?n.jr.delete(t.toString()):n.jr.add(t.toString())}))}},{key:"qr",value:function(e){return 0}},{key:"Hr",value:function(e,t){var n=this;return is.or([function(){return is.resolve(n.Wr.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ur(e,t)}])}}],[{key:"zr",value:function(t){return new e(t)}}]),e}(),md=function(){function e(t){v(this,e),this.serializer=t}return g(e,[{key:"B",value:function(e,t,n,r){var i=this,a=new as("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Is,{unique:!0}),e.createObjectStore("documentMutations")}(e),gd(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=is.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),gd(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Uo.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").G().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Is,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return is.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Yr(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Zr(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Xr(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ei(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ti(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Us});t.createIndex("collectionPathOverlayIndex",Vs,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",zs,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Cs});t.createIndex("documentKeyIndex",Ns),t.createIndex("collectionGroupIndex",As)}(e)})).next((function(){return i.ni(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.ri(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Ls}).createIndex("sequenceNumberIndex",Ms,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Fs}).createIndex("documentKeyIndex",js,{unique:!1})}(e)}))),o}},{key:"Zr",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=Ah(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Yr",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.G().next((function(n){return is.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.G("userMutationsIndex",i).next((function(r){return is.forEach(r,(function(r){bo(r.userId===n.userId);var i=Vf(t.serializer,r);return Nh(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Xr",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new zo(n),o=function(e){return[0,bs(e)]}(a);r.push(t.get(o).next((function(n){return n?is.resolve():function(n){return t.put({targetId:0,path:bs(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return is.waitFor(r)}))}))}},{key:"ei",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Os});var n=t.store("collectionParents"),r=new kh,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:bs(i)})}};return t.store("remoteDocuments").Z({Y:!0},(function(e,t){var n=new zo(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({Y:!0},(function(e,t){var n=c(e,3),r=(n[0],n[1]),a=(n[2],xs(r));return i(a.popLast())}))}))}},{key:"ti",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=zf(r),a=Bf(t.serializer,i);return n.put(a)}))}},{key:"ni",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i=t.store("remoteDocumentsV14"),a=function(e){return e.document?new Go(zo.fromString(e.document.name).popFirst(5)):e.noDocument?Go.fromSegments(e.noDocument.path):e.unknownDocument?Go.fromSegments(e.unknownDocument.path):ko()}(n).path.toArray(),o={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((function(){return is.waitFor(r)}))}},{key:"ri",value:function(e,t){var n=this,r=t.store("mutations"),i=$h(this.serializer),a=new dd(vd.zr,this.serializer.ct);return r.G().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Wc();Vf(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),is.forEach(r,(function(e,r){var o=new lo(r),s=$f.lt(n.serializer,o),u=a.getIndexManager(o),c=Rh.lt(o,n.serializer,u,a.referenceDelegate);return new id(i,c,s,u).recalculateAndSaveOverlaysForDocumentKeys(new Ws(t,ms.ae),e).next()}))}))}}]),e}();function gd(e){e.createObjectStore("targetDocuments",{keyPath:Ps}).createIndex("documentTargetsIndex",Ds,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Rs,{unique:!0}),e.createObjectStore("targetGlobal")}var yd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",kd=function(){function e(t,n,r,i,a,o,s,u,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(v(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.ii=a,this.window=o,this.document=s,this.si=c,this.oi=l,this._i=f,this.Br=null,this.Lr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ai=null,this.inForeground=!1,this.ui=null,this.ci=null,this.li=Number.NEGATIVE_INFINITY,this.hi=function(e){return Promise.resolve()},!e.v())throw new xo(_o.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Hh(this,i),this.Pi=n+"main",this.serializer=new Lf(u),this.Ii=new os(this.Pi,this._i,new md(this.serializer)),this.kr=new Fh(this.referenceDelegate,this.serializer),this.remoteDocumentCache=$h(this.serializer),this.Qr=new Wf,this.window&&this.window.localStorage?this.Ti=this.window.localStorage:(this.Ti=null,!1===l&&mo("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return g(e,[{key:"start",value:function(){var e=this;return this.Ei().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new xo(_o.FAILED_PRECONDITION,yd);return e.di(),e.Ai(),e.Ri(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.kr.getHighestSequenceNumber(t)}))})).then((function(t){e.Br=new ms(t,e.si)})).then((function(){e.Lr=!0})).catch((function(t){return e.Ii&&e.Ii.close(),Promise.reject(t)}))}},{key:"Vi",value:function(e){var t=this;return this.hi=function(){var n=ue(ie().mark((function n(r){return ie().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.Ii.k(function(){var t=ue(ie().mark((function t(n){return ie().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(ue(ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.Ei();case 4:case"end":return e.stop()}}),e)})))))}},{key:"Ei",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return wd(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.mi(t).next((function(t){t||(e.isPrimary=!1,e.ii.enqueueRetryable((function(){return e.hi(!1)})))}))})).next((function(){return e.fi(t)})).next((function(n){return e.isPrimary&&!n?e.gi(t).next((function(){return!1})):!!n&&e.pi(t).next((function(){return!0}))}))})).catch((function(t){if(cs(t))return vo("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return vo("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.ii.enqueueRetryable((function(){return e.hi(t)})),e.isPrimary=t}))}},{key:"mi",value:function(e){var t=this;return bd(e).get("owner").next((function(e){return is.resolve(t.yi(e))}))}},{key:"wi",value:function(e){return wd(e).delete(this.clientId)}},{key:"Si",value:function(){var e=ue(ie().mark((function e(){var t,n,r,i,a=this;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.bi(this.li,18e5)){e.next=6;break}return this.li=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Qs(e,"clientMetadata");return t.G().next((function(e){var n=a.Di(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return is.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.Ti){n=y(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.Ti.removeItem(this.vi(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ri",value:function(){var e=this;this.ci=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.Ei().then((function(){return e.Si()})).then((function(){return e.Ri()}))}))}},{key:"yi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"fi",value:function(e){var t=this;return this.oi?is.resolve(!0):bd(e).get("owner").next((function(n){if(null!==n&&t.bi(n.leaseTimestampMs,5e3)&&!t.Ci(n.ownerId)){if(t.yi(n)&&t.networkEnabled)return!0;if(!t.yi(n)){if(!n.allowTabSynchronization)throw new xo(_o.FAILED_PRECONDITION,yd);return!1}}return!(!t.networkEnabled||!t.inForeground)||wd(e).G().next((function(e){return void 0===t.Di(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&vo("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=ue(ie().mark((function e(){var t=this;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Lr=!1,this.Fi(),this.ci&&(this.ci.cancel(),this.ci=null),this.Mi(),this.xi(),e.next=7,this.Ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Ws(e,ms.ae);return t.gi(n).next((function(){return t.wi(n)}))}));case 7:this.Ii.close(),this.Oi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Di",value:function(e,t){var n=this;return e.filter((function(e){return n.bi(e.updateTimeMs,t)&&!n.Ci(e.clientId)}))}},{key:"Ni",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return wd(t).G().next((function(t){return e.Di(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Lr}},{key:"getMutationQueue",value:function(e,t){return Rh.lt(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.kr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new wh(e,this.serializer.ct.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return $f.lt(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.Qr}},{key:"runTransaction",value:function(e,t,n){var r=this;vo("IndexedDbPersistence","Starting transaction:",e);var i,a="readonly"===t?"readonly":"readwrite",o=function(e){return 15===e?Hs:14===e?Ks:13===e?Gs:12===e?qs:11===e?Bs:void ko()}(this._i);return this.Ii.runTransaction(e,a,o,(function(a){return i=new Ws(a,r.Br?r.Br.next():ms.ae),"readwrite-primary"===t?r.mi(i).next((function(e){return!!e||r.fi(i)})).next((function(t){if(!t)throw mo("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.ii.enqueueRetryable((function(){return r.hi(!1)})),new xo(_o.FAILED_PRECONDITION,es);return n(i)})).next((function(e){return r.pi(i).next((function(){return e}))})):r.Bi(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Bi",value:function(e){var t=this;return bd(e).get("owner").next((function(e){if(null!==e&&t.bi(e.leaseTimestampMs,5e3)&&!t.Ci(e.ownerId)&&!t.yi(e)&&!(t.oi||t.allowTabSynchronization&&e.allowTabSynchronization))throw new xo(_o.FAILED_PRECONDITION,yd)}))}},{key:"pi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return bd(e).put("owner",t)}},{key:"gi",value:function(e){var t=this,n=bd(e);return n.get("owner").next((function(e){return t.yi(e)?(vo("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):is.resolve()}))}},{key:"bi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(mo("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"di",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ui=function(){e.ii.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.Ei()}))},this.document.addEventListener("visibilitychange",this.ui),this.inForeground="visible"===this.document.visibilityState)}},{key:"Mi",value:function(){this.ui&&(this.document.removeEventListener("visibilitychange",this.ui),this.ui=null)}},{key:"Ai",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ai=function(){t.Fi();var e=/(?:Version|Mobile)\/1[456]/;!U()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.ii.enterRestrictedMode(!0),t.ii.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ai))}},{key:"xi",value:function(){this.ai&&(this.window.removeEventListener("pagehide",this.ai),this.ai=null)}},{key:"Ci",value:function(e){var t;try{var n=null!==(null===(t=this.Ti)||void 0===t?void 0:t.getItem(this.vi(e)));return vo("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return mo("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Fi",value:function(){if(this.Ti)try{this.Ti.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){mo("Failed to set zombie client id.",e)}}},{key:"Oi",value:function(){if(this.Ti)try{this.Ti.removeItem(this.vi(this.clientId))}catch(e){}}},{key:"vi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"v",value:function(){return os.v()}}]),e}();function bd(e){return Qs(e,"owner")}function wd(e){return Qs(e,"clientMetadata")}function _d(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var xd=function(){function e(t,n,r,i){v(this,e),this.targetId=t,this.fromCache=n,this.Li=r,this.ki=i}return g(e,null,[{key:"qi",value:function(t,n){var r,i=Wc(),a=Wc(),o=y(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Id=function(){function e(){v(this,e),this.Qi=!1}return g(e,[{key:"initialize",value:function(e,t){this.Ki=e,this.indexManager=t,this.Qi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.$i(e,t).next((function(a){return a||i.Ui(e,t,r,n)})).next((function(n){return n||i.Wi(e,t)}))}},{key:"$i",value:function(e,t){var n=this;if(wc(t))return is.resolve(null);var r=Sc(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Cc(t,null,"F"),r=Sc(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Wc.apply(void 0,oe(i));return n.Ki.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Gi(t,i);return n.zi(t,o,a,r.readTime)?n.$i(e,Cc(t,null,"F")):n.ji(e,o,t,r)}))}))})))}))}},{key:"Ui",value:function(e,t,n,r){var i=this;return wc(t)||r.isEqual(Uo.min())?this.Wi(e,t):this.Ki.getDocuments(e,n).next((function(a){var o=i.Gi(t,a);return i.zi(t,o,n,r)?i.Wi(e,t):(po()<=pe.DEBUG&&vo("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Rc(t)),i.ji(e,o,t,$o(r,-1)))}))}},{key:"Gi",value:function(e,t){var n=new tu(Oc(e));return t.forEach((function(t,r){Pc(e,r)&&(n=n.add(r))})),n}},{key:"zi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Wi",value:function(e,t){return po()<=pe.DEBUG&&vo("QueryEngine","Using full collection scan to execute query:",Rc(t)),this.Ki.getDocumentsMatchingQuery(e,t,Jo.min())}},{key:"ji",value:function(e,t,n,r){return this.Ki.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Ed=function(){function e(t,n,r,i){v(this,e),this.persistence=t,this.Hi=n,this.serializer=i,this.Ji=new Js(Lo),this.Yi=new Mc((function(e){return hc(e)}),dc),this.Zi=new Map,this.Xi=t.getRemoteDocumentCache(),this.kr=t.getTargetCache(),this.Qr=t.getBundleCache(),this.es(r)}return g(e,[{key:"es",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new id(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ji)}))}}]),e}();function Sd(e,t,n,r){return new Ed(e,t,n,r)}function Td(e,t){return Cd.apply(this,arguments)}function Cd(){return Cd=ue(ie().mark((function e(t,n){var r;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wo(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.es(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=Wc(),u=y(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var l,f=y(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;s=s.add(h.key)}}catch(b){f.e(b)}finally{f.f()}}}catch(b){u.e(b)}finally{u.f()}var d,p=y(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,g=y(v.mutations);try{for(g.s();!(m=g.n()).done;){var k=m.value;s=s.add(k.key)}}catch(b){g.e(b)}finally{g.f()}}}catch(b){p.e(b)}finally{p.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{ts:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Cd.apply(this,arguments)}function Nd(e,t){var n=wo(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Xi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=is.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);bo(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Wc(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Ad(e){var t=wo(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.kr.getLastRemoteSnapshotVersion(e)}))}function Rd(e,t){var n=wo(e),r=t.snapshotVersion,i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Xi.newChangeBuffer({trackRemovals:!0});i=n.Ji;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.kr.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.kr.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?c=c.withResumeToken(ou.EMPTY_BYTE_STRING,Uo.min()).withLastLimboFreeSnapshotVersion(Uo.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,a)&&o.push(n.kr.updateTargetData(e,c))}}));var s=jc(),u=Wc();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Pd(e,a,t.documentUpdates).next((function(e){s=e.ns,u=e.rs}))),!r.isEqual(Uo.min())){var c=n.kr.getLastRemoteSnapshotVersion(e).next((function(t){return n.kr.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return is.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.Ji=i,e}))}function Pd(e,t,n){var r=Wc(),i=Wc();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=jc();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Uo.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):vo("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{ns:r,rs:i}}))}function Dd(e,t){var n=wo(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Od(e,t){var n=wo(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.kr.getTargetData(e,t).next((function(i){return i?(r=i,is.resolve(r)):n.kr.allocateTargetId(e).next((function(i){return r=new Of(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.kr.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}function Ld(e,t,n){return Md.apply(this,arguments)}function Md(){return Md=ue(ie().mark((function e(t,n,r){var i,a,o;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=wo(t),a=i.Ji.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),cs(e.t1)){e.next=12;break}throw e.t1;case 12:vo("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ji=i.Ji.remove(n),i.Yi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Md.apply(this,arguments)}function Fd(e,t,n){var r=wo(e),i=Uo.min(),a=Wc();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=wo(e),i=r.Yi.get(n);return void 0!==i?is.resolve(r.Ji.get(i)):r.kr.getTargetData(t,n)}(r,e,Sc(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.kr.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Hi.getDocumentsMatchingQuery(e,t,n?i:Uo.min(),n?a:Wc())})).next((function(e){return Vd(r,Dc(t),e),{documents:e,ss:a}}))}))}function jd(e,t){var n=wo(e),r=wo(n.kr),i=n.Ji.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.ut(e,t).next((function(e){return e?e.target:null}))}))}function Ud(e,t){var n=wo(e),r=n.Zi.get(t)||Uo.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Xi.getAllFromCollectionGroup(e,t,$o(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Vd(n,t,e),e}))}function Vd(e,t,n){var r=e.Zi.get(t)||Uo.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Zi.set(t,r)}function zd(e,t,n,r){return Bd.apply(this,arguments)}function Bd(){return Bd=ue(ie().mark((function e(t,n,r,i){var a,o,s,u,c,l,f,h,d,p;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=wo(t),o=Wc(),s=jc(),u=y(r);try{for(u.s();!(c=u.n()).done;)l=c.value,f=n.os(l.metadata.name),l.document&&(o=o.add(f)),(h=n._s(l)).setReadTime(n.us(l.metadata.readTime)),s=s.insert(f,h)}catch(v){u.e(v)}finally{u.f()}return d=a.Xi.newChangeBuffer({trackRemovals:!0}),e.next=7,Od(a,function(e){return Sc(bc(zo.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Pd(e,d,s).next((function(t){return d.apply(e),t})).next((function(t){return a.kr.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.kr.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.ns,t.rs)})).next((function(){return t.ns}))}))})));case 9:case"end":return e.stop()}}),e)}))),Bd.apply(this,arguments)}function qd(e,t){return Gd.apply(this,arguments)}function Gd(){return Gd=ue(ie().mark((function e(t,n){var r,i,a,o=arguments;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Wc(),e.next=3,Od(t,Sc(qf(n.bundledQuery)));case 3:return i=e.sent,a=wo(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=uf(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Qr.saveNamedQuery(e,n);var o=i.withResumeToken(ou.EMPTY_BYTE_STRING,t);return a.Ji=a.Ji.insert(o.targetId,o),a.kr.updateTargetData(e,o).next((function(){return a.kr.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.kr.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Qr.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Gd.apply(this,arguments)}function Kd(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Hd(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Wd(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Qd=function(){function e(t,n,r,i){v(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return g(e,[{key:"ls",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"cs",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new xo(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(mo("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Yd=function(){function e(t,n,r){v(this,e),this.targetId=t,this.state=n,this.error=r}return g(e,[{key:"ls",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"cs",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new xo(i.error.code,i.error.message))),a?new e(t,i.state,r):(mo("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),$d=function(){function e(t,n){v(this,e),this.clientId=t,this.activeTargetIds=n}return g(e,null,[{key:"cs",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Yc(),o=0;i&&o<r.activeTargetIds.length;++o)i=ks(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(mo("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Xd=function(){function e(t,n){v(this,e),this.clientId=t,this.onlineState=n}return g(e,null,[{key:"cs",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(mo("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Jd=function(){function e(){v(this,e),this.activeTargetIds=Yc()}return g(e,[{key:"hs",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Ps",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"ls",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Zd=function(){function e(t,n,r,i,a){v(this,e),this.window=t,this.ii=n,this.persistenceKey=r,this.Is=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ts=this.Es.bind(this),this.ds=new Js(Lo),this.started=!1,this.As=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Rs=Kd(this.persistenceKey,this.Is),this.Vs=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ds=this.ds.insert(this.Is,new Jd),this.fs=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.gs=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.ps=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.ys=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.ws=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Ts)}return g(e,[{key:"start",value:function(){var e=ue(ie().mark((function e(){var t,n,r,i,a,o,s,u,c,l,f,h=this;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Ni();case 2:t=e.sent,n=y(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.Is){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Kd(this.persistenceKey,i)))&&(o=$d.cs(i,a))&&(this.ds=this.ds.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Ss(),(s=this.storage.getItem(this.ys))&&(u=this.bs(s))&&this.Ds(u),c=y(this.As);try{for(c.s();!(l=c.n()).done;)f=l.value,this.Es(f)}catch(d){c.e(d)}finally{c.f()}this.As=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Vs,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.vs(this.ds)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ds.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Cs(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Cs(e,t,n),this.Fs(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Wd(this.persistenceKey,e));if(n){var r=Yd.cs(e,n);r&&(t=r.state)}}return this.Ms.hs(e),this.Ss(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ms.Ps(e),this.Ss()}},{key:"isLocalQueryTarget",value:function(e){return this.Ms.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Wd(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.xs(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Fs(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Os(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ns(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.Ts),this.removeItem(this.Rs),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return vo("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){vo("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){vo("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"Es",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(vo("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Rs)return void mo("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable(ue(ie().mark((function e(){var r,i,a,o,s,u,c;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.fs.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Bs(n.key),e.abrupt("return",t.Ls(r,null));case 6:if(!(i=t.ks(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Ls(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.gs.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.qs(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Qs(a));case 16:e.next=41;break;case 18:if(!t.ps.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Ks(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.$s(o));case 23:e.next=41;break;case 25:if(n.key!==t.ys){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.bs(n.newValue))){e.next=30;break}return e.abrupt("return",t.Ds(s));case 30:e.next=41;break;case 32:if(n.key!==t.Vs){e.next=37;break}u=function(e){var t=ms.ae;if(null!=e)try{var n=JSON.parse(e);bo("number"==typeof n),t=n}catch(e){mo("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==ms.ae&&t.sequenceNumberHandler(u),e.next=41;break;case 37:if(n.key!==t.ws){e.next=41;break}return c=t.Us(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Ws(e)})));case 41:e.next=44;break;case 43:t.As.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ms",get:function(){return this.ds.get(this.Is)}},{key:"Ss",value:function(){this.setItem(this.Rs,this.Ms.ls())}},{key:"Cs",value:function(e,t,n){var r=new Qd(this.currentUser,e,t,n),i=Hd(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ls())}},{key:"Fs",value:function(e){var t=Hd(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Os",value:function(e){var t={clientId:this.Is,onlineState:e};this.storage.setItem(this.ys,JSON.stringify(t))}},{key:"xs",value:function(e,t,n){var r=Wd(this.persistenceKey,e),i=new Yd(e,t,n);this.setItem(r,i.ls())}},{key:"Ns",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.ws,t)}},{key:"Bs",value:function(e){var t=this.fs.exec(e);return t?t[1]:null}},{key:"ks",value:function(e,t){var n=this.Bs(e);return $d.cs(n,t)}},{key:"qs",value:function(e,t){var n=this.gs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Qd.cs(new lo(i),r,t)}},{key:"Ks",value:function(e,t){var n=this.ps.exec(e),r=Number(n[1]);return Yd.cs(r,t)}},{key:"bs",value:function(e){return Xd.cs(e)}},{key:"Us",value:function(e){return JSON.parse(e)}},{key:"Qs",value:function(){var e=ue(ie().mark((function e(t){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Gs(t.batchId,t.state,t.error));case 2:vo("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"$s",value:function(e){return this.syncEngine.zs(e.targetId,e.state,e.error)}},{key:"Ls",value:function(e,t){var n=this,r=t?this.ds.insert(e,t):this.ds.remove(e),i=this.vs(this.ds),a=this.vs(r),o=[],s=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||s.push(e)})),this.syncEngine.js(o,s).then((function(){n.ds=r}))}},{key:"Ds",value:function(e){this.ds.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"vs",value:function(e){var t=Yc();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"v",value:function(e){return!(!e||!e.localStorage)}}]),e}(),ep=function(){function e(){v(this,e),this.Hs=new Jd,this.Js={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return g(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Hs.hs(e),this.Js[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Js[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Hs.Ps(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Hs.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Js[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Hs.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Hs.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Hs=new Jd,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),tp=function(){function e(){v(this,e)}return g(e,[{key:"Ys",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),np=function(){function e(){var t=this;v(this,e),this.Zs=function(){return t.Xs()},this.eo=function(){return t.no()},this.ro=[],this.io()}return g(e,[{key:"Ys",value:function(e){this.ro.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Zs),window.removeEventListener("offline",this.eo)}},{key:"io",value:function(){window.addEventListener("online",this.Zs),window.addEventListener("offline",this.eo)}},{key:"Xs",value:function(){vo("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=y(this.ro);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"no",value:function(){vo("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=y(this.ro);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"v",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),rp=null;function ip(){return null===rp?rp=268435456+Math.round(2147483648*Math.random()):rp++,"0x"+rp.toString(16)}var ap={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},op=function(){function e(t){v(this,e),this.so=t.so,this.oo=t.oo}return g(e,[{key:"_o",value:function(e){this.ao=e}},{key:"uo",value:function(e){this.co=e}},{key:"onMessage",value:function(e){this.lo=e}},{key:"close",value:function(){this.oo()}},{key:"send",value:function(e){this.so(e)}},{key:"ho",value:function(){this.ao()}},{key:"Po",value:function(e){this.co(e)}},{key:"Io",value:function(e){this.lo(e)}}]),e}(),sp="WebChannelConnection",up=function(e){w(n,e);var t=I(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return g(n,[{key:"fo",value:function(e,t,n,r){var i=ip();return new Promise((function(a,o){var s=new oo;s.setWithCredentials(!0),s.listenOnce(to.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case eo.NO_ERROR:var t=s.getResponseJson();vo(sp,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case eo.TIMEOUT:vo(sp,"RPC '".concat(e,"' ").concat(i," timed out")),o(new xo(_o.DEADLINE_EXCEEDED,"Request time out"));break;case eo.HTTP_ERROR:var n=s.getStatus();if(vo(sp,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(_o).indexOf(t)>=0?t:_o.UNKNOWN}(u.status);o(new xo(c,u.message))}else o(new xo(_o.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new xo(_o.UNAVAILABLE,"Connection failed."));break;default:ko()}}finally{vo(sp,"RPC '".concat(e,"' ").concat(i," completed."))}}));var u=JSON.stringify(r);vo(sp,"RPC '".concat(e,"' ").concat(i," sending request:"),r),s.send(t,"POST",u,n,15)}))}},{key:"yo",value:function(e,t,n){var r=ip(),i=[this.To,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Ja(),o=Za(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(s.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(s.xmlHttpFactory=new io({})),this.mo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;var c=i.join("");vo(sp,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),s);var l=a.createWebChannel(c,s),f=!1,h=!1,d=new op({so:function(t){h?vo(sp,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(vo(sp,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),f=!0),vo(sp,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},oo:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,ao.EventType.OPEN,(function(){h||vo(sp,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,ao.EventType.CLOSE,(function(){h||(h=!0,vo(sp,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.Po())})),p(l,ao.EventType.ERROR,(function(t){h||(h=!0,go(sp,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.Po(new xo(_o.UNAVAILABLE,"The operation could not be completed")))})),p(l,ao.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];bo(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){vo(sp,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var s=o.status,u=function(e){var t=Sl[e];if(void 0!==t)return Ll(t)}(s),c=o.message;void 0===u&&(u=_o.INTERNAL,c="Unknown error status: "+s+" with message "+o.message),h=!0,d.Po(new xo(u,c)),l.close()}else vo(sp,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d.Io(i)}})),p(o,no.STAT_EVENT,(function(t){t.stat===ro.PROXY?vo(sp,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===ro.NOPROXY&&vo(sp,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.ho()}),0),d}}]),n}(function(){function e(t){v(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.To=n+"://"+t.host,this.Eo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return g(e,[{key:"Ao",get:function(){return!1}},{key:"Ro",value:function(e,t,n,r,i){var a=ip(),o=this.Vo(e,t);vo("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var s={};return this.mo(s,r,i),this.fo(e,o,s,n).then((function(t){return vo("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw go("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"po",value:function(e,t,n,r,i,a){return this.Ro(e,t,n,r,i)}},{key:"mo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+fo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"Vo",value:function(e,t){var n=ap[e];return"".concat(this.To,"/v1/").concat(t,":").concat(n)}}]),e}());function cp(){return"undefined"!=typeof window?window:null}function lp(){return"undefined"!=typeof document?document:null}function fp(e){return new nf(e,!0)}var hp=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;v(this,e),this.ii=t,this.timerId=n,this.wo=r,this.So=i,this.bo=a,this.Do=0,this.vo=null,this.Co=Date.now(),this.reset()}return g(e,[{key:"reset",value:function(){this.Do=0}},{key:"Fo",value:function(){this.Do=this.bo}},{key:"Mo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Do+this.xo()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&vo("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Do," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.vo=this.ii.enqueueAfterDelay(this.timerId,i,(function(){return t.Co=Date.now(),e()})),this.Do*=this.So,this.Do<this.wo&&(this.Do=this.wo),this.Do>this.bo&&(this.Do=this.bo)}},{key:"Oo",value:function(){null!==this.vo&&(this.vo.skipDelay(),this.vo=null)}},{key:"cancel",value:function(){null!==this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"xo",value:function(){return(Math.random()-.5)*this.Do}}]),e}(),dp=function(){function e(t,n,r,i,a,o,s,u){v(this,e),this.ii=t,this.No=r,this.Bo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Lo=0,this.ko=null,this.qo=null,this.stream=null,this.Qo=new hp(t,n)}return g(e,[{key:"Ko",value:function(){return 1===this.state||5===this.state||this.$o()}},{key:"$o",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Uo()}},{key:"stop",value:function(){var e=ue(ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Ko(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Wo",value:function(){this.state=0,this.Qo.reset()}},{key:"Go",value:function(){var e=this;this.$o()&&null===this.ko&&(this.ko=this.ii.enqueueAfterDelay(this.No,6e4,(function(){return e.zo()})))}},{key:"jo",value:function(e){this.Ho(),this.stream.send(e)}},{key:"zo",value:function(){var e=ue(ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.$o()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){this.ko&&(this.ko.cancel(),this.ko=null)}},{key:"Jo",value:function(){this.qo&&(this.qo.cancel(),this.qo=null)}},{key:"close",value:function(){var e=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ho(),this.Jo(),this.Qo.cancel(),this.Lo++,4!==t?this.Qo.reset():n&&n.code===_o.RESOURCE_EXHAUSTED?(mo(n.toString()),mo("Using maximum backoff delay to prevent overloading the backend."),this.Qo.Fo()):n&&n.code===_o.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.uo(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Yo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Zo(this.Lo),n=this.Lo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=c(t,2),i=r[0],a=r[1];e.Lo===n&&e.Xo(i,a)}),(function(n){t((function(){var t=new xo(_o.UNKNOWN,"Fetching auth token failed: "+n.message);return e.e_(t)}))}))}},{key:"Xo",value:function(e,t){var n=this,r=this.Zo(this.Lo);this.stream=this.t_(e,t),this.stream._o((function(){r((function(){return n.state=2,n.qo=n.ii.enqueueAfterDelay(n.Bo,1e4,(function(){return n.$o()&&(n.state=3),Promise.resolve()})),n.listener._o()}))})),this.stream.uo((function(e){r((function(){return n.e_(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Uo",value:function(){var e=this;this.state=5,this.Qo.Mo(ue(ie().mark((function t(){return ie().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"e_",value:function(e){return vo("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Zo",value:function(e){var t=this;return function(n){t.ii.enqueueAndForget((function(){return t.Lo===e?n():(vo("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),pp=function(e){w(n,e);var t=I(n);function n(e,r,i,a,o,s){var u;return v(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).serializer=o,u}return g(n,[{key:"t_",value:function(e,t){return this.connection.yo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Qo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ko()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(bo(void 0===t||"string"==typeof t),ou.fromBase64String(t||"")):(bo(void 0===t||t instanceof Uint8Array),ou.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?_o.UNKNOWN:Ll(e.code);return new xo(t,e.message||"")}(o);n=new Ql(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=hf(e,u.document.name),l=uf(u.document.updateTime),f=u.document.createTime?uf(u.document.createTime):Uo.min(),h=new Fu({mapValue:{fields:u.document.fields}}),d=Uu.newFoundDocument(c,l,f,h),p=u.targetIds||[],v=u.removedTargetIds||[];n=new Hl(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var g=hf(e,m.document),y=m.readTime?uf(m.readTime):Uo.min(),k=Uu.newNoDocument(g,y),b=m.removedTargetIds||[];n=new Hl([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var _=hf(e,w.document),x=w.removedTargetIds||[];n=new Hl([],x,_,null)}else{if(!("filter"in t))return ko();t.filter;var I=t.filter;I.targetId;var E=I.count,S=void 0===E?0:E,T=I.unchangedNames,C=new Dl(S,T),N=I.targetId;n=new Wl(N,C)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Uo.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Uo.min():t.readTime?uf(t.readTime):Uo.min()}(e);return this.listener.n_(t,n)}},{key:"r_",value:function(e){var t={};t.database=vf(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=pc(r)?{documents:_f(e,r)}:{query:xf(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=of(e,t.resumeToken);var i=rf(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(Uo.min())>0){n.readTime=af(e,t.snapshotVersion.toTimestamp());var a=rf(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ko()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.jo(t)}},{key:"i_",value:function(e){var t={};t.database=vf(this.serializer),t.removeTarget=e,this.jo(t)}}]),n}(dp),vp=function(e){w(n,e);var t=I(n);function n(e,r,i,a,o,s){var u;return v(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).serializer=o,u.s_=!1,u}return g(n,[{key:"o_",get:function(){return this.s_}},{key:"start",value:function(){this.s_=!1,this.lastStreamToken=void 0,Ut(_(n.prototype),"start",this).call(this)}},{key:"Yo",value:function(){this.s_&&this.__([])}},{key:"t_",value:function(e,t){return this.connection.yo("Write",e,t)}},{key:"onMessage",value:function(e){if(bo(!!e.streamToken),this.lastStreamToken=e.streamToken,this.s_){this.Qo.reset();var t=function(e,t){return e&&e.length>0?(bo(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?uf(e.updateTime):uf(t);return n.isEqual(Uo.min())&&(n=uf(t)),new hl(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=uf(e.commitTime);return this.listener.a_(n,t)}return bo(!e.writeResults||0===e.writeResults.length),this.s_=!0,this.listener.u_()}},{key:"c_",value:function(){var e={};e.database=vf(this.serializer),this.jo(e)}},{key:"__",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return bf(t.serializer,e)}))};this.jo(n)}}]),n}(dp),mp=function(e){w(n,e);var t=I(n);function n(e,r,i,a){var o;return v(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.l_=!1,o}return g(n,[{key:"h_",value:function(){if(this.l_)throw new xo(_o.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Ro",value:function(e,t,n){var r=this;return this.h_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=c(i,2),o=a[0],s=a[1];return r.connection.Ro(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===_o.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new xo(_o.UNKNOWN,e.toString())}))}},{key:"po",value:function(e,t,n,r){var i=this;return this.h_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=c(a,2),s=o[0],u=o[1];return i.connection.po(e,t,n,s,u,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===_o.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new xo(_o.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.l_=!0}}]),n}(g((function e(){v(this,e)})));var gp=function(){function e(t,n){v(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.I_=0,this.T_=null,this.E_=!0}return g(e,[{key:"d_",value:function(){var e=this;0===this.I_&&(this.A_("Unknown"),this.T_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.T_=null,e.R_("Backend didn't respond within 10 seconds."),e.A_("Offline"),Promise.resolve()})))}},{key:"V_",value:function(e){"Online"===this.state?this.A_("Unknown"):(this.I_++,this.I_>=1&&(this.m_(),this.R_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.A_("Offline")))}},{key:"set",value:function(e){this.m_(),this.I_=0,"Online"===e&&(this.E_=!1),this.A_(e)}},{key:"A_",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"R_",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.E_?(mo(t),this.E_=!1):vo("OnlineStateTracker",t)}},{key:"m_",value:function(){null!==this.T_&&(this.T_.cancel(),this.T_=null)}}]),e}(),yp=g((function e(t,n,r,i,a){var o=this;v(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.f_=[],this.g_=new Map,this.p_=new Set,this.y_=[],this.w_=a,this.w_.Ys((function(e){r.enqueueAndForget(ue(ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Np(o),!e.t0){e.next=5;break}return vo("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=ue(ie().mark((function e(t){var n;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=wo(t)).p_.add(4),e.next=4,wp(n);case 4:return n.S_.set("Unknown"),n.p_.delete(4),e.next=8,kp(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.S_=new gp(r,i)}));function kp(e){return bp.apply(this,arguments)}function bp(){return(bp=ue(ie().mark((function e(t){var n,r,i;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Np(t)){e.next=18;break}n=y(t.y_),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function wp(e){return _p.apply(this,arguments)}function _p(){return(_p=ue(ie().mark((function e(t){var n,r,i;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=y(t.y_),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function xp(e,t){var n=wo(e);n.g_.has(t.targetId)||(n.g_.set(t.targetId,t),Cp(n)?Tp(n):iv(n).$o()&&Ep(n,t))}function Ip(e,t){var n=wo(e),r=iv(n);n.g_.delete(t),r.$o()&&Sp(n,t),0===n.g_.size&&(r.$o()?r.Go():Np(n)&&n.S_.set("Unknown"))}function Ep(e,t){if(e.b_.Be(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Uo.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}iv(e).r_(t)}function Sp(e,t){e.b_.Be(t),iv(e).i_(t)}function Tp(e){e.b_=new $l({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ut:function(t){return e.g_.get(t)||null},rt:function(){return e.datastore.serializer.databaseId}}),iv(e).start(),e.S_.d_()}function Cp(e){return Np(e)&&!iv(e).Ko()&&e.g_.size>0}function Np(e){return 0===wo(e).p_.size}function Ap(e){e.b_=void 0}function Rp(e){return Pp.apply(this,arguments)}function Pp(){return(Pp=ue(ie().mark((function e(t){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.g_.forEach((function(e,n){Ep(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dp(e,t){return Op.apply(this,arguments)}function Op(){return(Op=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ap(t),Cp(t)?(t.S_.V_(n),Tp(t)):t.S_.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lp(e,t,n){return Mp.apply(this,arguments)}function Mp(){return Mp=ue(ie().mark((function e(t,n,r){var i;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.S_.set("Online"),!(n instanceof Ql&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=ue(ie().mark((function e(t,n){var r,i,a,o;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=y(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.g_.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.g_.delete(o),t.b_.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),vo("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Fp(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Hl?t.b_.We(n):n instanceof Wl?t.b_.Ze(n):t.b_.je(n),r.isEqual(Uo.min())){e.next=29;break}return e.prev=14,e.next=17,Ad(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.b_.st(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.g_.get(r);i&&e.g_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.g_.get(t);if(r){e.g_.set(t,r.withResumeToken(ou.EMPTY_BYTE_STRING,r.snapshotVersion)),Sp(e,t);var i=new Of(r.target,t,n,r.sequenceNumber);Ep(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),vo("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Fp(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Mp.apply(this,arguments)}function Fp(e,t,n){return jp.apply(this,arguments)}function jp(){return(jp=ue(ie().mark((function e(t,n,r){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(cs(n)){e.next=2;break}throw n;case 2:return t.p_.add(1),e.next=5,wp(t);case 5:t.S_.set("Offline"),r||(r=function(){return Ad(t.localStore)}),t.asyncQueue.enqueueRetryable(ue(ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vo("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.p_.delete(1),e.next=6,kp(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Up(e,t){return t().catch((function(n){return Fp(e,n,t)}))}function Vp(e){return zp.apply(this,arguments)}function zp(){return zp=ue(ie().mark((function e(t){var n,r,i,a;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=wo(t),r=av(n),i=n.f_.length>0?n.f_[n.f_.length-1].batchId:-1;case 2:if(!Bp(n)){e.next=19;break}return e.prev=3,e.next=6,Dd(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.f_.length&&r.Go(),e.abrupt("break",19);case 10:i=a.batchId,qp(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Fp(n,e.t0);case 17:e.next=2;break;case 19:Gp(n)&&Kp(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),zp.apply(this,arguments)}function Bp(e){return Np(e)&&e.f_.length<10}function qp(e,t){e.f_.push(t);var n=av(e);n.$o()&&n.o_&&n.__(t.mutations)}function Gp(e){return Np(e)&&!av(e).Ko()&&e.f_.length>0}function Kp(e){av(e).start()}function Hp(e){return Wp.apply(this,arguments)}function Wp(){return(Wp=ue(ie().mark((function e(t){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:av(t).c_();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qp(e){return Yp.apply(this,arguments)}function Yp(){return(Yp=ue(ie().mark((function e(t){var n,r,i,a;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=av(t),r=y(t.f_);try{for(r.s();!(i=r.n()).done;)a=i.value,n.__(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $p(e,t,n){return Xp.apply(this,arguments)}function Xp(){return Xp=ue(ie().mark((function e(t,n,r){var i,a;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.f_.shift(),a=Rl.from(i,n,r),e.next=3,Up(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Vp(t);case 5:case"end":return e.stop()}}),e)}))),Xp.apply(this,arguments)}function Jp(e,t){return Zp.apply(this,arguments)}function Zp(){return Zp=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&av(t).o_,!e.t0){e.next=4;break}return e.next=4,function(){var e=ue(ie().mark((function e(t,n){var r;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!function(e){return Ol(e)&&e!==_o.ABORTED}(n.code)){e.next=7;break}return r=t.f_.shift(),av(t).Wo(),e.next=5,Up(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Vp(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Gp(t)&&Kp(t);case 5:case"end":return e.stop()}}),e)}))),Zp.apply(this,arguments)}function ev(e,t){return tv.apply(this,arguments)}function tv(){return tv=ue(ie().mark((function e(t,n){var r,i;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=wo(t)).asyncQueue.verifyOperationInProgress(),vo("RemoteStore","RemoteStore received new credentials"),i=Np(r),r.p_.add(3),e.next=6,wp(r);case 6:return i&&r.S_.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.p_.delete(3),e.next=12,kp(r);case 12:case"end":return e.stop()}}),e)}))),tv.apply(this,arguments)}function nv(e,t){return rv.apply(this,arguments)}function rv(){return(rv=ue(ie().mark((function e(t,n){var r;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wo(t),!n){e.next=7;break}return r.p_.delete(2),e.next=5,kp(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.p_.add(2),e.next=12,wp(r);case 12:r.S_.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function iv(e){return e.D_||(e.D_=function(e,t,n){var r=wo(e);return r.h_(),new pp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{_o:Rp.bind(null,e),uo:Dp.bind(null,e),n_:Lp.bind(null,e)}),e.y_.push(function(){var t=ue(ie().mark((function t(n){return ie().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.D_.Wo(),Cp(e)?Tp(e):e.S_.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.D_.stop();case 6:Ap(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.D_}function av(e){return e.v_||(e.v_=function(e,t,n){var r=wo(e);return r.h_(),new vp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{_o:Hp.bind(null,e),uo:Jp.bind(null,e),u_:Qp.bind(null,e),a_:$p.bind(null,e)}),e.y_.push(function(){var t=ue(ie().mark((function t(n){return ie().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.v_.Wo(),t.next=4,Vp(e);case 4:t.next=9;break;case 6:return t.next=8,e.v_.stop();case 8:e.f_.length>0&&(vo("RemoteStore","Stopping write stream with ".concat(e.f_.length," pending writes")),e.f_=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.v_}var ov=function(){function e(t,n,r,i,a){v(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Io,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return g(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xo(_o.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function sv(e,t){if(mo("AsyncQueue","".concat(t,": ").concat(e)),cs(e))return new xo(_o.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var uv=function(){function e(t){v(this,e),this.comparator=t?function(e,n){return t(e,n)||Go.comparator(e.key,n.key)}:function(e,t){return Go.comparator(e.key,t.key)},this.keyedMap=Vc(),this.sortedSet=new Js(this.comparator)}return g(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),cv=function(){function e(){v(this,e),this.C_=new Js(Go.comparator)}return g(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.C_.get(t);n?0!==e.type&&3===n.type?this.C_=this.C_.insert(t,e):3===e.type&&1!==n.type?this.C_=this.C_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.C_=this.C_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.C_=this.C_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.C_=this.C_.remove(t):1===e.type&&2===n.type?this.C_=this.C_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.C_=this.C_.insert(t,{type:2,doc:e.doc}):ko():this.C_=this.C_.insert(t,e)}},{key:"F_",value:function(){var e=[];return this.C_.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),lv=function(){function e(t,n,r,i,a,o,s,u,c){v(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u,this.hasCachedResults=c}return g(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,uv.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),fv=g((function e(){v(this,e),this.M_=void 0,this.listeners=[]})),hv=g((function e(){v(this,e),this.queries=new Mc((function(e){return Ac(e)}),Nc),this.onlineState="Unknown",this.x_=new Set}));function dv(e,t){return pv.apply(this,arguments)}function pv(){return pv=ue(ie().mark((function e(t,n){var r,i,a,o,s;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wo(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new fv),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.M_=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=sv(e.t0,"Initialization of query '".concat(Rc(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.O_(r.onlineState),o.M_&&n.N_(o.M_)&&kv(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),pv.apply(this,arguments)}function vv(e,t){return mv.apply(this,arguments)}function mv(){return mv=ue(ie().mark((function e(t,n){var r,i,a,o,s;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wo(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),mv.apply(this,arguments)}function gv(e,t){var n,r=wo(e),i=!1,a=y(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=y(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.N_(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}u.M_=o}}}catch(f){a.e(f)}finally{a.f()}i&&kv(r)}function yv(e,t,n){var r=wo(e),i=r.queries.get(t);if(i){var a,o=y(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function kv(e){e.x_.forEach((function(e){e.next()}))}var bv=function(){function e(t,n,r){v(this,e),this.query=t,this.B_=n,this.L_=!1,this.k_=null,this.onlineState="Unknown",this.options=r||{}}return g(e,[{key:"N_",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=y(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new lv(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.L_?this.q_(e)&&(this.B_.next(e),a=!0):this.Q_(e,this.onlineState)&&(this.K_(e),a=!0),this.k_=e,a}},{key:"onError",value:function(e){this.B_.error(e)}},{key:"O_",value:function(e){this.onlineState=e;var t=!1;return this.k_&&!this.L_&&this.Q_(this.k_,e)&&(this.K_(this.k_),t=!0),t}},{key:"Q_",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.U_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"q_",value:function(e){if(e.docChanges.length>0)return!0;var t=this.k_&&this.k_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"K_",value:function(e){e=lv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.L_=!0,this.B_.next(e)}}]),e}(),wv=function(){function e(t,n){v(this,e),this.W_=t,this.byteLength=n}return g(e,[{key:"G_",value:function(){return"metadata"in this.W_}}]),e}(),_v=function(){function e(t){v(this,e),this.serializer=t}return g(e,[{key:"os",value:function(e){return hf(this.serializer,e)}},{key:"_s",value:function(e){return e.metadata.exists?yf(this.serializer,e.document,!1):Uu.newNoDocument(this.os(e.metadata.name),this.us(e.metadata.readTime))}},{key:"us",value:function(e){return uf(e)}}]),e}(),xv=function(){function e(t,n,r){v(this,e),this.z_=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Iv(t)}return g(e,[{key:"j_",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.W_.namedQuery)this.queries.push(e.W_.namedQuery);else if(e.W_.documentMetadata){this.documents.push({metadata:e.W_.documentMetadata}),e.W_.documentMetadata.exists||++t;var n=zo.fromString(e.W_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.W_.document&&(this.documents[this.documents.length-1].document=e.W_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"H_",value:function(e){var t,n=new Map,r=new _v(this.serializer),i=y(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.os(a.metadata.name),u=y(a.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||Wc()).add(s);n.set(c,l)}}catch(f){u.e(f)}finally{u.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=ue(ie().mark((function e(){var t,n,r,i,a;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zd(this.localStore,new _v(this.serializer),this.documents,this.z_.id);case 2:t=e.sent,n=this.H_(this.documents),r=y(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,qd(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,J_:this.collectionGroups,Y_:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Iv(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Ev=g((function e(t){v(this,e),this.key=t})),Sv=g((function e(t){v(this,e),this.key=t})),Tv=function(){function e(t,n){v(this,e),this.query=t,this.Z_=n,this.X_=null,this.hasCachedResults=!1,this.current=!1,this.ea=Wc(),this.mutatedKeys=Wc(),this.ta=Oc(t),this.na=new uv(this.ta)}return g(e,[{key:"ra",get:function(){return this.Z_}},{key:"ia",value:function(e,t){var n=this,r=t?t.sa:new cv,i=t?t.na:this.na,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Pc(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.oa(l,f)||(r.track({type:2,doc:f}),p=!0,(u&&n.ta(f,u)>0||c&&n.ta(f,c)<0)&&(s=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{na:o,sa:r,zi:s,mutatedKeys:a}}},{key:"oa",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.na;this.na=e.na,this.mutatedKeys=e.mutatedKeys;var a=e.sa.F_();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ko()}};return n(e)-n(t)}(e.type,t.type)||r.ta(e.doc,t.doc)})),this._a(n);var o=t?this.aa():[],s=0===this.ea.size&&this.current?1:0,u=s!==this.X_;return this.X_=s,0!==a.length||u?{snapshot:new lv(this.query,e.na,i,a,e.mutatedKeys,0===s,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),ua:o}:{ua:o}}},{key:"O_",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({na:this.na,sa:new cv,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{ua:[]}}},{key:"ca",value:function(e){return!this.Z_.has(e)&&!!this.na.has(e)&&!this.na.get(e).hasLocalMutations}},{key:"_a",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Z_=t.Z_.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Z_=t.Z_.delete(e)})),this.current=e.current)}},{key:"aa",value:function(){var e=this;if(!this.current)return[];var t=this.ea;this.ea=Wc(),this.na.forEach((function(t){e.ca(t.key)&&(e.ea=e.ea.add(t.key))}));var n=[];return t.forEach((function(t){e.ea.has(t)||n.push(new Sv(t))})),this.ea.forEach((function(e){t.has(e)||n.push(new Ev(e))})),n}},{key:"la",value:function(e){this.Z_=e.ss,this.ea=Wc();var t=this.ia(e.documents);return this.applyChanges(t,!0)}},{key:"ha",value:function(){return lv.fromInitialDocuments(this.query,this.na,this.mutatedKeys,0===this.X_,this.hasCachedResults)}}]),e}(),Cv=g((function e(t,n,r){v(this,e),this.query=t,this.targetId=n,this.view=r})),Nv=g((function e(t){v(this,e),this.key=t,this.Pa=!1})),Av=function(){function e(t,n,r,i,a,o){v(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ia={},this.Ta=new Mc((function(e){return Ac(e)}),Nc),this.Ea=new Map,this.da=new Set,this.Aa=new Js(Go.comparator),this.Ra=new Map,this.Va=new sd,this.ma={},this.fa=new Map,this.ga=Mh.On(),this.onlineState="Unknown",this.pa=void 0}return g(e,[{key:"isPrimaryClient",get:function(){return!0===this.pa}}]),e}();function Rv(e,t){return Pv.apply(this,arguments)}function Pv(){return Pv=ue(ie().mark((function e(t,n){var r,i,a,o,s,u;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Im(t),!(o=r.Ta.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ha(),e.next=15;break;case 6:return e.next=8,Od(r.localStore,Sc(n));case 8:return s=e.sent,u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=13,Dv(r,n,i,"current"===u,s.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&xp(r.remoteStore,s);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Pv.apply(this,arguments)}function Dv(e,t,n,r,i){return Ov.apply(this,arguments)}function Ov(){return Ov=ue(ie().mark((function e(t,n,r,i,a){var o,s,u,c,l,f;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.ya=function(e,n,r){return function(){var e=ue(ie().mark((function e(t,n,r,i){var a,o,s;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.ia(r),e.t0=a.zi,!e.t0){e.next=6;break}return e.next=5,Fd(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.ia(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(em(t,n.targetId,s.ua),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Fd(t.localStore,n,!0);case 3:return o=e.sent,s=new Tv(n,o.ss),u=s.ia(o.documents),c=Kl.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=s.applyChanges(u,t.isPrimaryClient,c),em(t,r,l.ua),f=new Cv(n,r,s),e.abrupt("return",(t.Ta.set(n,f),t.Ea.has(r)?t.Ea.get(r).push(n):t.Ea.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),Ov.apply(this,arguments)}function Lv(e,t){return Mv.apply(this,arguments)}function Mv(){return Mv=ue(ie().mark((function e(t,n){var r,i,a;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wo(t),i=r.Ta.get(n),!((a=r.Ea.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.Ea.set(i.targetId,a.filter((function(e){return!Nc(e,n)}))),void r.Ta.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Ld(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Ip(r.remoteStore,i.targetId),Jv(r,i.targetId)})).catch(ns);case 9:e.next=14;break;case 11:return Jv(r,i.targetId),e.next=14,Ld(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Mv.apply(this,arguments)}function Fv(e,t,n){return jv.apply(this,arguments)}function jv(){return jv=ue(ie().mark((function e(t,n,r){var i,a,o;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Em(t),e.prev=1,e.next=4,function(e,t){var n,r,i=wo(e),a=jo.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Wc());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=jc(),u=Wc();return i.Xi.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],u=y(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=kl(c,n.get(c.key).overlayedDocument);null!=l&&s.push(new _l(c.key,l,ju(l.value.mapValue),dl.exists(!0)))}}catch(f){u.e(f)}finally{u.f()}return i.mutationQueue.addMutationBatch(e,a,s,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:zc(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ma[e.currentUser.toKey()];r||(r=new Js(Lo)),r=r.insert(t,n),e.ma[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,rm(i,a.changes);case 9:return e.next=11,Vp(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=sv(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),jv.apply(this,arguments)}function Uv(e,t){return Vv.apply(this,arguments)}function Vv(){return Vv=ue(ie().mark((function e(t,n){var r,i;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wo(t),e.prev=1,e.next=4,Rd(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Ra.get(t);n&&(bo(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Pa=!0:e.modifiedDocuments.size>0?bo(n.Pa):e.removedDocuments.size>0&&(bo(n.Pa),n.Pa=!1))})),e.next=8,rm(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,ns(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Vv.apply(this,arguments)}function zv(e,t,n){var r=wo(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Ta.forEach((function(e,n){var r=n.view.O_(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=wo(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=y(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.O_(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&kv(n)}(r.eventManager,t),i.length&&r.Ia.n_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Bv(e,t,n){return qv.apply(this,arguments)}function qv(){return qv=ue(ie().mark((function e(t,n,r){var i,a,o,s,u,c;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=wo(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Ra.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new Js(Go.comparator)).insert(o,Uu.newNoDocument(o,Uo.min())),u=Wc().add(o),c=new Gl(Uo.min(),new Map,new Js(Lo),s,u),e.next=9,Uv(i,c);case 9:i.Aa=i.Aa.remove(o),i.Ra.delete(n),nm(i),e.next=16;break;case 14:return e.next=16,Ld(i.localStore,n,!1).then((function(){return Jv(i,n,r)})).catch(ns);case 16:case"end":return e.stop()}}),e)}))),qv.apply(this,arguments)}function Gv(e,t){return Kv.apply(this,arguments)}function Kv(){return Kv=ue(ie().mark((function e(t,n){var r,i,a;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wo(t),i=n.batch.batchId,e.prev=1,e.next=4,Nd(r.localStore,n);case 4:return a=e.sent,Xv(r,i,null),$v(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,rm(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,ns(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Kv.apply(this,arguments)}function Hv(e,t,n){return Wv.apply(this,arguments)}function Wv(){return Wv=ue(ie().mark((function e(t,n,r){var i,a;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=wo(t),e.prev=1,e.next=4,function(e,t){var n=wo(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return bo(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Xv(i,n,r),$v(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,rm(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,ns(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Wv.apply(this,arguments)}function Qv(e,t){return Yv.apply(this,arguments)}function Yv(){return Yv=ue(ie().mark((function e(t,n){var r,i,a,o;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Np((r=wo(t)).remoteStore)||vo("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=wo(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.fa.get(i)||[]).push(n),r.fa.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=sv(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),Yv.apply(this,arguments)}function $v(e,t){(e.fa.get(t)||[]).forEach((function(e){e.resolve()})),e.fa.delete(t)}function Xv(e,t,n){var r=wo(e),i=r.ma[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ma[r.currentUser.toKey()]=i}}function Jv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=y(e.Ea.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.Ta.delete(a),n&&e.Ia.wa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.Ea.delete(t),e.isPrimaryClient&&e.Va.Ar(t).forEach((function(t){e.Va.containsKey(t)||Zv(e,t)}))}function Zv(e,t){e.da.delete(t.path.canonicalString());var n=e.Aa.get(t);null!==n&&(Ip(e.remoteStore,n),e.Aa=e.Aa.remove(t),e.Ra.delete(n),nm(e))}function em(e,t,n){var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Ev?(e.Va.addReference(a.key,t),tm(e,a)):a instanceof Sv?(vo("SyncEngine","Document no longer in limbo: "+a.key),e.Va.removeReference(a.key,t),e.Va.containsKey(a.key)||Zv(e,a.key)):ko()}}catch(o){i.e(o)}finally{i.f()}}function tm(e,t){var n=t.key,r=n.path.canonicalString();e.Aa.get(n)||e.da.has(r)||(vo("SyncEngine","New document in limbo: "+n),e.da.add(r),nm(e))}function nm(e){for(;e.da.size>0&&e.Aa.size<e.maxConcurrentLimboResolutions;){var t=e.da.values().next().value;e.da.delete(t);var n=new Go(zo.fromString(t)),r=e.ga.next();e.Ra.set(r,new Nv(n)),e.Aa=e.Aa.insert(n,r),xp(e.remoteStore,new Of(Sc(bc(n.path)),r,"TargetPurposeLimboResolution",ms.ae))}}function rm(e,t,n){return im.apply(this,arguments)}function im(){return im=ue(ie().mark((function e(t,n,r){var i,a,o,s;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=wo(t),a=[],o=[],s=[],e.t0=i.Ta.isEmpty(),e.t0){e.next=9;break}return i.Ta.forEach((function(e,t){s.push(i.ya(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=xd.qi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.Ia.n_(a),e.next=9,function(){var e=ue(ie().mark((function e(t,n){var r,i,a,o,s,u,c,l;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wo(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return is.forEach(n,(function(t){return is.forEach(t.Li,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return is.forEach(t.ki,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),cs(e.t0)){e.next=10;break}throw e.t0;case 10:vo("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=y(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.Ji.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.Ji=r.Ji.insert(s,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),im.apply(this,arguments)}function am(e,t){return om.apply(this,arguments)}function om(){return(om=ue(ie().mark((function e(t,n){var r,i;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=wo(t)).currentUser.isEqual(n)){e.next=11;break}return vo("SyncEngine","User change. New user:",n.toKey()),e.next=5,Td(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.fa.forEach((function(e){e.forEach((function(e){e.reject(new xo(_o.CANCELLED,t))}))})),e.fa.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,rm(r,i.ts);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sm(e,t){var n=wo(e),r=n.Ra.get(t);if(r&&r.Pa)return Wc().add(r.key);var i=Wc(),a=n.Ea.get(t);if(!a)return i;var o,s=y(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.Ta.get(u);i=i.unionWith(c.view.ra)}}catch(l){s.e(l)}finally{s.f()}return i}function um(e,t){return cm.apply(this,arguments)}function cm(){return cm=ue(ie().mark((function e(t,n){var r,i,a;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wo(t),e.next=3,Fd(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.la(i),e.abrupt("return",(r.isPrimaryClient&&em(r,n.targetId,a.ua),a));case 6:case"end":return e.stop()}}),e)}))),cm.apply(this,arguments)}function lm(e,t){return fm.apply(this,arguments)}function fm(){return(fm=ue(ie().mark((function e(t,n){var r;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wo(t),e.abrupt("return",Ud(r.localStore,n).then((function(e){return rm(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hm(e,t,n,r){return dm.apply(this,arguments)}function dm(){return dm=ue(ie().mark((function e(t,n,r,i){var a,o;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=wo(t),e.next=3,function(e,t){var n=wo(e),r=wo(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Dn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):is.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Vp(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Xv(a,n,i||null),$v(a,n),function(e,t){wo(wo(e).mutationQueue).Cn(t)}(a.localStore,n)):ko();case 11:return e.next=13,rm(a,o);case 13:e.next=16;break;case 15:vo("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),dm.apply(this,arguments)}function pm(e,t){return vm.apply(this,arguments)}function vm(){return(vm=ue(ie().mark((function e(t,n){var r,i,a,o,s,u,c,l;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Im(r=wo(t)),Em(r),!0!==n||!0===r.pa){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,mm(r,i.toArray());case 5:return a=e.sent,r.pa=!0,e.next=9,nv(r.remoteStore,!0);case 9:o=y(a);try{for(o.s();!(s=o.n()).done;)u=s.value,xp(r.remoteStore,u)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.pa){e.next=25;break}return c=[],l=Promise.resolve(),r.Ea.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Jv(r,t),Ld(r.localStore,t,!0)})),Ip(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,mm(r,c);case 21:return function(e){var t=wo(e);t.Ra.forEach((function(e,n){Ip(t.remoteStore,n)})),t.Va.Rr(),t.Ra=new Map,t.Aa=new Js(Go.comparator)}(r),r.pa=!1,e.next=25,nv(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mm(e,t,n){return gm.apply(this,arguments)}function gm(){return gm=ue(ie().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h,d,p,v,m,g;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=wo(t),a=[],o=[],s=y(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(f=i.Ea.get(c))||0===f.length){e.next=34;break}return e.next=11,Od(i.localStore,Sc(f[0]));case 11:l=e.sent,h=y(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.Ta.get(p),e.next=20,um(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,jd(i.localStore,c);case 36:return g=e.sent,e.next=39,Od(i.localStore,g);case 39:return l=e.sent,e.next=42,Dv(i,ym(g),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.Ia.n_(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),gm.apply(this,arguments)}function ym(e){return kc(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function km(e){return function(e){return wo(wo(e).persistence).Ni()}(wo(e).localStore)}function bm(e,t,n,r){return wm.apply(this,arguments)}function wm(){return wm=ue(ie().mark((function e(t,n,r,i){var a,o,s,u;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=wo(t)).pa){e.next=3;break}return e.abrupt("return",void vo("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.Ea.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Ud(a.localStore,Dc(o[0]));case 10:return s=e.sent,u=Gl.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,ou.EMPTY_BYTE_STRING),e.next=14,rm(a,s,u);case 14:return e.abrupt("break",20);case 15:return e.next=17,Ld(a.localStore,n,!0);case 17:return Jv(a,n,i),e.abrupt("break",20);case 19:ko();case 20:case"end":return e.stop()}}),e)}))),wm.apply(this,arguments)}function _m(e,t,n){return xm.apply(this,arguments)}function xm(){return xm=ue(ie().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Im(t)).pa){e.next=45;break}a=y(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i.Ea.has(s)){e.next=10;break}return vo("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,jd(i.localStore,s);case 12:return u=e.sent,e.next=15,Od(i.localStore,u);case 15:return c=e.sent,e.next=18,Dv(i,ym(u),c.targetId,!1,c.resumeToken);case 18:xp(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=y(r),e.prev=30,h=ie().mark((function e(){var t;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.Ea.has(t),!e.t0){e.next=5;break}return e.next=5,Ld(i.localStore,t,!1).then((function(){Ip(i.remoteStore,t),Jv(i,t)})).catch(ns);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),xm.apply(this,arguments)}function Im(e){var t=wo(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Uv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=sm.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Bv.bind(null,t),t.Ia.n_=gv.bind(null,t.eventManager),t.Ia.wa=yv.bind(null,t.eventManager),t}function Em(e){var t=wo(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Gv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Hv.bind(null,t),t}function Sm(e,t,n){var r=wo(e);(function(){var e=ue(ie().mark((function e(t,n,r){var i,a,o,s,u;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=wo(e),r=uf(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Qr.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(Iv(i)),a=new xv(i,t.localStore,n.serializer),e.next=15,n.Sa();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.j_(o);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n.Sa();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return u=e.sent,e.next=31,rm(t,u.Y_,void 0);case 31:return e.next=33,function(e,t){var n=wo(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Qr.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(u.progress),e.abrupt("return",Promise.resolve(u.J_));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(go("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var Tm=function(){function e(){v(this,e),this.synchronizeTabs=!1}return g(e,[{key:"initialize",value:function(){var e=ue(ie().mark((function e(t){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=fp(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return Sd(this.persistence,new Id,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new dd(vd.zr,this.serializer)}},{key:"createSharedClientState",value:function(e){return new ep}},{key:"terminate",value:function(){var e=ue(ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Cm=function(e){w(n,e);var t=I(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this)).ba=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return g(n,[{key:"initialize",value:function(){var e=ue(ie().mark((function e(t){var r=this;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ut(_(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.ba.initialize(this,t);case 4:return e.next=6,Em(this.ba.syncEngine);case 6:return e.next=8,Vp(this.ba.remoteStore);case 8:return e.next=10,this.persistence.Vi((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return Sd(this.persistence,new Id,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new qh(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new vs(t,this.persistence);return new ps(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=_d(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Ch.withCacheSize(this.cacheSizeBytes):Ch.DEFAULT;return new kd(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,cp(),lp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new ep}}]),n}(Tm),Nm=function(e){w(n,e);var t=I(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,r,!1)).ba=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return g(n,[{key:"initialize",value:function(){var e=ue(ie().mark((function e(t){var r,i=this;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ut(_(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.ba.syncEngine,e.t0=this.sharedClientState instanceof Zd,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Gs:hm.bind(null,r),zs:bm.bind(null,r),js:_m.bind(null,r),Ni:km.bind(null,r),Ws:lm.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Vi(function(){var e=ue(ie().mark((function e(t){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pm(i.ba.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=cp();if(!Zd.v(t))throw new xo(_o.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=_d(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Zd(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Cm),Am=function(){function e(){v(this,e)}return g(e,[{key:"initialize",value:function(){var e=ue(ie().mark((function e(t,n){var r=this;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return zv(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=am.bind(null,this.syncEngine),e.next=12,nv(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new hv}},{key:"createDatastore",value:function(e){var t=fp(e.databaseInfo.databaseId),n=function(e){return new up(e)}(e.databaseInfo);return function(e,t,n,r){return new mp(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}},{key:"createRemoteStore",value:function(e){var t=this;return function(e,t,n,r,i){return new yp(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(function(e){return zv(t.syncEngine,e,0)}),np.v()?new np:new tp)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new Av(e,t,n,r,i,a);return o&&(s.pa=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=ue(ie().mark((function e(t){var n;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=wo(t),vo("RemoteStore","RemoteStore shutting down."),n.p_.add(5),e.next=5,wp(n);case 5:n.w_.shutdown(),n.S_.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Rm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return ue(ie().mark((function r(){var i;return ie().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return ue(ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var Pm=function(){function e(t){v(this,e),this.observer=t,this.muted=!1}return g(e,[{key:"next",value:function(e){this.observer.next&&this.Da(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Da(this.observer.error,e):mo("Uncaught Error in snapshot listener:",e.toString())}},{key:"va",value:function(){this.muted=!0}},{key:"Da",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Dm=function(){function e(t,n){var r=this;v(this,e),this.Ca=t,this.serializer=n,this.metadata=new Io,this.buffer=new Uint8Array,this.Fa=new TextDecoder("utf-8"),this.Ma().then((function(e){e&&e.G_()?r.metadata.resolve(e.W_.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.W_))))}),(function(e){return r.metadata.reject(e)}))}return g(e,[{key:"close",value:function(){return this.Ca.cancel()}},{key:"getMetadata",value:function(){var e=ue(ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Sa",value:function(){var e=ue(ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Ma());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ma",value:function(){var e=ue(ie().mark((function e(){var t,n,r,i;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.xa();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Fa.decode(t),r=Number(n),isNaN(r)&&this.Oa("length string (".concat(n,") is not valid number")),e.next=9,this.Na(r);case 9:return i=e.sent,e.abrupt("return",new wv(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ba",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"xa",value:function(){var e=ue(ie().mark((function e(){var t,n;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Ba()<0)){e.next=7;break}return e.next=3,this.La();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Ba())<0&&this.Oa("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Na",value:function(){var e=ue(ie().mark((function e(t){var n;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.La();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Oa("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Fa.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Oa",value:function(e){throw this.Ca.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"La",value:function(){var e=ue(ie().mark((function e(){var t,n;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ca.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Om=function(){function e(t){v(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return g(e,[{key:"lookup",value:function(){var e=ue(ie().mark((function e(t){var n,r=this;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new xo(_o.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=ue(ie().mark((function e(t,n){var r,i,a,o,s,u;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wo(t),i=vf(r.serializer)+"/documents",a={documents:n.map((function(e){return ff(r.serializer,e)}))},e.next=5,r.po("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=kf(r.serializer,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());bo(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Cl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=ue(ie().mark((function e(){var t,n=this;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Go.fromPath(t);n.mutations.push(new Nl(r,n.precondition(r)))})),e.next=7,function(){var e=ue(ie().mark((function e(t,n){var r,i,a;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wo(t),i=vf(r.serializer)+"/documents",a={writes:n.map((function(e){return bf(r.serializer,e)}))},e.next=3,r.Ro("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ko();t=Uo.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new xo(_o.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Uo.min())?dl.exists(!1):dl.updateTime(t):dl.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Uo.min()))throw new xo(_o.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return dl.updateTime(t)}return dl.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Lm=function(){function e(t,n,r,i,a){v(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.ka=r.maxAttempts,this.Qo=new hp(this.asyncQueue,"transaction_retry")}return g(e,[{key:"run",value:function(){this.ka-=1,this.qa()}},{key:"qa",value:function(){var e=this;this.Qo.Mo(ue(ie().mark((function t(){var n,r;return ie().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new Om(e.datastore),(r=e.Qa(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ka(t)}))}))})).catch((function(t){e.Ka(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Qa",value:function(e){try{var t=this.updateFunction(e);return!gs(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ka",value:function(e){var t=this;this.ka>0&&this.$a(e)?(this.ka-=1,this.asyncQueue.enqueueAndForget((function(){return t.qa(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"$a",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Ol(t)}return!1}}]),e}(),Mm=function(){function e(t,n,r,i){var a=this;v(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=lo.UNAUTHENTICATED,this.clientId=Oo.V(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=ue(ie().mark((function e(t){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vo("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return vo("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return g(e,[{key:"getConfiguration",value:function(){var e=ue(ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new xo(_o.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Io;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(ue(ie().mark((function n(){var r;return ie().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=sv(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Fm(e,t){return jm.apply(this,arguments)}function jm(){return jm=ue(ie().mark((function e(t,n){var r,i;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),vo("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=ue(ie().mark((function e(t){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Td(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),jm.apply(this,arguments)}function Um(e,t){return Vm.apply(this,arguments)}function Vm(){return Vm=ue(ie().mark((function e(t,n){var r,i;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Bm(t);case 3:return r=e.sent,vo("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return ev(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return ev(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),Vm.apply(this,arguments)}function zm(e){return"FirebaseError"===e.name?e.code===_o.FAILED_PRECONDITION||e.code===_o.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function Bm(e){return qm.apply(this,arguments)}function qm(){return(qm=ue(ie().mark((function e(t){var n;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return vo("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,Fm(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),zm(n=e.t0)){e.next=13;break}throw n;case 13:return go("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,Fm(t,new Tm);case 16:e.next=21;break;case 18:return vo("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,Fm(t,new Tm);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function Gm(e){return Km.apply(this,arguments)}function Km(){return(Km=ue(ie().mark((function e(t){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return vo("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,Um(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return vo("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,Um(t,new Am);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hm(e){return Bm(e).then((function(e){return e.persistence}))}function Wm(e){return Bm(e).then((function(e){return e.localStore}))}function Qm(e){return Gm(e).then((function(e){return e.remoteStore}))}function Ym(e){return Gm(e).then((function(e){return e.syncEngine}))}function $m(e){return Gm(e).then((function(e){return e.datastore}))}function Xm(e){return Jm.apply(this,arguments)}function Jm(){return(Jm=ue(ie().mark((function e(t){var n,r;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gm(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Rv.bind(null,n.syncEngine),r.onUnlisten=Lv.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Io;return e.asyncQueue.enqueueAndForget(ue(ie().mark((function i(){return ie().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Pm({next:function(a){t.enqueueAndForget((function(){return vv(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new xo(_o.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new xo(_o.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new bv(bc(n.path),a,{includeMetadataChanges:!0,U_:!0});return dv(e,o)},i.next=3,Xm(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function eg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Io;return e.asyncQueue.enqueueAndForget(ue(ie().mark((function i(){return ie().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Pm({next:function(n){t.enqueueAndForget((function(){return vv(e,o)})),n.fromCache&&"server"===r.source?i.reject(new xo(_o.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new bv(n,a,{includeMetadataChanges:!0,U_:!0});return dv(e,o)},i.next=3,Xm(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function tg(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var ng=new Map;function rg(e,t,n){if(!n)throw new xo(_o.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function ig(e,t,n,r){if(!0===t&&!0===r)throw new xo(_o.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function ag(e){if(!Go.isDocumentKey(e))throw new xo(_o.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function og(e){if(Go.isDocumentKey(e))throw new xo(_o.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function sg(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":ko()}function ug(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new xo(_o.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=sg(e);throw new xo(_o.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function cg(e,t){if(t<=0)throw new xo(_o.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var lg=function(){function e(t){var n,r;if(v(this,e),void 0===t.host){if(void 0!==t.ssl)throw new xo(_o.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new xo(_o.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}ig("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tg(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new xo(_o.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new xo(_o.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new xo(_o.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return g(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),fg=function(){function e(t,n,r,i){v(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lg({}),this._settingsFrozen=!1}return g(e,[{key:"app",get:function(){if(!this._app)throw new xo(_o.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new xo(_o.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lg(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new So;switch(e.type){case"firstParty":return new Ao(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new xo(_o.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=ng.get(e);t&&(vo("ComponentProvider","Removing Datastore"),ng.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function hg(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=ug(e,fg))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&go("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var s,u;if("string"==typeof i.mockUserToken)s=i.mockUserToken,u=lo.MOCK_USER;else{s=F(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new xo(_o.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new lo(c)}e._authCredentials=new To(new Eo(s,u))}}var dg=function(){function e(t,n,r){v(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return g(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),pg=function(){function e(t,n,r){v(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return g(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new vg(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),vg=function(e){w(n,e);var t=I(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,e,r,bc(i)))._path=i,a.type="collection",a}return g(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new pg(this.firestore,null,new Go(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(dg);function mg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=re(e),rg("collection","path",t),e instanceof fg){var a=zo.fromString.apply(zo,[t].concat(r));return og(a),new vg(e,null,a)}if(!(e instanceof pg||e instanceof vg))throw new xo(_o.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(zo.fromString.apply(zo,[t].concat(r)));return og(o),new vg(e.firestore,null,o)}function gg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=re(e),1===arguments.length&&(t=Oo.V()),rg("doc","path",t),e instanceof fg){var a=zo.fromString.apply(zo,[t].concat(r));return ag(a),new pg(e,null,new Go(a))}if(!(e instanceof pg||e instanceof vg))throw new xo(_o.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(zo.fromString.apply(zo,[t].concat(r)));return ag(o),new pg(e.firestore,e instanceof vg?e.converter:null,new Go(o))}function yg(e,t){return e=re(e),t=re(t),(e instanceof pg||e instanceof vg)&&(t instanceof pg||t instanceof vg)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function kg(e,t){return e=re(e),t=re(t),e instanceof dg&&t instanceof dg&&e.firestore===t.firestore&&Nc(e._query,t._query)&&e.converter===t.converter}var bg=function(){function e(){var t=this;v(this,e),this.Ua=Promise.resolve(),this.Wa=[],this.Ga=!1,this.za=[],this.ja=null,this.Ha=!1,this.Ja=!1,this.Ya=[],this.Qo=new hp(this,"async_queue_retry"),this.Za=function(){var e=lp();e&&vo("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Qo.Oo()};var n=lp();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Za)}return g(e,[{key:"isShuttingDown",get:function(){return this.Ga}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Xa(),this.eu(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ga){this.Ga=!0,this.Ja=e||!1;var t=lp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Za)}}},{key:"enqueue",value:function(e){var t=this;if(this.Xa(),this.Ga)return new Promise((function(){}));var n=new Io;return this.eu((function(){return t.Ga&&t.Ja?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Wa.push(e),t.tu()}))}},{key:"tu",value:function(){var e=ue(ie().mark((function e(){var t=this;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Wa.length){e.next=14;break}return e.prev=1,e.next=4,this.Wa[0]();case 4:this.Wa.shift(),this.Qo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),cs(e.t0)){e.next=12;break}throw e.t0;case 12:vo("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Wa.length>0&&this.Qo.Mo((function(){return t.tu()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"eu",value:function(e){var t=this,n=this.Ua.then((function(){return t.Ha=!0,e().catch((function(e){t.ja=e,t.Ha=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw mo("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Ha=!1,e}))}));return this.Ua=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Xa(),this.Ya.indexOf(e)>-1&&(t=0);var i=ov.createAndSchedule(this,e,t,n,(function(e){return r.nu(e)}));return this.za.push(i),i}},{key:"Xa",value:function(){this.ja&&ko()}},{key:"verifyOperationInProgress",value:function(){}},{key:"ru",value:function(){var e=ue(ie().mark((function e(){var t;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Ua,e.next=3,t;case 3:if(t!==this.Ua){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"iu",value:function(e){var t,n=y(this.za);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"su",value:function(e){var t=this;return this.ru().then((function(){t.za.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=y(t.za);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.ru()}))}},{key:"ou",value:function(e){this.Ya.push(e)}},{key:"nu",value:function(e){var t=this.za.indexOf(e);this.za.splice(t,1)}}]),e}();function wg(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=y(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var _g=function(){function e(){v(this,e),this._progressObserver={},this._taskCompletionResolver=new Io,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return g(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),xg=function(e){w(n,e);var t=I(n);function n(e,r,i,a){var o;return v(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new bg,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return g(n,[{key:"_terminate",value:function(){return this._firestoreClient||Eg(this),this._firestoreClient.terminate()}}]),n}(fg);function Ig(e){return e._firestoreClient||Eg(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Eg(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new pu(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,tg(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Mm(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function Sg(e,t,n){var r=new Io;return e.asyncQueue.enqueue(ue(ie().mark((function i(){var a;return ie().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Fm(e,n);case 3:return i.next=5,Um(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),zm(a=i.t0)){i.next=13;break}throw a;case 13:go("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function Tg(e){return function(e){var t=new Io;return e.asyncQueue.enqueueAndForget(ue(ie().mark((function n(){return ie().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Qv,n.next=3,Ym(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(Ig(e=ug(e,xg)))}function Cg(e){return function(e){return e.asyncQueue.enqueue(ue(ie().mark((function t(){var n,r;return ie().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Hm(e);case 2:return n=t.sent,t.next=5,Qm(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=wo(e);return t.p_.delete(0),kp(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(Ig(e=ug(e,xg)))}function Ng(e){return function(e){return e.asyncQueue.enqueue(ue(ie().mark((function t(){var n,r;return ie().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Hm(e);case 2:return n=t.sent,t.next=5,Qm(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=ue(ie().mark((function e(t){var n;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=wo(t)).p_.add(0),e.next=4,wp(n);case 4:n.S_.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(Ig(e=ug(e,xg)))}function Ag(e,t){var n=Ig(e=ug(e,xg)),r=new _g;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Dm(e,t)}(function(e,t){if(e instanceof Uint8Array)return Rm(e,t);if(e instanceof ArrayBuffer)return Rm(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?jl().encode(e):e),t)}(n,fp(t));e.asyncQueue.enqueueAndForget(ue(ie().mark((function t(){return ie().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Sm,t.next=3,Ym(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function Rg(e,t){return function(e,t){return e.asyncQueue.enqueue(ue(ie().mark((function n(){return ie().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=wo(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Qr.getNamedQuery(e,t)}))},n.next=3,Wm(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(Ig(e=ug(e,xg)),t).then((function(t){return t?new dg(e,null,t.query):null}))}function Pg(e){if(e._initialized||e._terminated)throw new xo(_o.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Dg=function(){function e(t){v(this,e),this._byteString=t}return g(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(ou.fromBase64String(t))}catch(t){throw new xo(_o.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(ou.fromUint8Array(t))}}]),e}(),Og=function(){function e(){v(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new xo(_o.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qo(n)}return g(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Lg=g((function e(t){v(this,e),this._methodName=t})),Mg=function(){function e(t,n){if(v(this,e),!isFinite(t)||t<-90||t>90)throw new xo(_o.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new xo(_o.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return g(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Lo(this._lat,e._lat)||Lo(this._long,e._long)}}]),e}(),Fg=/^__.*__$/,jg=function(){function e(t,n,r){v(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return g(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new _l(e,this.data,this.fieldMask,t,this.fieldTransforms):new wl(e,this.data,t,this.fieldTransforms)}}]),e}(),Ug=function(){function e(t,n,r){v(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return g(e,[{key:"toMutation",value:function(e,t){return new _l(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Vg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ko()}}var zg=function(){function e(t,n,r,i,a,o){v(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this._u(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return g(e,[{key:"path",get:function(){return this.settings.path}},{key:"au",get:function(){return this.settings.au}},{key:"uu",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"cu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.uu({path:n,lu:!1});return r.hu(e),r}},{key:"Pu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.uu({path:n,lu:!1});return r._u(),r}},{key:"Iu",value:function(e){return this.uu({path:void 0,lu:!0})}},{key:"Tu",value:function(e){return sy(e,this.settings.methodName,this.settings.Eu||!1,this.path,this.settings.du)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"_u",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.hu(this.path.get(e))}},{key:"hu",value:function(e){if(0===e.length)throw this.Tu("Document fields must not be empty");if(Vg(this.au)&&Fg.test(e))throw this.Tu('Document fields cannot begin and end with "__"')}}]),e}(),Bg=function(){function e(t,n,r){v(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||fp(t)}return g(e,[{key:"Au",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new zg({au:e,methodName:t,du:n,path:qo.emptyPath(),lu:!1,Eu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function qg(e){var t=e._freezeSettings(),n=fp(e._databaseId);return new Bg(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Gg(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.Au(a.merge||a.mergeFields?2:0,t,n,i);ry("Data must be an object, but it was:",o,r);var s,u,c=ty(r,o);if(a.merge)s=new iu(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=y(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=iy(t,l.value,n);if(!o.contains(d))throw new xo(_o.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));uy(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}s=new iu(f),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new jg(new Fu(c),s,u)}var Kg=function(e){w(n,e);var t=I(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.au)throw 1===e.au?e.Tu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Tu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Lg);function Hg(e,t,n){return new zg({au:3,du:t.settings.du,methodName:e._methodName,lu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var Wg=function(e){w(n,e);var t=I(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"_toFieldTransform",value:function(e){return new fl(e.path,new rl)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Lg),Qg=function(e){w(n,e);var t=I(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).Ru=r,i}return g(n,[{key:"_toFieldTransform",value:function(e){var t=Hg(this,e,!0),n=this.Ru.map((function(e){return ey(e,t)})),r=new il(n);return new fl(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Lg),Yg=function(e){w(n,e);var t=I(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).Ru=r,i}return g(n,[{key:"_toFieldTransform",value:function(e){var t=Hg(this,e,!0),n=this.Ru.map((function(e){return ey(e,t)})),r=new ol(n);return new fl(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Lg),$g=function(e){w(n,e);var t=I(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).Vu=r,i}return g(n,[{key:"_toFieldTransform",value:function(e){var t=new ul(e.serializer,Jc(e.serializer,this.Vu));return new fl(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Lg);function Xg(e,t,n,r){var i=e.Au(1,t,n);ry("Data must be an object, but it was:",i,r);var a=[],o=Fu.empty();$s(r,(function(e,r){var s=oy(t,e,n);r=re(r);var u=i.Pu(s);if(r instanceof Kg)a.push(s);else{var c=ey(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new iu(a);return new Ug(o,s,i.fieldTransforms)}function Jg(e,t,n,r,i,a){var o=e.Au(1,t,n),s=[iy(t,r,n)],u=[i];if(a.length%2!=0)throw new xo(_o.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(iy(t,a[c])),u.push(a[c+1]);for(var l=[],f=Fu.empty(),h=s.length-1;h>=0;--h)if(!uy(l,s[h])){var d=s[h],p=u[h];p=re(p);var v=o.Pu(d);if(p instanceof Kg)l.push(d);else{var m=ey(p,v);null!=m&&(l.push(d),f.set(d,m))}}var g=new iu(l);return new Ug(f,g,o.fieldTransforms)}function Zg(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return ey(n,e.Au(r?4:3,t))}function ey(e,t){if(ny(e=re(e)))return ry("Unsupported field value:",t,e),ty(e,t);if(e instanceof Lg)return function(e,t){if(!Vg(t.au))throw t.Tu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Tu("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.lu&&4!==t.au)throw t.Tu("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=y(e);try{for(a.s();!(n=a.n()).done;){var o=ey(n.value,t.Iu(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=re(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Jc(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=jo.fromDate(e);return{timestampValue:af(t.serializer,n)}}if(e instanceof jo){var r=new jo(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:af(t.serializer,r)}}if(e instanceof Mg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Dg)return{bytesValue:of(t.serializer,e._byteString)};if(e instanceof pg){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.Tu("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:cf(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Tu("Unsupported field value: ".concat(sg(e)))}(e,t)}function ty(e,t){var n={};return Xs(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):$s(e,(function(e,r){var i=ey(r,t.cu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function ny(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof jo||e instanceof Mg||e instanceof Dg||e instanceof pg||e instanceof Lg)}function ry(e,t,n){if(!ny(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=sg(n);throw"an object"===r?t.Tu(e+" a custom object"):t.Tu(e+" "+r)}}function iy(e,t,n){if((t=re(t))instanceof Og)return t._internalPath;if("string"==typeof t)return oy(e,t);throw sy("Field path arguments must be of type string or ",e,!1,void 0,n)}var ay=new RegExp("[~\\*/\\[\\]]");function oy(e,t,n){if(t.search(ay)>=0)throw sy("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return E(Og,oe(t.split(".")))._internalPath}catch(Zt){throw sy("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function sy(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new xo(_o.INVALID_ARGUMENT,s+e+u)}function uy(e,t){return e.some((function(e){return e.isEqual(t)}))}var cy=function(){function e(t,n,r,i,a){v(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return g(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new pg(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new ly(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(fy("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),ly=function(e){w(n,e);var t=I(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"data",value:function(){return Ut(_(n.prototype),"data",this).call(this)}}]),n}(cy);function fy(e,t){return"string"==typeof t?oy(e,t):t instanceof Og?t._internalPath:t._delegate._internalPath}function hy(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new xo(_o.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var dy=g((function e(){v(this,e)})),py=function(e){w(n,e);var t=I(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n)}(dy);function vy(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof dy&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof gy})).length,n=e.filter((function(e){return e instanceof my})).length;if(t>1||t>0&&n>0)throw new xo(_o.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,s=y(n);try{for(s.s();!(o=s.n()).done;){e=o.value._apply(e)}}catch(u){s.e(u)}finally{s.f()}return e}var my=function(e){w(n,e);var t=I(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return g(n,[{key:"_apply",value:function(e){var t=this._parse(e);return Ny(e._query,t),new dg(e.firestore,e.converter,Tc(e._query,t))}},{key:"_parse",value:function(e){var t=qg(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new xo(_o.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Cy(o,a);var u,c=[],l=y(o);try{for(l.s();!(u=l.n()).done;){var f=u.value;c.push(Ty(r,e,f))}}catch(h){l.e(h)}finally{l.f()}s={arrayValue:{values:c}}}else s=Ty(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Cy(o,a),s=Zg(n,t,o,"in"===a||"not-in"===a);return Hu.create(i,a,s)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(py);var gy=function(e){w(n,e);var t=I(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return g(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Wu.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=y(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;Ny(r,a),r=Tc(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new dg(e.firestore,e.converter,Tc(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(dy);var yy=function(e){w(n,e);var t=I(n);function n(e,r){var i;return v(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return g(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new xo(_o.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new xo(_o.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new qu(t,n);return function(e,t){if(null===_c(e)){var n=xc(e);null!==n&&Ay(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new dg(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new yc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(py);var ky=function(e){w(n,e);var t=I(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return g(n,[{key:"_apply",value:function(e){return new dg(e.firestore,e.converter,Cc(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(py);var by=function(e){w(n,e);var t=I(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return g(n,[{key:"_apply",value:function(e){var t=Sy(e,this.type,this._docOrFields,this._inclusive);return new dg(e.firestore,e.converter,function(e,t){return new yc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(py);function wy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return by._create("startAt",t,!0)}function _y(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return by._create("startAfter",t,!1)}var xy=function(e){w(n,e);var t=I(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return g(n,[{key:"_apply",value:function(e){var t=Sy(e,this.type,this._docOrFields,this._inclusive);return new dg(e.firestore,e.converter,function(e,t){return new yc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(py);function Iy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return xy._create("endBefore",t,!1)}function Ey(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return xy._create("endAt",t,!0)}function Sy(e,t,n,r){if(n[0]=re(n[0]),n[0]instanceof cy)return function(e,t,n,r,i){if(!r)throw new xo(_o.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=y(Ec(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(Eu(t,r.key));else{var c=r.data.field(u.field);if(fu(c))throw new xo(_o.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new xo(_o.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){s.e(f)}finally{s.f()}return new Vu(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=qg(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new xo(_o.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new xo(_o.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Ic(e)&&-1!==c.indexOf("/"))throw new xo(_o.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(zo.fromString(c));if(!Go.isDocumentKey(l))throw new xo(_o.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Go(l);s.push(Eu(t,f))}else{var h=Zg(n,r,c);s.push(h)}}return new Vu(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function Ty(e,t,n){if("string"==typeof(n=re(n))){if(""===n)throw new xo(_o.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ic(t)&&-1!==n.indexOf("/"))throw new xo(_o.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(zo.fromString(n));if(!Go.isDocumentKey(r))throw new xo(_o.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Eu(e,new Go(r))}if(n instanceof pg)return Eu(e,n._key);throw new xo(_o.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(sg(n),"."))}function Cy(e,t){if(!Array.isArray(e)||0===e.length)throw new xo(_o.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Ny(e,t){if(t.isInequality()){var n=xc(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new xo(_o.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=_c(e);null!==i&&Ay(e,r,i)}var a=function(e,t){var n,r=y(e);try{for(r.s();!(n=r.n()).done;){var i,a=y(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(s){a.e(s)}finally{a.f()}}}catch(s){r.e(s)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new xo(_o.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new xo(_o.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function Ay(e,t,n){if(!n.isEqual(t))throw new xo(_o.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Ry=function(){function e(){v(this,e)}return g(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(yu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return cu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(lu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ko()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return $s(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new Mg(cu(e.latitude),cu(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=hu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(du(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=uu(e);return new jo(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=zo.fromString(e);bo(Df(n));var r=new vu(n.get(1),n.get(3)),i=new Go(n.popFirst(5));return r.isEqual(t)||mo("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Py(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Dy=function(e){w(n,e);var t=I(n);function n(e){var r;return v(this,n),(r=t.call(this)).firestore=e,r}return g(n,[{key:"convertBytes",value:function(e){return new Dg(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new pg(this.firestore,null,t)}}]),n}(Ry);var Oy=function(){function e(t,n){v(this,e),this.hasPendingWrites=t,this.fromCache=n}return g(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Ly=function(e){w(n,e);var t=I(n);function n(e,r,i,a,o,s){var u;return v(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return g(n,[{key:"exists",value:function(){return Ut(_(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new My(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(fy("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(cy),My=function(e){w(n,e);var t=I(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ut(_(n.prototype),"data",this).call(this,e)}}]),n}(Ly),Fy=function(){function e(t,n,r,i){v(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Oy(i.hasPendingWrites,i.fromCache),this.query=r}return g(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new My(n._firestore,n._userDataWriter,r.key,r,new Oy(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new xo(_o.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new My(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Oy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new My(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Oy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:jy(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function jy(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ko()}}function Uy(e,t){return e instanceof Ly&&t instanceof Ly?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Fy&&t instanceof Fy&&e._firestore===t._firestore&&kg(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var Vy=function(e){w(n,e);var t=I(n);function n(e){var r;return v(this,n),(r=t.call(this)).firestore=e,r}return g(n,[{key:"convertBytes",value:function(e){return new Dg(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new pg(this.firestore,null,t)}}]),n}(Ry);function zy(e){e=ug(e,pg);var t=ug(e.firestore,xg),n=Ig(t),r=new Vy(t);return function(e,t){var n=new Io;return e.asyncQueue.enqueueAndForget(ue(ie().mark((function r(){return ie().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ue(ie().mark((function e(t,n,r){var i,a;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=wo(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new xo(_o.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=sv(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Wm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new Ly(t,r,e._key,n,new Oy(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function By(e){e=ug(e,dg);var t=ug(e.firestore,xg),n=Ig(t),r=new Vy(t);return hy(e._query),eg(n,e._query).then((function(n){return new Fy(t,r,e,n)}))}function qy(e){e=ug(e,dg);var t=ug(e.firestore,xg),n=Ig(t),r=new Vy(t);return function(e,t){var n=new Io;return e.asyncQueue.enqueueAndForget(ue(ie().mark((function r(){return ie().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ue(ie().mark((function e(t,n,r){var i,a,o,s,u;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Fd(t,n,!0);case 3:i=e.sent,a=new Tv(n,i.ss),o=a.ia(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=sv(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Wm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new Fy(t,r,e,n)}))}function Gy(e){e=ug(e,dg);var t=ug(e.firestore,xg),n=Ig(t),r=new Vy(t);return eg(n,e._query,{source:"server"}).then((function(n){return new Fy(t,r,e,n)}))}function Ky(e,t,n){e=ug(e,pg);var r=ug(e.firestore,xg),i=Py(e.converter,t,n);return Yy(r,[Gg(qg(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,dl.none())])}function Hy(e,t,n){e=ug(e,pg);for(var r=ug(e.firestore,xg),i=qg(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return Yy(r,[("string"==typeof(t=re(t))||t instanceof Og?Jg(i,"updateDoc",e._key,t,n,o):Xg(i,"updateDoc",e._key,t)).toMutation(e._key,dl.exists(!0))])}function Wy(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=re(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||wg(n[u])||(s=n[u],u++);var c,l,f,h={includeMetadataChanges:s.includeMetadataChanges};if(wg(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof pg)l=ug(e.firestore,xg),f=bc(e._key.path),c={next:function(t){n[u]&&n[u]($y(l,e,t))},error:n[u+1],complete:n[u+2]};else{var p=ug(e,dg);l=ug(p.firestore,xg),f=p._query;var v=new Vy(l);c={next:function(e){n[u]&&n[u](new Fy(l,v,p,e))},error:n[u+1],complete:n[u+2]},hy(e._query)}return function(e,t,n,r){var i=new Pm(r),a=new bv(t,i,n);return e.asyncQueue.enqueueAndForget(ue(ie().mark((function t(){return ie().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=dv,t.next=3,Xm(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.va(),e.asyncQueue.enqueueAndForget(ue(ie().mark((function t(){return ie().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=vv,t.next=3,Xm(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Ig(l),f,h,c)}function Qy(e,t){return function(e,t){var n=new Pm(t);return e.asyncQueue.enqueueAndForget(ue(ie().mark((function t(){return ie().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){wo(e).x_.add(t),t.next()},t.next=3,Xm(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.va(),e.asyncQueue.enqueueAndForget(ue(ie().mark((function t(){return ie().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){wo(e).x_.delete(t)},t.next=3,Xm(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Ig(e=ug(e,xg)),wg(t)?t:{next:t})}function Yy(e,t){return function(e,t){var n=new Io;return e.asyncQueue.enqueueAndForget(ue(ie().mark((function r(){return ie().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Fv,r.next=3,Ym(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Ig(e),t)}function $y(e,t,n){var r=n.docs.get(t._key),i=new Vy(e);return new Ly(e,i,t._key,r,new Oy(n.hasPendingWrites,n.fromCache),t.converter)}var Xy={maxAttempts:5},Jy=function(){function e(t,n){v(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=qg(t)}return g(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=Zy(e,this._firestore),i=Py(r.converter,t,n),a=Gg(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,dl.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=Zy(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=re(t))||t instanceof Og?Jg(this._dataReader,"WriteBatch.update",i._key,t,n,o):Xg(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,dl.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=Zy(e,this._firestore);return this._mutations=this._mutations.concat(new Cl(t._key,dl.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new xo(_o.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function Zy(e,t){if((e=re(e)).firestore!==t)throw new xo(_o.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var ek=function(e){w(n,e);var t=I(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,r))._firestore=e,i}return g(n,[{key:"get",value:function(e){var t=this,r=Zy(e,this._firestore),i=new Vy(this._firestore);return Ut(_(n.prototype),"get",this).call(this,e).then((function(e){return new Ly(t._firestore,i,r._key,e._document,new Oy(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){v(this,e),this._firestore=t,this._transaction=n,this._dataReader=qg(t)}return g(e,[{key:"get",value:function(e){var t=this,n=Zy(e,this._firestore),r=new Dy(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return ko();var i=e[0];if(i.isFoundDocument())return new cy(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new cy(t._firestore,r,n._key,null,n.converter);throw ko()}))}},{key:"set",value:function(e,t,n){var r=Zy(e,this._firestore),i=Py(r.converter,t,n),a=Gg(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=Zy(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=re(t))||t instanceof Og?Jg(this._dataReader,"Transaction.update",i._key,t,n,o):Xg(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=Zy(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function tk(e,t,n){e=ug(e,xg);var r=Object.assign(Object.assign({},Xy),n);return function(e){if(e.maxAttempts<1)throw new xo(_o.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Io;return e.asyncQueue.enqueueAndForget(ue(ie().mark((function i(){var a;return ie().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,$m(e);case 2:a=i.sent,new Lm(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(Ig(e),(function(n){return t(new ek(e,n))}),r)}function nk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Qg("arrayUnion",t)}function rk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Yg("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){fo=e}(ot),Ze(new ce("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new xg(new Co(e.getProvider("auth-internal")),new Po(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new xo(_o.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vu(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),ht(co,"4.0.0",e),ht(co,"4.0.0","esm2017")}();function ik(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new xo("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function ak(){if("undefined"===typeof Uint8Array)throw new xo("unimplemented","Uint8Arrays are not available in this environment.")}function ok(){if("undefined"==typeof atob)throw new xo("unimplemented","Blobs are unavailable in Firestore in this environment.")}var sk=function(){function e(t){v(this,e),this._delegate=t}return g(e,[{key:"toBase64",value:function(){return ok(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return ak(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return ok(),new e(Dg.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return ak(),new e(Dg.fromUint8Array(t))}}]),e}();function uk(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=y(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var ck=function(){function e(){v(this,e)}return g(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){Pg(e=ug(e,xg));var n=Ig(e);if(n._uninitializedComponentsProvider)throw new xo(_o.FAILED_PRECONDITION,"SDK cache is already specified.");go("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new Am;return Sg(n,i,new Cm(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){Pg(e=ug(e,xg));var t=Ig(e);if(t._uninitializedComponentsProvider)throw new xo(_o.FAILED_PRECONDITION,"SDK cache is already specified.");go("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new Am;return Sg(t,r,new Nm(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new xo(_o.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Io;return e._queue.enqueueAndForgetEvenWhileRestricted(ue(ie().mark((function n(){return ie().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=ue(ie().mark((function e(t){var n;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(os.v()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,os.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(_d(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),lk=function(){function e(t,n,r){var i=this;v(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof vu||(this._appCompat=t)}return g(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||go("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};hg(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return Cg(this._delegate)}},{key:"disableNetwork",value:function(){return Ng(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&ig("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return Tg(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return Qy(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new xo("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new Ik(this,mg(this._delegate,e))}catch(t){throw mk(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new vk(this,gg(this._delegate,e))}catch(t){throw mk(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new wk(this,function(e,t){if(e=ug(e,fg),rg("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new xo(_o.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new dg(e,null,function(e){return new yc(zo.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw mk(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return tk(this._delegate,(function(n){return e(new hk(t,n))}))}},{key:"batch",value:function(){var e=this;return Ig(this._delegate),new dk(new Jy(this._delegate,(function(t){return Yy(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return Ag(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return Rg(this._delegate,e).then((function(e){return e?new wk(t,e):null}))}}]),e}(),fk=function(e){w(n,e);var t=I(n);function n(e){var r;return v(this,n),(r=t.call(this)).firestore=e,r}return g(n,[{key:"convertBytes",value:function(e){return new sk(new Dg(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return vk.forKey(t,this.firestore,null)}}]),n}(Ry);var hk=function(){function e(t,n){v(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new fk(t)}return g(e,[{key:"get",value:function(e){var t=this,n=Ek(e);return this._delegate.get(n).then((function(e){return new kk(t._firestore,new Ly(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=Ek(e);return n?(ik("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=Ek(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Ek(e);return this._delegate.delete(t),this}}]),e}(),dk=function(){function e(t){v(this,e),this._delegate=t}return g(e,[{key:"set",value:function(e,t,n){var r=Ek(e);return n?(ik("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=Ek(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Ek(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),pk=function(){function e(t,n,r){v(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return g(e,[{key:"fromFirestore",value:function(e,t){var n=new My(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new bk(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new fk(t),n),i.set(n,a)),a}}]),e}();pk.INSTANCES=new WeakMap;var vk=function(){function e(t,n){v(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new fk(t)}return g(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new Ik(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new Ik(this.firestore,mg(this._delegate,e))}catch(t){throw mk(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=re(e))instanceof pg&&yg(this._delegate,e)}},{key:"set",value:function(e,t){t=ik("DocumentReference.set",t);try{return t?Ky(this._delegate,e,t):Ky(this._delegate,e)}catch(n){throw mk(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Hy(this._delegate,e):Hy.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw mk(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return Yy(ug((e=this._delegate).firestore,xg),[new Cl(e._key,dl.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=gk(n),a=yk(n,(function(t){return new kk(e.firestore,new Ly(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Wy(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?zy(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=ug(e,pg);var t=ug(e.firestore,xg);return Zm(Ig(t),e._key,{source:"server"}).then((function(n){return $y(t,e,n)}))}(this._delegate):function(e){e=ug(e,pg);var t=ug(e.firestore,xg);return Zm(Ig(t),e._key).then((function(n){return $y(t,e,n)}))}(this._delegate)).then((function(e){return new kk(t.firestore,new Ly(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(pk.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new xo("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new pg(n._delegate,r,new Go(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new pg(n._delegate,r,t))}}]),e}();function mk(e,t,n){return e.message=e.message.replace(t,n),e}function gk(e){var t,n=y(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!uk(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function yk(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=uk(e[0])?e[0]:uk(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var kk=function(){function e(t,n){v(this,e),this._firestore=t,this._delegate=n}return g(e,[{key:"ref",get:function(){return new vk(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return Uy(this._delegate,e._delegate)}}]),e}(),bk=function(e){w(n,e);var t=I(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return void 0!==t||ko(),t}}]),n}(kk),wk=function(){function e(t,n){v(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new fk(t)}return g(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,vy(this._delegate,function(e,t,n){var r=t,i=fy("where",e);return my._create(i,r,n)}(t,n,r)))}catch(i){throw mk(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,vy(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=fy("orderBy",e);return yy._create(n,t)}(t,n)))}catch(r){throw mk(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,vy(this._delegate,(cg("limit",n=t),ky._create("limit",n,"F"))))}catch(n){throw mk(n,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,vy(this._delegate,(cg("limitToLast",n=t),ky._create("limitToLast",n,"L"))))}catch(n){throw mk(n,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,vy(this._delegate,wy.apply(void 0,arguments)))}catch(t){throw mk(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,vy(this._delegate,_y.apply(void 0,arguments)))}catch(t){throw mk(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,vy(this._delegate,Iy.apply(void 0,arguments)))}catch(t){throw mk(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,vy(this._delegate,Ey.apply(void 0,arguments)))}catch(t){throw mk(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return kg(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?qy(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?Gy(this._delegate):By(this._delegate)).then((function(e){return new xk(t.firestore,new Fy(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=gk(n),a=yk(n,(function(t){return new xk(e.firestore,new Fy(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Wy(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(pk.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),_k=function(){function e(t,n){v(this,e),this._firestore=t,this._delegate=n}return g(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new bk(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),xk=function(){function e(t,n){v(this,e),this._firestore=t,this._delegate=n}return g(e,[{key:"query",get:function(){return new wk(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new bk(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new _k(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new bk(n._firestore,r))}))}},{key:"isEqual",value:function(e){return Uy(this._delegate,e._delegate)}}]),e}(),Ik=function(e){w(n,e);var t=I(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return g(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new vk(this.firestore,e):null}},{key:"doc",value:function(e){try{return new vk(this.firestore,void 0===e?gg(this._delegate):gg(this._delegate,e))}catch(t){throw mk(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=ug(e.firestore,xg),r=gg(e),i=Py(e.converter,t);return Yy(n,[Gg(qg(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,dl.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new vk(t.firestore,e)}))}},{key:"isEqual",value:function(e){return yg(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(pk.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(wk);function Ek(e){return ug(e,pg)}var Sk,Tk=function(){function e(){v(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=E(Og,n)}return g(e,[{key:"isEqual",value:function(e){return(e=re(e))instanceof Og&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(qo.keyField().canonicalString())}}]),e}(),Ck=function(){function e(t){v(this,e),this._delegate=t}return g(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Wg("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new Kg("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=nk.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=rk.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new $g("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),Nk={Firestore:lk,GeoPoint:Mg,Timestamp:jo,Blob:sk,Transaction:hk,WriteBatch:dk,DocumentReference:vk,DocumentSnapshot:kk,Query:wk,QueryDocumentSnapshot:bk,QuerySnapshot:xk,CollectionReference:Ik,FieldPath:Tk,FieldValue:Ck,setLogLevel:function(e){var t;t=e,ho.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new ce("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Nk)))})(Sk=jt,(function(e,t){return new lk(e,t,new ck)})),Sk.registerVersion("@firebase/firestore-compat","0.3.13");function Ak(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var Rk,Pk={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Dk="EMAIL_SIGNIN",Ok="PASSWORD_RESET",Lk="RECOVER_EMAIL",Mk="REVERT_SECOND_FACTOR_ADDITION",Fk="VERIFY_AND_CHANGE_EMAIL",jk="VERIFY_EMAIL";function Uk(){return p({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Vk=function(){var e;return p(e={},"admin-restricted-operation","This operation is restricted to administrators only."),p(e,"argument-error",""),p(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),p(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),p(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),p(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),p(e,"cordova-not-ready","Cordova framework is not ready."),p(e,"cors-unsupported","This browser is not supported."),p(e,"credential-already-in-use","This credential is already associated with a different user account."),p(e,"custom-token-mismatch","The custom token corresponds to a different audience."),p(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),p(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),p(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),p(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),p(e,"email-already-in-use","The email address is already in use by another account."),p(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),p(e,"expired-action-code","The action code has expired."),p(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),p(e,"internal-error","An internal AuthError has occurred."),p(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),p(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),p(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),p(e,"invalid-auth-event","An internal AuthError has occurred."),p(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),p(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),p(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),p(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),p(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),p(e,"invalid-email","The email address is badly formatted."),p(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),p(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),p(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),p(e,"invalid-credential","The supplied auth credential is malformed or has expired."),p(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),p(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),p(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),p(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),p(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),p(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),p(e,"wrong-password","The password is invalid or the user does not have a password."),p(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),p(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),p(e,"invalid-provider-id","The specified provider ID is invalid."),p(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),p(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),p(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),p(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),p(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),p(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),p(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),p(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),p(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),p(e,"missing-continue-uri","A continue URL must be provided in the request."),p(e,"missing-iframe-start","An internal AuthError has occurred."),p(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),p(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),p(e,"missing-password","A non-empty password must be provided"),p(e,"missing-multi-factor-info","No second factor identifier is provided."),p(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),p(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),p(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),p(e,"app-deleted","This instance of FirebaseApp has been deleted."),p(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),p(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),p(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),p(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),p(e,"no-auth-event","An internal AuthError has occurred."),p(e,"no-such-provider","User was not linked to an account with the given provider."),p(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),p(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),p(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),p(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),p(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),p(e,"provider-already-linked","User can only be linked to one identity for the given provider."),p(e,"quota-exceeded","The project's quota for this operation has been exceeded."),p(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),p(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),p(e,"rejected-credential","The request contains malformed or mismatching credentials."),p(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),p(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),p(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),p(e,"timeout","The operation has timed out."),p(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),p(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),p(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),p(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),p(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),p(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),p(e,"unverified-email","The operation requires a verified email."),p(e,"user-cancelled","The user did not grant your application the permissions it requested."),p(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),p(e,"user-disabled","The user account has been disabled by an administrator."),p(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),p(e,"user-signed-out",""),p(e,"weak-password","The password must be 6 characters long or more."),p(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),p(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),p(e,"missing-recaptcha-token","The reCAPTCHA token is missing when sending request to the backend."),p(e,"invalid-recaptcha-token","The reCAPTCHA token is invalid when sending request to the backend."),p(e,"invalid-recaptcha-action","The reCAPTCHA action is invalid when sending request to the backend."),p(e,"recaptcha-not-enabled","reCAPTCHA Enterprise integration is not enabled for this project."),p(e,"missing-client-type","The reCAPTCHA client type is missing when sending request to the backend."),p(e,"missing-recaptcha-version","The reCAPTCHA version is missing when sending request to the backend."),p(e,"invalid-req-type","Invalid request parameters."),p(e,"invalid-recaptcha-version","The reCAPTCHA version is invalid when sending request to the backend."),e},zk=Uk,Bk=new K("auth","Firebase",Uk()),qk=new we("@firebase/auth");function Gk(e){if(qk.logLevel<=pe.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];qk.warn.apply(qk,["Auth (".concat(ot,"): ").concat(e)].concat(n))}}function Kk(e){if(qk.logLevel<=pe.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];qk.error.apply(qk,["Auth (".concat(ot,"): ").concat(e)].concat(n))}}function Hk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw $k.apply(void 0,[e].concat(n))}function Wk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $k.apply(void 0,[e].concat(n))}function Qk(e,t,n){var r=Object.assign(Object.assign({},zk()),p({},t,n));return new K("auth","Firebase",r).create(t,{appName:e.name})}function Yk(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Hk(e,"argument-error"),Qk(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function $k(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=oe(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(oe(o)))}return Bk.create.apply(Bk,[e].concat(n))}function Xk(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw $k.apply(void 0,[t].concat(r))}}function Jk(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Kk(t),new Error(t)}function Zk(e,t){e||Jk(t)}function eb(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function tb(){return"http:"===nb()||"https:"===nb()}function nb(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var rb=function(){function e(t,n){v(this,e),this.shortDelay=t,this.longDelay=n,Zk(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(j())||z()}return g(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(tb()||V()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function ib(e,t){Zk(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var ab=function(){function e(){v(this,e)}return g(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Jk("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Jk("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Jk("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),ob=(p(Rk={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),p(Rk,"MISSING_CUSTOM_TOKEN","internal-error"),p(Rk,"INVALID_IDENTIFIER","invalid-email"),p(Rk,"MISSING_CONTINUE_URI","internal-error"),p(Rk,"INVALID_PASSWORD","wrong-password"),p(Rk,"MISSING_PASSWORD","missing-password"),p(Rk,"EMAIL_EXISTS","email-already-in-use"),p(Rk,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),p(Rk,"INVALID_IDP_RESPONSE","invalid-credential"),p(Rk,"INVALID_PENDING_TOKEN","invalid-credential"),p(Rk,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),p(Rk,"MISSING_REQ_TYPE","internal-error"),p(Rk,"EMAIL_NOT_FOUND","user-not-found"),p(Rk,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),p(Rk,"EXPIRED_OOB_CODE","expired-action-code"),p(Rk,"INVALID_OOB_CODE","invalid-action-code"),p(Rk,"MISSING_OOB_CODE","internal-error"),p(Rk,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),p(Rk,"INVALID_ID_TOKEN","invalid-user-token"),p(Rk,"TOKEN_EXPIRED","user-token-expired"),p(Rk,"USER_NOT_FOUND","user-token-expired"),p(Rk,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),p(Rk,"INVALID_CODE","invalid-verification-code"),p(Rk,"INVALID_SESSION_INFO","invalid-verification-id"),p(Rk,"INVALID_TEMPORARY_PROOF","invalid-credential"),p(Rk,"MISSING_SESSION_INFO","missing-verification-id"),p(Rk,"SESSION_EXPIRED","code-expired"),p(Rk,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),p(Rk,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),p(Rk,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),p(Rk,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),p(Rk,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),p(Rk,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),p(Rk,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),p(Rk,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),p(Rk,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),p(Rk,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),p(Rk,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),p(Rk,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),p(Rk,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),p(Rk,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),p(Rk,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),p(Rk,"MISSING_CLIENT_TYPE","missing-client-type"),p(Rk,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),p(Rk,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),p(Rk,"INVALID_REQ_TYPE","invalid-req-type"),Rk),sb=new rb(3e4,6e4);function ub(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function cb(e,t,n,r){return lb.apply(this,arguments)}function lb(){return lb=ue(ie().mark((function e(t,n,r,i){var a,o=arguments;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",fb(t,a,ue(ie().mark((function e(){var a,o,s,u;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=X(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",ab.fetch()(vb(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),lb.apply(this,arguments)}function fb(e,t,n){return hb.apply(this,arguments)}function hb(){return hb=ue(ie().mark((function e(t,n,r){var i,a,o,s,u,l,f,h,d,p;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},ob),n),e.prev=2,a=new mb(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw gb(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(u=o.ok?s.errorMessage:s.error.message,l=u.split(" : "),f=c(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw gb(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw gb(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw gb(t,"user-disabled",s);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw Qk(t,p,d);case 34:Hk(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof G)){e.next=41;break}throw e.t0;case 41:Hk(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),hb.apply(this,arguments)}function db(e,t,n,r){return pb.apply(this,arguments)}function pb(){return pb=ue(ie().mark((function e(t,n,r,i){var a,o,s=arguments;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,cb(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Hk(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),pb.apply(this,arguments)}function vb(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?ib(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var mb=function(){function e(t){var n=this;v(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Wk(n.auth,"network-request-failed"))}),sb.get())}))}return g(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function gb(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Wk(e,t,r);return i.customData._tokenResponse=n,i}function yb(e,t){return kb.apply(this,arguments)}function kb(){return kb=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cb(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),kb.apply(this,arguments)}function bb(e,t){return wb.apply(this,arguments)}function wb(){return wb=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cb(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),wb.apply(this,arguments)}function _b(e,t){return xb.apply(this,arguments)}function xb(){return xb=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cb(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),xb.apply(this,arguments)}function Ib(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Eb(){return Eb=ue(ie().mark((function e(t){var n,r,i,a,o,s,u=arguments;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=re(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Xk((a=Tb(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Ib(Sb(a.auth_time)),issuedAtTime:Ib(Sb(a.iat)),expirationTime:Ib(Sb(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Eb.apply(this,arguments)}function Sb(e){return 1e3*Number(e)}function Tb(e){var t=c(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Kk("JWT malformed, contained fewer than 3 sections"),null;try{var a=R(r);return a?JSON.parse(a):(Kk("Failed to decode base64 JWT payload"),null)}catch(o){return Kk("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function Cb(e,t){return Nb.apply(this,arguments)}function Nb(){return Nb=ue(ie().mark((function e(t,n){var r=arguments;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof G&&Ab(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Nb.apply(this,arguments)}function Ab(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Rb=function(){function e(t){v(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return g(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(ue(ie().mark((function t(){return ie().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=ue(ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Pb=function(){function e(t,n){v(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return g(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Ib(this.lastLoginAt),this.creationTime=Ib(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Db(e){return Ob.apply(this,arguments)}function Ob(){return Ob=ue(ie().mark((function e(t){var n,r,i,a,o,s,u,c,l,f,h;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Cb(t,_b(r,{idToken:i}));case 6:Xk(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=Ak(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],u=Mb(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Pb(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Ob.apply(this,arguments)}function Lb(){return(Lb=ue(ie().mark((function e(t){var n;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=re(t),e.next=3,Db(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mb(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(oe(n),oe(t))}function Fb(e,t){return jb.apply(this,arguments)}function jb(){return jb=ue(ie().mark((function e(t,n){var r;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fb(t,{},ue(ie().mark((function e(){var r,i,a,o,s,u;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=X({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=vb(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",ab.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),jb.apply(this,arguments)}var Ub=function(){function e(){v(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return g(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Xk(e.idToken,"internal-error"),Xk("undefined"!==typeof e.idToken,"internal-error"),Xk("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Tb(e);return Xk(t,"internal-error"),Xk("undefined"!==typeof t.exp,"internal-error"),Xk("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=ue(ie().mark((function e(t){var n,r=arguments;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Xk(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=ue(ie().mark((function e(t,n){var r,i,a,o;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fb(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Jk("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Xk("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Xk("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Xk("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Vb(e,t){Xk("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var zb=function(){function e(t){v(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Ak(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?oe(a.providerData):[],this.metadata=new Pb(a.createdAt||void 0,a.lastLoginAt||void 0)}return g(e,[{key:"getIdToken",value:function(){var e=ue(ie().mark((function e(t){var n;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cb(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Xk(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Eb.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Lb.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Xk(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){Xk(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=ue(ie().mark((function e(t){var n,r,i=arguments;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Db(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=ue(ie().mark((function e(){var t;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Cb(this,yb(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,g=null!==(c=n.createdAt)&&void 0!==c?c:void 0,y=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;Xk(k&&x,t,"internal-error");var I=Ub.fromJSON(this.name,x);Xk("string"===typeof k,t,"internal-error"),Vb(f,t.name),Vb(h,t.name),Xk("boolean"===typeof b,t,"internal-error"),Xk("boolean"===typeof w,t,"internal-error"),Vb(d,t.name),Vb(p,t.name),Vb(v,t.name),Vb(m,t.name),Vb(g,t.name),Vb(y,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(E.providerData=_.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=ue(ie().mark((function t(n,r){var i,a,o,s=arguments;return ie().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new Ub).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Db(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Bb=new Map;function qb(e){Zk(e instanceof Function,"Expected a class definition");var t=Bb.get(e);return t?(Zk(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Bb.set(e,t),t)}var Gb=function(){function e(){v(this,e),this.type="NONE",this.storage={}}return g(e,[{key:"_isAvailable",value:function(){var e=ue(ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ue(ie().mark((function e(t){var n;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ue(ie().mark((function e(t){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Gb.type="NONE";var Kb=Gb;function Hb(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Wb=function(){function e(t,n,r){v(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Hb(this.userKey,a.apiKey,o),this.fullPersistenceKey=Hb("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return g(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=ue(ie().mark((function e(){var t;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?zb._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=ue(ie().mark((function e(t){var n;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=ue(ie().mark((function t(n,r){var i,a,o,s,u,c,l,f,h,d,p,v=arguments;return ie().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(qb(Kb),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=ue(ie().mark((function e(t){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||qb(Kb),s=Hb(i,n.config.apiKey,n.name),u=null,c=y(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(s);case 17:if(!(h=t.sent)){t.next=23;break}return d=zb._fromJSON(n,h),f!==o&&(u=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=ue(ie().mark((function e(t){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Qb(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Jb(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Yb(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ew(t))return"Blackberry";if(tw(t))return"Webos";if($b(t))return"Safari";if((t.includes("chrome/")||Xb(t))&&!t.includes("edge/"))return"Chrome";if(Zb(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Yb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/firefox\//i.test(e)}function $b(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:j()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Xb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/crios\//i.test(e)}function Jb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/iemobile/i.test(e)}function Zb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/android/i.test(e)}function ew(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/blackberry/i.test(e)}function tw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/webos/i.test(e)}function nw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function rw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return nw(e)||Zb(e)||tw(e)||ew(e)||/windows phone/i.test(e)||Jb(e)}function iw(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Qb(j());break;case"Worker":t="".concat(Qb(j()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(ot,"/").concat(r)}function aw(e){return ow.apply(this,arguments)}function ow(){return ow=ue(ie().mark((function e(t){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cb(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),ow.apply(this,arguments)}function sw(e,t){return uw.apply(this,arguments)}function uw(){return uw=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cb(t,"GET","/v2/recaptchaConfig",ub(t,n)));case 1:case"end":return e.stop()}}),e)}))),uw.apply(this,arguments)}function cw(e){return void 0!==e&&void 0!==e.getResponse}function lw(e){return void 0!==e&&void 0!==e.enterprise}var fw=g((function e(t){if(v(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function hw(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Wk("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function dw(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var pw=function(){function e(t){v(this,e),this.type="recaptcha-enterprise",this.auth=kw(t)}return g(e,[{key:"verify",value:function(){var e=ue(ie().mark((function e(){var t,n,r,i,a,o=this,s=arguments;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;lw(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=ue(ie().mark((function e(t){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=ue(ie().mark((function e(n,r){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:sw(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new fw(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=s.length>0&&void 0!==s[0]?s[0]:"verify",n=s.length>1&&void 0!==s[1]&&s[1],e.abrupt("return",new Promise((function(e,t){r(o.auth).then((function(r){if(!n&&lw(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));hw("https://www.google.com/recaptcha/enterprise.js?render="+r).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function vw(e,t,n){return mw.apply(this,arguments)}function mw(){return mw=ue(ie().mark((function e(t,n,r){var i,a,o,s,u=arguments;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.length>3&&void 0!==u[3]&&u[3],a=new pw(t),e.prev=2,e.next=5,a.verify(r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:o=e.sent;case 13:return s=Object.assign({},n),i?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",s);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),mw.apply(this,arguments)}var gw=function(){function e(t){v(this,e),this.auth=t,this.queue=[]}return g(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=ue(ie().mark((function e(t){var n,r,i,a,o,s,u;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=y(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=y(n);try{for(o.s();!(s=o.n()).done;){u=s.value;try{u()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),yw=function(){function e(t,n,r,i){v(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bw(this),this.idTokenSubscription=new bw(this),this.beforeStateQueue=new gw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Bk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return g(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=qb(t)),this._initializationPromise=this.queue(ue(ie().mark((function r(){var i,a;return ie().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Wb.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=ue(ie().mark((function e(){var t;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=ue(ie().mark((function e(t){var n,r,i,a,o,s,u;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:u=e.sent,o&&o!==s||!(null===u||void 0===u?void 0:u.user)||(i=u.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Xk(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=ue(ie().mark((function e(t){var n;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=ue(ie().mark((function e(t){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Db(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=ue(ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=ue(ie().mark((function e(t){var n;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?re(t):null)&&Xk(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=ue(ie().mark((function e(t){var n,r=this,i=arguments;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Xk(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(ue(ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=ue(ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(ue(ie().mark((function n(){return ie().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(qb(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"initializeRecaptchaConfig",value:function(){var e=ue(ie().mark((function e(){var t,n;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sw(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"});case 2:t=e.sent,n=new fw(t),null==this.tenantId?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new pw(this).verify();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new K("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=ue(ie().mark((function e(t,n){var r;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=ue(ie().mark((function e(t){var n;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Xk(n=t&&qb(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Wb.create(this,[qb(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=ue(ie().mark((function e(t){var n,r;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(ue(ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=ue(ie().mark((function e(t){var n=this;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(ue(ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Xk(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=ue(ie().mark((function e(t){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Xk(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=iw(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=ue(ie().mark((function e(){var t,n,r,i;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=ue(ie().mark((function e(){var t,n;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&Gk("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function kw(e){return re(e)}var bw=function(){function e(t){var n=this;v(this,e),this.auth=t,this.observer=null,this.addObserver=ee((function(e){return n.observer=e}))}return g(e,[{key:"next",get:function(){return Xk(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function ww(e,t,n){var r=kw(e);Xk(r._canInitEmulator,r,"emulator-config-failed"),Xk(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=_w(t),o=function(e){var t=_w(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:xw(r.substr(a.length+1))}}var o=c(r.split(":"),2);return{host:o[0],port:xw(o[1])}}(t),s=o.host,u=o.port,l=null===u?"":":".concat(u);r.config.emulator={url:"".concat(a,"//").concat(s).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function _w(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function xw(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Iw=function(){function e(t,n){v(this,e),this.providerId=t,this.signInMethod=n}return g(e,[{key:"toJSON",value:function(){return Jk("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Jk("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Jk("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Jk("not implemented")}}]),e}();function Ew(e,t){return Sw.apply(this,arguments)}function Sw(){return Sw=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cb(t,"POST","/v1/accounts:resetPassword",ub(t,n)));case 1:case"end":return e.stop()}}),e)}))),Sw.apply(this,arguments)}function Tw(e,t){return Cw.apply(this,arguments)}function Cw(){return Cw=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cb(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Cw.apply(this,arguments)}function Nw(e,t){return Aw.apply(this,arguments)}function Aw(){return Aw=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cb(t,"POST","/v1/accounts:update",ub(t,n)));case 1:case"end":return e.stop()}}),e)}))),Aw.apply(this,arguments)}function Rw(e,t){return Pw.apply(this,arguments)}function Pw(){return Pw=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",db(t,"POST","/v1/accounts:signInWithPassword",ub(t,n)));case 1:case"end":return e.stop()}}),e)}))),Pw.apply(this,arguments)}function Dw(e,t){return Ow.apply(this,arguments)}function Ow(){return Ow=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cb(t,"POST","/v1/accounts:sendOobCode",ub(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ow.apply(this,arguments)}function Lw(e,t){return Mw.apply(this,arguments)}function Mw(){return Mw=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Dw(t,n));case 1:case"end":return e.stop()}}),e)}))),Mw.apply(this,arguments)}function Fw(e,t){return jw.apply(this,arguments)}function jw(){return jw=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Dw(t,n));case 1:case"end":return e.stop()}}),e)}))),jw.apply(this,arguments)}function Uw(e,t){return Vw.apply(this,arguments)}function Vw(){return Vw=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Dw(t,n));case 1:case"end":return e.stop()}}),e)}))),Vw.apply(this,arguments)}function zw(e,t){return Bw.apply(this,arguments)}function Bw(){return Bw=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Dw(t,n));case 1:case"end":return e.stop()}}),e)}))),Bw.apply(this,arguments)}function qw(e,t){return Gw.apply(this,arguments)}function Gw(){return Gw=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",db(t,"POST","/v1/accounts:signInWithEmailLink",ub(t,n)));case 1:case"end":return e.stop()}}),e)}))),Gw.apply(this,arguments)}function Kw(e,t){return Hw.apply(this,arguments)}function Hw(){return Hw=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",db(t,"POST","/v1/accounts:signInWithEmailLink",ub(t,n)));case 1:case"end":return e.stop()}}),e)}))),Hw.apply(this,arguments)}var Ww=function(e){w(n,e);var t=I(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return v(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return g(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=ue(ie().mark((function e(t){var n,r,i;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,vw(t,r,"signInWithPassword");case 7:return i=e.sent,e.abrupt("return",Rw(t,i));case 11:return e.abrupt("return",Rw(t,r).catch(function(){var e=ue(ie().mark((function e(n){var i;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,vw(t,r,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",Rw(t,i));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",qw(t,{email:this._email,oobCode:this._password}));case 13:Hk(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Tw(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Kw(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Hk(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Iw);function Qw(e,t){return Yw.apply(this,arguments)}function Yw(){return Yw=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",db(t,"POST","/v1/accounts:signInWithIdp",ub(t,n)));case 1:case"end":return e.stop()}}),e)}))),Yw.apply(this,arguments)}var $w=function(e){w(n,e);var t=I(n);function n(){var e;return v(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return g(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Qw(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Qw(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Qw(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=X(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Hk("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Ak(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Iw);function Xw(e,t){return Jw.apply(this,arguments)}function Jw(){return Jw=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cb(t,"POST","/v1/accounts:sendVerificationCode",ub(t,n)));case 1:case"end":return e.stop()}}),e)}))),Jw.apply(this,arguments)}function Zw(){return Zw=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",db(t,"POST","/v1/accounts:signInWithPhoneNumber",ub(t,n)));case 1:case"end":return e.stop()}}),e)}))),Zw.apply(this,arguments)}function e_(){return e_=ue(ie().mark((function e(t,n){var r;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,db(t,"POST","/v1/accounts:signInWithPhoneNumber",ub(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw gb(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),e_.apply(this,arguments)}var t_=p({},"USER_NOT_FOUND","user-not-found");function n_(){return n_=ue(ie().mark((function e(t,n){var r;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",db(t,"POST","/v1/accounts:signInWithPhoneNumber",ub(t,r),t_));case 2:case"end":return e.stop()}}),e)}))),n_.apply(this,arguments)}var r_=function(e){w(n,e);var t=I(n);function n(e){var r;return v(this,n),(r=t.call(this,"phone","phone")).params=e,r}return g(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Zw.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return e_.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return n_.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Iw);var i_=function(){function e(t){var n,r,i,a,o,s;v(this,e);var u=J(Z(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);Xk(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return g(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=J(Z(e)).link,n=t?J(Z(t)).deep_link_id:null,r=J(Z(e)).deep_link_id;return(r?J(Z(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var a_=function(){function e(){v(this,e),this.providerId=e.PROVIDER_ID}return g(e,null,[{key:"credential",value:function(e,t){return Ww._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=i_.parseLink(t);return Xk(n,"argument-error"),Ww._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();a_.PROVIDER_ID="password",a_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",a_.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var o_=function(){function e(t){v(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return g(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),s_=function(e){w(n,e);var t=I(n);function n(){var e;return v(this,n),(e=t.apply(this,arguments)).scopes=[],e}return g(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return oe(this.scopes)}}]),n}(o_),u_=function(e){w(n,e);var t=I(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Xk(e.idToken||e.accessToken,"argument-error"),$w._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Xk("providerId"in t&&"signInMethod"in t,"argument-error"),$w._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!u)return null;try{return new n(u)._credential({idToken:r,accessToken:i,nonce:s,pendingToken:o})}catch(c){return null}}}]),n}(s_),c_=function(e){w(n,e);var t=I(n);function n(){return v(this,n),t.call(this,"facebook.com")}return g(n,null,[{key:"credential",value:function(e){return $w._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(s_);c_.FACEBOOK_SIGN_IN_METHOD="facebook.com",c_.PROVIDER_ID="facebook.com";var l_=function(e){w(n,e);var t=I(n);function n(){var e;return v(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return g(n,null,[{key:"credential",value:function(e,t){return $w._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(s_);l_.GOOGLE_SIGN_IN_METHOD="google.com",l_.PROVIDER_ID="google.com";var f_=function(e){w(n,e);var t=I(n);function n(){return v(this,n),t.call(this,"github.com")}return g(n,null,[{key:"credential",value:function(e){return $w._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(s_);f_.GITHUB_SIGN_IN_METHOD="github.com",f_.PROVIDER_ID="github.com";var h_=function(e){w(n,e);var t=I(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return g(n,[{key:"_getIdTokenResponse",value:function(e){return Qw(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Qw(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Qw(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Iw),d_=function(e){w(n,e);var t=I(n);function n(e){return v(this,n),Xk(e.startsWith("saml."),"argument-error"),t.call(this,e)}return g(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=h_.fromJSON(e);return Xk(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return h_._create(r,n)}catch(i){return null}}}]),n}(o_),p_=function(e){w(n,e);var t=I(n);function n(){return v(this,n),t.call(this,"twitter.com")}return g(n,null,[{key:"credential",value:function(e,t){return $w._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(s_);function v_(e,t){return m_.apply(this,arguments)}function m_(){return m_=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",db(t,"POST","/v1/accounts:signUp",ub(t,n)));case 1:case"end":return e.stop()}}),e)}))),m_.apply(this,arguments)}p_.TWITTER_SIGN_IN_METHOD="twitter.com",p_.PROVIDER_ID="twitter.com";var g_=function(){function e(t){v(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return g(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=ue(ie().mark((function t(n,r,i){var a,o,s,u,c=arguments;return ie().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,zb._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=y_(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=ue(ie().mark((function t(n,r,i){var a;return ie().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=y_(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function y_(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function k_(){return k_=ue(ie().mark((function e(t){var n,r,i,a;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=kw(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new g_({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,v_(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,g_._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),k_.apply(this,arguments)}var b_=function(e){w(n,e);var t=I(n);function n(e,r,i,a){var o,s;return v(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(k(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return g(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(G);function w_(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw b_._fromErrorAndOperation(e,n,t,r);throw n}))}function __(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function x_(e,t){return I_.apply(this,arguments)}function I_(){return I_=ue(ie().mark((function e(t,n){var r,i,a,o;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=re(t),e.next=3,T_(!0,r,n);case 3:return e.t0=bb,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=__(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),I_.apply(this,arguments)}function E_(e,t){return S_.apply(this,arguments)}function S_(){return S_=ue(ie().mark((function e(t,n){var r,i,a=arguments;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Cb,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",g_._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),S_.apply(this,arguments)}function T_(e,t,n){return C_.apply(this,arguments)}function C_(){return(C_=ue(ie().mark((function e(t,n,r){var i,a;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Db(n);case 2:i=__(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Xk(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N_(e,t){return A_.apply(this,arguments)}function A_(){return A_=ue(ie().mark((function e(t,n){var r,i,a,o,s,u,c=arguments;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Cb(t,w_(i,a,n,t),r);case 6:return Xk((o=e.sent).idToken,i,"internal-error"),Xk(s=Tb(o.idToken),i,"internal-error"),u=s.sub,Xk(t.uid===u,i,"user-mismatch"),e.abrupt("return",g_._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Hk(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),A_.apply(this,arguments)}function R_(e,t){return P_.apply(this,arguments)}function P_(){return P_=ue(ie().mark((function e(t,n){var r,i,a,o,s=arguments;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,w_(t,i,n);case 4:return a=e.sent,e.next=7,g_._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),P_.apply(this,arguments)}function D_(e,t){return O_.apply(this,arguments)}function O_(){return O_=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R_(kw(t),n));case 1:case"end":return e.stop()}}),e)}))),O_.apply(this,arguments)}function L_(e,t){return M_.apply(this,arguments)}function M_(){return(M_=ue(ie().mark((function e(t,n){var r;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=re(t),e.next=3,T_(!1,r,n.providerId);case 3:return e.abrupt("return",E_(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F_(e,t){return j_.apply(this,arguments)}function j_(){return(j_=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N_(re(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U_(e,t){return V_.apply(this,arguments)}function V_(){return V_=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",db(t,"POST","/v1/accounts:signInWithCustomToken",ub(t,n)));case 1:case"end":return e.stop()}}),e)}))),V_.apply(this,arguments)}function z_(){return z_=ue(ie().mark((function e(t,n){var r,i,a;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=kw(t),e.next=3,U_(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,g_._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),z_.apply(this,arguments)}var B_=function(){function e(t,n){v(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return g(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?q_._fromServerResponse(e,t):"totpInfo"in t?G_._fromServerResponse(e,t):Hk(e,"internal-error")}}]),e}(),q_=function(e){w(n,e);var t=I(n);function n(e){var r;return v(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return g(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(B_),G_=function(e){w(n,e);var t=I(n);function n(e){return v(this,n),t.call(this,"totp",e)}return g(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(B_);function K_(e,t,n){var r;Xk((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Xk("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Xk(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Xk(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function H_(){return H_=ue(ie().mark((function e(t,n,r){var i,a,o,s;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=kw(t),o={requestType:"PASSWORD_RESET",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=11;break}return e.next=5,vw(a,o,"getOobCode",!0);case 5:return s=e.sent,r&&K_(a,s,r),e.next=9,Fw(a,s);case 9:e.next=14;break;case 11:return r&&K_(a,o,r),e.next=14,Fw(a,o).catch(function(){var e=ue(ie().mark((function e(t){var n;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow."),e.next=4,vw(a,o,"getOobCode",!0);case 4:return n=e.sent,r&&K_(a,n,r),e.next=8,Fw(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)}))),H_.apply(this,arguments)}function W_(){return W_=ue(ie().mark((function e(t,n,r){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ew(re(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),W_.apply(this,arguments)}function Q_(){return Q_=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nw(re(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),Q_.apply(this,arguments)}function Y_(e,t){return $_.apply(this,arguments)}function $_(){return $_=ue(ie().mark((function e(t,n){var r,i,a,o;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=re(t),e.next=3,Ew(r,{oobCode:n});case 3:i=e.sent,Xk(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Xk(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Xk(i.mfaInfo,r,"internal-error");case 13:Xk(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=B_._fromServerResponse(kw(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),$_.apply(this,arguments)}function X_(){return X_=ue(ie().mark((function e(t,n){var r,i;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y_(re(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),X_.apply(this,arguments)}function J_(e,t,n){return Z_.apply(this,arguments)}function Z_(){return Z_=ue(ie().mark((function e(t,n,r){var i,a,o,s,u,c,l;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=kw(t),o={returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=9;break}return e.next=5,vw(a,o,"signUpPassword");case 5:u=e.sent,s=v_(a,u),e.next=10;break;case 9:s=v_(a,o).catch(function(){var e=ue(ie().mark((function e(t){var n;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,vw(a,o,"signUpPassword");case 4:return n=e.sent,e.abrupt("return",v_(a,n));case 8:return e.abrupt("return",Promise.reject(t));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,s.catch((function(e){return Promise.reject(e)}));case 12:return c=e.sent,e.next=15,g_._fromIdTokenResponse(a,"signIn",c);case 15:return l=e.sent,e.next=18,a._updateCurrentUser(l.user);case 18:return e.abrupt("return",l);case 19:case"end":return e.stop()}}),e)}))),Z_.apply(this,arguments)}function ex(){return ex=ue(ie().mark((function e(t,n,r){var i,a,o,s,u;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=function(e,t){Xk(t.handleCodeInApp,a,"argument-error"),t&&K_(a,e,t)},a=kw(t),o={requestType:"EMAIL_SIGNIN",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=12;break}return e.next=6,vw(a,o,"getOobCode",!0);case 6:return u=e.sent,s(u,r),e.next=10,Uw(a,u);case 10:e.next=15;break;case 12:return s(o,r),e.next=15,Uw(a,o).catch(function(){var e=ue(ie().mark((function e(t){var n;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,vw(a,o,"getOobCode",!0);case 4:return n=e.sent,s(n,r),e.next=8,Uw(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}}),e)}))),ex.apply(this,arguments)}function tx(){return tx=ue(ie().mark((function e(t,n,r){var i,a;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=re(t),Xk((a=a_.credentialWithLink(n,r||eb()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",D_(i,a));case 4:case"end":return e.stop()}}),e)}))),tx.apply(this,arguments)}function nx(e,t){return rx.apply(this,arguments)}function rx(){return rx=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cb(t,"POST","/v1/accounts:createAuthUri",ub(t,n)));case 1:case"end":return e.stop()}}),e)}))),rx.apply(this,arguments)}function ix(){return ix=ue(ie().mark((function e(t,n){var r,i,a,o;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=tb()?eb():"http://localhost",i={identifier:n,continueUri:r},e.next=4,nx(re(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),ix.apply(this,arguments)}function ax(){return(ax=ue(ie().mark((function e(t,n){var r,i,a,o;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=re(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&K_(r.auth,a,n),e.next=8,Lw(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ox(){return(ox=ue(ie().mark((function e(t,n,r){var i,a,o,s;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=re(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&K_(i.auth,o,r),e.next=8,zw(i.auth,o);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sx(e,t){return ux.apply(this,arguments)}function ux(){return ux=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cb(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),ux.apply(this,arguments)}function cx(){return(cx=ue(ie().mark((function e(t,n){var r,i,a,o,s,u,c;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=re(t),e.next=6,a.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Cb(a,sx(a.auth,s));case 10:return u=e.sent,a.displayName=u.displayName||null,a.photoURL=u.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lx(e,t,n){return fx.apply(this,arguments)}function fx(){return fx=ue(ie().mark((function e(t,n,r){var i,a,o,s;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Cb(t,Tw(i,o));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)}))),fx.apply(this,arguments)}var hx=g((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};v(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),dx=function(e){w(n,e);var t=I(n);function n(e,r,i,a){var o;return v(this,n),(o=t.call(this,e,r,i)).username=a,o}return g(n)}(hx),px=function(e){w(n,e);var t=I(n);function n(e,r){return v(this,n),t.call(this,e,"facebook.com",r)}return g(n)}(hx),vx=function(e){w(n,e);var t=I(n);function n(e,r){return v(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return g(n)}(dx),mx=function(e){w(n,e);var t=I(n);function n(e,r){return v(this,n),t.call(this,e,"google.com",r)}return g(n)}(hx),gx=function(e){w(n,e);var t=I(n);function n(e,r,i){return v(this,n),t.call(this,e,"twitter.com",r,i)}return g(n)}(dx);function yx(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Tb(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new hx(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new px(a,i);case"github.com":return new vx(a,i);case"google.com":return new mx(a,i);case"twitter.com":return new gx(a,i,e.screenName||null);case"custom":case"anonymous":return new hx(a,null);default:return new hx(a,r,i)}}(n)}var kx=function(){function e(t,n,r){v(this,e),this.type=t,this.credential=n,this.user=r}return g(e,[{key:"toJSON",value:function(){return{multiFactorSession:p({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),bx=function(){function e(t,n,r){v(this,e),this.session=t,this.hints=n,this.signInResolver=r}return g(e,[{key:"resolveSignIn",value:function(){var e=ue(ie().mark((function e(t){var n;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=kw(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return B_._fromServerResponse(r,e)}));Xk(i.mfaPendingCredential,r,"internal-error");var o=kx._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=ue(ie().mark((function e(t){var a,s,u;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,s=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,g_._fromIdTokenResponse(r,n.operationType,s);case 11:return u=e.sent,e.next=14,r._updateCurrentUser(u.user);case 14:return e.abrupt("return",u);case 15:return Xk(n.user,r,"internal-error"),e.abrupt("return",g_._forOperation(n.user,n.operationType,s));case 17:Hk(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function wx(e,t){return cb(e,"POST","/v2/accounts/mfaEnrollment:start",ub(e,t))}function _x(e,t){return cb(e,"POST","/v2/accounts/mfaEnrollment:start",ub(e,t))}function xx(e,t){return cb(e,"POST","/v2/accounts/mfaEnrollment:finalize",ub(e,t))}function Ix(e,t){return cb(e,"POST","/v2/accounts/mfaEnrollment:withdraw",ub(e,t))}var Ex=function(){function e(t){var n=this;v(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return B_._fromServerResponse(t.auth,e)})))}))}return g(e,[{key:"getSession",value:function(){var e=ue(ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=kx,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=ue(ie().mark((function e(t,n){var r,i,a;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Cb(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=ue(ie().mark((function e(t){var n,r,i;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,Cb(this.user,Ix(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Sx=new WeakMap;var Tx="__sak",Cx=function(){function e(t,n){v(this,e),this.storageRetriever=t,this.type=n}return g(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Tx,"1"),this.storage.removeItem(Tx),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Nx=function(e){w(n,e);var t=I(n);function n(){var e;return v(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=j();return $b(e)||nw(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=rw(),e._shouldAllowMigration=!0,e}return g(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);B()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=ue(ie().mark((function e(t,r){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ut(_(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ue(ie().mark((function e(t){var r;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ut(_(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ue(ie().mark((function e(t){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ut(_(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Cx);Nx.type="LOCAL";var Ax=Nx,Rx=function(e){w(n,e);var t=I(n);function n(){return v(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return g(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Cx);Rx.type="SESSION";var Px=Rx;function Dx(e){return Promise.all(e.map(function(){var e=ue(ie().mark((function e(t){var n;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Ox=function(){function e(t){v(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return g(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=ue(ie().mark((function e(t){var n,r,i,a,o,s,u,c;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=ue(ie().mark((function e(t){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Dx(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Lx(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ox.receivers=[];var Mx=function(){function e(t){v(this,e),this.target=t,this.handlers=new Set}return g(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=ue(ie().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=Lx("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Fx(){return window}function jx(e){Fx().location.href=e}function Ux(){return"undefined"!==typeof Fx().WorkerGlobalScope&&"function"===typeof Fx().importScripts}function Vx(){return zx.apply(this,arguments)}function zx(){return(zx=ue(ie().mark((function e(){var t;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Bx(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var qx="firebaseLocalStorageDb",Gx="firebaseLocalStorage",Kx="fbase_key",Hx=function(){function e(t){v(this,e),this.request=t}return g(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Wx(e,t){return e.transaction([Gx],t?"readwrite":"readonly").objectStore(Gx)}function Qx(){var e=indexedDB.deleteDatabase(qx);return new Hx(e).toPromise()}function Yx(){var e=indexedDB.open(qx,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Gx,{keyPath:Kx})}catch(r){n(r)}})),e.addEventListener("success",ue(ie().mark((function n(){var r;return ie().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Gx)){n.next=12;break}return r.close(),n.next=5,Qx();case 5:return n.t0=t,n.next=8,Yx();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function $x(e,t,n){return Xx.apply(this,arguments)}function Xx(){return Xx=ue(ie().mark((function e(t,n,r){var i,a;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Wx(t,!0).put((p(i={},Kx,n),p(i,"value",r),i)),e.abrupt("return",new Hx(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Xx.apply(this,arguments)}function Jx(e,t){return Zx.apply(this,arguments)}function Zx(){return Zx=ue(ie().mark((function e(t,n){var r,i;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Wx(t,!1).get(n),e.next=3,new Hx(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Zx.apply(this,arguments)}function eI(e,t){var n=Wx(e,!0).delete(t);return new Hx(n).toPromise()}var tI=function(){function e(){v(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return g(e,[{key:"_openDb",value:function(){var e=ue(ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Yx();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=ue(ie().mark((function e(t){var n,r;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=ue(ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ux()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=ue(ie().mark((function e(){var t=this;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Ox._getInstance(Ux()?self:null),this.receiver._subscribe("keyChanged",function(){var e=ue(ie().mark((function e(n,r){var i;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=ue(ie().mark((function e(){var t,n,r;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vx();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Mx(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=ue(ie().mark((function e(t){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Bx()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=ue(ie().mark((function e(){var t;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Yx();case 5:return t=e.sent,e.next=8,$x(t,Tx,"1");case 8:return e.next=10,eI(t,Tx);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=ue(ie().mark((function e(t){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=ue(ie().mark((function e(t,n){var r=this;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(ue(ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return $x(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ue(ie().mark((function e(t){var n;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Jx(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ue(ie().mark((function e(t){var n=this;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(ue(ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return eI(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=ue(ie().mark((function e(){var t,n,r,i,a,o,s,u,c,l,f;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Wx(e,!1).getAll();return new Hx(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=y(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(ue(ie().mark((function t(){return ie().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();tI.type="LOCAL";var nI=tI;function rI(e,t){return cb(e,"POST","/v2/accounts/mfaSignIn:start",ub(e,t))}function iI(e,t){return cb(e,"POST","/v2/accounts/mfaSignIn:finalize",ub(e,t))}var aI=1e12,oI=function(){function e(t){v(this,e),this.auth=t,this.counter=aI,this._widgets=new Map}return g(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new sI(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||aI;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||aI;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=ue(ie().mark((function e(t){var n,r;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||aI,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),sI=function(){function e(t,n,r){var i=this;v(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Xk(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return g(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var uI=dw("rcb"),cI=new rb(3e4,6e4),lI=function(){function e(){var t;v(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=Fx().grecaptcha)||void 0===t?void 0:t.render)}return g(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Xk(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)&&cw(Fx().grecaptcha)?Promise.resolve(Fx().grecaptcha):new Promise((function(r,i){var a=Fx().setTimeout((function(){i(Wk(e,"network-request-failed"))}),cI.get());Fx()[uI]=function(){Fx().clearTimeout(a),delete Fx()[uI];var o=Fx().grecaptcha;if(o&&cw(o)){var s=o.render;o.render=function(e,n){var r=s(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Wk(e,"internal-error"))},hw("".concat("https://www.google.com/recaptcha/api.js?","?").concat(X({onload:uI,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Wk(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=Fx().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var fI=function(){function e(){v(this,e)}return g(e,[{key:"load",value:function(){var e=ue(ie().mark((function e(t){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new oI(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),hI="recaptcha",dI={theme:"light",type:"image"},pI=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},dI);v(this,e),this.parameters=r,this.type=hI,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=kw(t),this.isInvisible="invisible"===this.parameters.size,Xk("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof n?document.getElementById(n):n;Xk(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new fI:new lI,this.validateStartingState()}return g(e,[{key:"verify",value:function(){var e=ue(ie().mark((function e(){var t,n,r,i=this;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Xk(!this.parameters.sitekey,this.auth,"argument-error"),Xk(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Xk("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Fx()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Xk(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=ue(ie().mark((function e(){var t,n;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=ue(ie().mark((function e(){var t;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Xk(tb()&&!Ux(),this.auth,"internal-error"),e.next=3,vI();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,aw(this.auth);case 8:Xk(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Xk(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function vI(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var mI=function(){function e(t,n){v(this,e),this.verificationId=t,this.onConfirmation=n}return g(e,[{key:"confirm",value:function(e){var t=r_._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function gI(){return gI=ue(ie().mark((function e(t,n,r){var i,a;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=kw(t),e.next=3,wI(i,n,re(r));case 3:return a=e.sent,e.abrupt("return",new mI(a,(function(e){return D_(i,e)})));case 5:case"end":return e.stop()}}),e)}))),gI.apply(this,arguments)}function yI(e,t,n){return kI.apply(this,arguments)}function kI(){return(kI=ue(ie().mark((function e(t,n,r){var i,a;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=re(t),e.next=3,T_(!1,i,"phone");case 3:return e.next=5,wI(i.auth,n,re(r));case 5:return a=e.sent,e.abrupt("return",new mI(a,(function(e){return L_(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bI(){return(bI=ue(ie().mark((function e(t,n,r){var i,a;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=re(t),e.next=3,wI(i.auth,n,re(r));case 3:return a=e.sent,e.abrupt("return",new mI(a,(function(e){return F_(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wI(e,t,n){return _I.apply(this,arguments)}function _I(){return _I=ue(ie().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Xk("string"===typeof a,t,"argument-error"),Xk(r.type===hI,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return Xk("enroll"===s.type,t,"internal-error"),e.next=13,wx(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return Xk("signin"===s.type,t,"internal-error"),Xk(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,rI(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Xw(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),_I.apply(this,arguments)}function xI(){return(xI=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E_(re(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var II=function(){function e(t){v(this,e),this.providerId=e.PROVIDER_ID,this.auth=kw(t)}return g(e,[{key:"verifyPhoneNumber",value:function(e,t){return wI(this.auth,e,re(t))}}],[{key:"credential",value:function(e,t){return r_._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?r_._fromTokenResponse(n,r):null}}]),e}();function EI(e,t){return t?qb(t):(Xk(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}II.PROVIDER_ID="phone",II.PHONE_SIGN_IN_METHOD="phone";var SI=function(e){w(n,e);var t=I(n);function n(e){var r;return v(this,n),(r=t.call(this,"custom","custom")).params=e,r}return g(n,[{key:"_getIdTokenResponse",value:function(e){return Qw(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Qw(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Qw(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Iw);function TI(e){return R_(e.auth,new SI(e),e.bypassAuthState)}function CI(e){var t=e.auth,n=e.user;return Xk(n,t,"internal-error"),N_(n,new SI(e),e.bypassAuthState)}function NI(e){return AI.apply(this,arguments)}function AI(){return AI=ue(ie().mark((function e(t){var n,r;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Xk(r=t.user,n,"internal-error"),e.abrupt("return",E_(r,new SI(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),AI.apply(this,arguments)}var RI=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];v(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return g(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=ue(ie().mark((function t(n,r){return ie().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=ue(ie().mark((function e(t){var n,r,i,a,o,s,u;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return TI;case"linkViaPopup":case"linkViaRedirect":return NI;case"reauthViaPopup":case"reauthViaRedirect":return CI;default:Hk(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Zk(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Zk(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),PI=new rb(2e3,1e4);function DI(e,t,n){return OI.apply(this,arguments)}function OI(){return OI=ue(ie().mark((function e(t,n,r){var i,a,o;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=kw(t),Yk(t,n,o_),a=EI(i,r),o=new jI(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),OI.apply(this,arguments)}function LI(){return(LI=ue(ie().mark((function e(t,n,r){var i,a,o;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yk((i=re(t)).auth,n,o_),a=EI(i.auth,r),o=new jI(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function MI(e,t,n){return FI.apply(this,arguments)}function FI(){return(FI=ue(ie().mark((function e(t,n,r){var i,a,o;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yk((i=re(t)).auth,n,o_),a=EI(i.auth,r),o=new jI(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var jI=function(e){w(n,e);var t=I(n);function n(e,r,i,a,o){var s;return v(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=k(s),s}return g(n,[{key:"executeNotNull",value:function(){var e=ue(ie().mark((function e(){var t;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Xk(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=ue(ie().mark((function e(){var t,n=this;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zk(1===this.filter.length,"Popup operations only handle one event"),t=Lx(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Wk(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Wk(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Wk(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,PI.get())}()}}]),n}(RI);jI.currentPopupAction=null;var UI="pendingRedirect",VI=new Map,zI=function(e){w(n,e);var t=I(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return v(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return g(n,[{key:"execute",value:function(){var e=ue(ie().mark((function e(){var t,r;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=VI.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,BI(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Ut(_(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:VI.set(this.auth._key(),t);case 21:return this.bypassAuthState||VI.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=ue(ie().mark((function e(t){var r;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Ut(_(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Ut(_(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=ue(ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(RI);function BI(e,t){return qI.apply(this,arguments)}function qI(){return qI=ue(ie().mark((function e(t,n){var r,i,a;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=QI(n),i=WI(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),qI.apply(this,arguments)}function GI(e,t){return KI.apply(this,arguments)}function KI(){return KI=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",WI(t)._set(QI(n),"true"));case 1:case"end":return e.stop()}}),e)}))),KI.apply(this,arguments)}function HI(e,t){VI.set(e._key(),t)}function WI(e){return qb(e._redirectPersistence)}function QI(e){return Hb(UI,e.config.apiKey,e.name)}function YI(e,t,n){return function(e,t,n){return $I.apply(this,arguments)}(e,t,n)}function $I(){return $I=ue(ie().mark((function e(t,n,r){var i,a;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=kw(t),Yk(t,n,o_),e.next=4,i._initializationPromise;case 4:return a=EI(i,r),e.next=7,GI(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)}))),$I.apply(this,arguments)}function XI(e,t,n){return function(e,t,n){return JI.apply(this,arguments)}(e,t,n)}function JI(){return(JI=ue(ie().mark((function e(t,n,r){var i,a,o;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yk((i=re(t)).auth,n,o_),e.next=4,i.auth._initializationPromise;case 4:return a=EI(i.auth,r),e.next=7,GI(a,i.auth);case 7:return e.next=9,aE(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ZI(e,t,n){return function(e,t,n){return eE.apply(this,arguments)}(e,t,n)}function eE(){return(eE=ue(ie().mark((function e(t,n,r){var i,a,o;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yk((i=re(t)).auth,n,o_),e.next=4,i.auth._initializationPromise;case 4:return a=EI(i.auth,r),e.next=7,T_(!1,i,n.providerId);case 7:return e.next=9,GI(a,i.auth);case 9:return e.next=11,aE(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tE(e,t){return nE.apply(this,arguments)}function nE(){return nE=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kw(t)._initializationPromise;case 2:return e.abrupt("return",rE(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),nE.apply(this,arguments)}function rE(e,t){return iE.apply(this,arguments)}function iE(){return iE=ue(ie().mark((function e(t,n){var r,i,a,o,s,u=arguments;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=kw(t),a=EI(i,n),o=new zI(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),iE.apply(this,arguments)}function aE(e){return oE.apply(this,arguments)}function oE(){return(oE=ue(ie().mark((function e(t){var n;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Lx("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var sE=function(){function e(t){v(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return g(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cE(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!cE(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Wk(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(uE(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(uE(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function uE(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function cE(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function lE(e){return fE.apply(this,arguments)}function fE(){return fE=ue(ie().mark((function e(t){var n,r=arguments;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",cb(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),fE.apply(this,arguments)}var hE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dE=/^https?/;function pE(){return pE=ue(ie().mark((function e(t){var n,r,i,a,o;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,lE(t);case 4:n=e.sent,r=n.authorizedDomains,i=y(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!vE(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Hk(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),pE.apply(this,arguments)}function vE(e){var t=eb(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!dE.test(r))return!1;if(hE.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var mE=new rb(3e4,6e4);function gE(){var e=Fx().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=oe(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var yE=null;function kE(e){return yE=yE||function(e){return new Promise((function(t,n){var r,i,a;function o(){gE(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){gE(),n(Wk(e,"network-request-failed"))},timeout:mE.get()})}if(null===(i=null===(r=Fx().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Fx().gapi)||void 0===a?void 0:a.load)){var s=dw("iframefcb");return Fx()[s]=function(){gapi.load?o():n(Wk(e,"network-request-failed"))},hw("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw yE=null,e}))}(e),yE}var bE=new rb(5e3,15e3),wE="__/auth/iframe",_E="emulator/auth/iframe",xE={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},IE=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function EE(e){var t=e.config;Xk(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?ib(t,_E):"https://".concat(e.config.authDomain,"/").concat(wE),r={apiKey:t.apiKey,appName:e.name,v:ot},i=IE.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(X(r).slice(1))}function SE(e){return TE.apply(this,arguments)}function TE(){return TE=ue(ie().mark((function e(t){var n,r;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kE(t);case 2:return n=e.sent,Xk(r=Fx().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:EE(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xE,dontclear:!0},(function(e){return new Promise(function(){var n=ue(ie().mark((function n(r,i){var a,o,s;return ie().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){Fx().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Wk(t,"network-request-failed"),o=Fx().setTimeout((function(){i(a)}),bE.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),TE.apply(this,arguments)}var CE={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},NE=function(){function e(t){v(this,e),this.window=t,this.associatedEvent=null}return g(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function AE(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},CE),{width:r.toString(),height:i.toString(),top:a,left:o}),l=j().toLowerCase();n&&(s=Xb(l)?"_blank":n),Yb(l)&&(t=t||"http://localhost",u.scrollbars="yes");var f=Object.entries(u).reduce((function(e,t){var n=c(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return nw(arguments.length>0&&void 0!==arguments[0]?arguments[0]:j())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==s)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new NE(null);var h=window.open(t||"",s,f);Xk(h,e,"popup-blocked");try{h.focus()}catch(d){}return new NE(h)}var RE="__/auth/handler",PE="emulator/auth/handler",DE=encodeURIComponent("fac");function OE(e,t,n,r,i,a){return LE.apply(this,arguments)}function LE(){return LE=ue(ie().mark((function e(t,n,r,i,a,o){var s,u,l,f,h,d,p,v,m,g,y,k,b;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Xk(t.config.authDomain,t,"auth-domain-config-required"),Xk(t.config.apiKey,t,"invalid-api-key"),s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:ot,eventId:a},n instanceof o_)for(n.setDefaultLanguage(t.languageCode),s.providerId=n.providerId||"",Q(n.getCustomParameters())||(s.customParameters=JSON.stringify(n.getCustomParameters())),u=0,l=Object.entries(o||{});u<l.length;u++)f=c(l[u],2),h=f[0],d=f[1],s[h]=d;for(n instanceof s_&&(p=n.getScopes().filter((function(e){return""!==e}))).length>0&&(s.scopes=p.join(",")),t.tenantId&&(s.tid=t.tenantId),v=s,m=0,g=Object.keys(v);m<g.length;m++)y=g[m],void 0===v[y]&&delete v[y];return e.next=10,t._getAppCheckToken();case 10:return k=e.sent,b=k?"#".concat(DE,"=").concat(encodeURIComponent(k)):"",e.abrupt("return","".concat(ME(t),"?").concat(X(v).slice(1)).concat(b));case 13:case"end":return e.stop()}}),e)}))),LE.apply(this,arguments)}function ME(e){var t=e.config;return t.emulator?ib(t,PE):"https://".concat(t.authDomain,"/").concat(RE)}var FE="webStorageSupport",jE=function(){function e(){v(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Px,this._completeRedirectFn=rE,this._overrideRedirectResult=HI}return g(e,[{key:"_openPopup",value:function(){var e=ue(ie().mark((function e(t,n,r,i){var a,o;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zk(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,OE(t,n,r,eb(),i);case 3:return o=e.sent,e.abrupt("return",AE(t,o,Lx()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=ue(ie().mark((function e(t,n,r,i){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,OE(t,n,r,eb(),i);case 4:return jx(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Zk(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=ue(ie().mark((function e(t){var n,r;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,SE(t);case 2:return n=e.sent,r=new sE(t),n.register("authEvent",(function(e){return Xk(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(FE,{type:FE},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[FE];void 0!==i&&t(!!i),Hk(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return pE.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return rw()||$b()||nw()}}]),e}(),UE=jE,VE=function(){function e(t){v(this,e),this.factorId=t}return g(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Jk("unexpected MultiFactorSessionType")}}}]),e}(),zE=function(e){w(n,e);var t=I(n);function n(e){var r;return v(this,n),(r=t.call(this,"phone")).credential=e,r}return g(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return cb(e,"POST","/v2/accounts/mfaEnrollment:finalize",ub(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return cb(e,"POST","/v2/accounts/mfaSignIn:finalize",ub(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(VE),BE=function(){function e(){v(this,e)}return g(e,null,[{key:"assertion",value:function(e){return zE._fromCredential(e)}}]),e}();BE.FACTOR_ID="phone";var qE=function(){function e(){v(this,e)}return g(e,null,[{key:"assertionForEnrollment",value:function(e,t){return GE._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return GE._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=ue(ie().mark((function e(t){var n,r,i;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Xk("undefined"!==typeof(null===(n=(r=t).user)||void 0===n?void 0:n.auth),"internal-error"),e.next=4,_x(r.user.auth,{idToken:r.credential,totpEnrollmentInfo:{}});case 4:return i=e.sent,e.abrupt("return",KE._fromStartTotpMfaEnrollmentResponse(i,r.user.auth));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();qE.FACTOR_ID="totp";var GE=function(e){w(n,e);var t=I(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return g(n,[{key:"_finalizeEnroll",value:function(){var e=ue(ie().mark((function e(t,n,r){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Xk("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",xx(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=ue(ie().mark((function e(t,n){var r;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Xk(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",iI(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(VE),KE=function(){function e(t,n,r,i,a,o,s){v(this,e),this.sessionInfo=o,this.auth=s,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return g(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(HE(e)||HE(t))&&(r=!0),r&&(HE(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),HE(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function HE(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var WE="@firebase/auth",QE="1.0.0",YE=function(){function e(t){v(this,e),this.auth=t,this.internalListeners=new Map}return g(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=ue(ie().mark((function e(t){var n;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Xk(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var $E;!function(e){var t;null===(t=O())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function XE(){return window}$E="Browser",Ze(new ce("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,s=o.apiKey,u=o.authDomain;Xk(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:s,authDomain:u,clientPlatform:$E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:iw($E)},l=new yw(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(qb);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Ze(new ce("auth-internal",(function(e){return function(e){return new YE(e)}(kw(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),ht(WE,QE,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}($E)),ht(WE,QE,"esm2017");var JE=2e3;function ZE(e,t,n){return eS.apply(this,arguments)}function eS(){return eS=ue(ie().mark((function e(t,n,r){var i,a,o,s,u;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=XE(),o=a.BuildInfo,Zk(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,oS(n.sessionId);case 4:return s=e.sent,u={},nw()?u.ibi=o.packageName:Zb()?u.apn=o.packageName:Hk(t,"operation-not-supported-in-this-environment"),o.displayName&&(u.appDisplayName=o.displayName),u.sessionId=s,e.abrupt("return",OE(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,u));case 10:case"end":return e.stop()}}),e)}))),eS.apply(this,arguments)}function tS(){return tS=ue(ie().mark((function e(t){var n,r,i;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=XE(),r=n.BuildInfo,i={},nw()?i.iosBundleId=r.packageName:Zb()?i.androidPackageName=r.packageName:Hk(t,"operation-not-supported-in-this-environment"),e.next=5,lE(t,i);case 5:case"end":return e.stop()}}),e)}))),tS.apply(this,arguments)}function nS(e){var t=XE().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function rS(e,t,n){return iS.apply(this,arguments)}function iS(){return iS=ue(ie().mark((function e(t,n,r){var i,a,o;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=XE(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var s=null;function u(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout((function(){i(Wk(t,"redirect-cancelled-by-user"))}),JE))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),Zb()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),iS.apply(this,arguments)}function aS(e){var t,n,r,i,a,o,s,u,c,l,f=XE();Xk("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Xk("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Xk("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Xk("function"===typeof(null===(u=null===(s=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Xk("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function oS(e){return sS.apply(this,arguments)}function sS(){return(sS=ue(ie().mark((function e(t){var n,r,i;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=uS(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uS(e){if(Zk(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var cS=20,lS=function(e){w(n,e);var t=I(n);function n(){var e;return v(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return g(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Ut(_(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=ue(ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(sE);function fS(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:mS(),postBody:null,tenantId:e.tenantId,error:Wk(e,"no-auth-event")}}function hS(e,t){return gS()._set(yS(e),t)}function dS(e){return pS.apply(this,arguments)}function pS(){return pS=ue(ie().mark((function e(t){var n;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gS()._get(yS(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,gS()._remove(yS(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),pS.apply(this,arguments)}function vS(e,t){var n,r,i=function(e){var t=kS(e),n=t.link?decodeURIComponent(t.link):void 0,r=kS(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return kS(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=kS(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?Wk(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function mS(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<cS;n++){var r=Math.floor(62*Math.random());e.push(t.charAt(r))}return e.join("")}function gS(){return qb(Ax)}function yS(e){return Hb("authEvent",e.config.apiKey,e.name)}function kS(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=a(t=n)||ae(t)||s(t)||u();r[0];return J(r.slice(1).join("?"))}var bS=function(){function e(){v(this,e),this._redirectPersistence=Px,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=rE,this._overrideRedirectResult=HI}return g(e,[{key:"_initialize",value:function(){var e=ue(ie().mark((function e(t){var n,r;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new lS(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Hk(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=ue(ie().mark((function e(t,n,r,i){var a,o,s,u;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return aS(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),VI.clear(),e.next=10,this._originValidation(t);case 10:return o=fS(t,r,i),e.next=13,hS(t,o);case 13:return e.next=15,ZE(t,o,n);case 15:return s=e.sent,e.next=18,nS(s);case 18:return u=e.sent,e.abrupt("return",rS(t,a,u));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return tS.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=XE(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(ue(ie().mark((function n(){return ie().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,dS(e);case 2:t.onEvent(_S());case 3:case"end":return n.stop()}}),n)}))),500),s=function(){var n=ue(ie().mark((function n(r){var i,a;return ie().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,dS(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=vS(i,r.url)),t.onEvent(a||_S());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,s);var u=i,c="".concat(a.packageName.toLowerCase(),"://");XE().handleOpenURL=function(){var e=ue(ie().mark((function e(t){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&s({url:t}),"function"===typeof u)try{u(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),wS=bS;function _S(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Wk("no-auth-event")}}var xS=1e3;function IS(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function ES(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return!("file:"!==IS()&&"ionic:"!==IS()&&"capacitor:"!==IS()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function SS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return B()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/Edge\/\d+/.test(e)}(e)}function TS(){try{var e=self.localStorage,t=Lx();if(e)return e.setItem(t,"1"),e.removeItem(t),!SS()||q()}catch(n){return CS()&&q()}return!1}function CS(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function NS(){return("http:"===IS()||"https:"===IS()||V()||ES())&&!(z()||U())&&TS()&&!CS()}function AS(){return ES()&&"undefined"!==typeof document}function RS(){return PS.apply(this,arguments)}function PS(){return(PS=ue(ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(AS()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),xS);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var DS={LOCAL:"local",NONE:"none",SESSION:"session"},OS=Xk,LS="persistence";function MS(e,t){OS(Object.values(DS).includes(t),e,"invalid-persistence-type"),z()?OS(t!==DS.SESSION,e,"unsupported-persistence-type"):U()?OS(t===DS.NONE,e,"unsupported-persistence-type"):CS()?OS(t===DS.NONE||t===DS.LOCAL&&q(),e,"unsupported-persistence-type"):OS(t===DS.NONE||TS(),e,"unsupported-persistence-type")}function FS(e){return jS.apply(this,arguments)}function jS(){return jS=ue(ie().mark((function e(t){var n,r;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=US(),r=Hb(LS,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),jS.apply(this,arguments)}function US(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var VS=Xk,zS=function(){function e(){v(this,e),this.browserResolver=qb(UE),this.cordovaResolver=qb(wS),this.underlyingResolver=null,this._redirectPersistence=Px,this._completeRedirectFn=rE,this._overrideRedirectResult=HI}return g(e,[{key:"_initialize",value:function(){var e=ue(ie().mark((function e(t){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=ue(ie().mark((function e(t,n,r,i){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=ue(ie().mark((function e(t,n,r,i){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return AS()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return VS(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=ue(ie().mark((function e(){var t;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,RS();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function BS(e){return e.unwrap()}function qS(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new QS(e,function(e,t){var n,r=re(e),i=t;return Xk(t.customData.operationType,r,"argument-error"),Xk(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),bx._fromError(r,i)}(e,t));else if(r){var i=GS(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function GS(e){var t=(e instanceof G?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof G)&&"temporaryProof"in t&&"phoneNumber"in t)return II.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Pk.PASSWORD)return null;switch(r){case Pk.GOOGLE:n=l_;break;case Pk.FACEBOOK:n=c_;break;case Pk.GITHUB:n=f_;break;case Pk.TWITTER:n=p_;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return a||o||i||s?s?r.startsWith("saml.")?h_._create(r,s):$w._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:i,accessToken:a}):new u_(r).credential({idToken:i,accessToken:a,rawNonce:u}):null}return e instanceof G?n.credentialFromError(e):n.credentialFromResult(e)}function KS(e,t){return t.catch((function(t){throw t instanceof G&&qS(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,GS(t)),additionalUserInfo:yx(e),user:YS.getOrCreate(r)}}))}function HS(e,t){return WS.apply(this,arguments)}function WS(){return WS=ue(ie().mark((function e(t,n){var r;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return KS(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),WS.apply(this,arguments)}var QS=function(){function e(t,n){v(this,e),this.resolver=n,this.auth=t.wrapped()}return g(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return KS(BS(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),YS=function(){function e(t){v(this,e),this._delegate=t,this.multiFactor=function(e){var t=re(e);return Sx.has(t)||Sx.set(t,Ex._fromUser(t)),Sx.get(t)}(t)}return g(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=ue(ie().mark((function e(t){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",KS(this.auth,L_(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",HS(this.auth,yI(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=ue(ie().mark((function e(t){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",KS(this.auth,MI(this._delegate,t,zS)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=ue(ie().mark((function e(t){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,FS(kw(this.auth));case 2:return e.abrupt("return",ZI(this._delegate,t,zS));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=ue(ie().mark((function e(t){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",KS(this.auth,F_(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return HS(this.auth,function(e,t,n){return bI.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return KS(this.auth,function(e,t,n){return LI.apply(this,arguments)}(this._delegate,e,zS))}},{key:"reauthenticateWithRedirect",value:function(){var e=ue(ie().mark((function e(t){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,FS(kw(this.auth));case 2:return e.abrupt("return",XI(this._delegate,t,zS));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return ax.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=ue(ie().mark((function e(t){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x_(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return lx(re(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return lx(re(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return xI.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return cx.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return ox.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();YS.USER_MAP=new WeakMap;var $S=Xk,XS=function(){function e(t,n){if(v(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;$S(r,"invalid-api-key",{appName:t.name}),$S(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?zS:void 0;this._delegate=n.initialize({options:{persistence:ZS(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Vk),this.linkUnderlyingAuth()}return g(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?YS.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){ww(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Q_.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Y_(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return W_.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=ue(ie().mark((function e(t,n){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",KS(this._delegate,J_(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return ix.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=i_.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=ue(ie().mark((function e(){var t;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $S(NS(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,tE(this._delegate,zS);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",KS(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){kw(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=JS(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=JS(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return ex.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return H_.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=ue(ie().mark((function e(t){var n,r;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:MS(this._delegate,t),e.t0=t,e.next=e.t0===DS.SESSION?4:e.t0===DS.LOCAL?6:e.t0===DS.NONE?11:13;break;case 4:return n=Px,e.abrupt("break",14);case 6:return e.next=8,qb(nI)._isAvailable();case 8:return r=e.sent,n=r?nI:Ax,e.abrupt("break",14);case 11:return n=Kb,e.abrupt("break",14);case 13:return e.abrupt("return",Hk("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return KS(this._delegate,function(e){return k_.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return KS(this._delegate,D_(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return KS(this._delegate,function(e,t){return z_.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return KS(this._delegate,function(e,t,n){return D_(re(e),a_.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return KS(this._delegate,function(e,t,n){return tx.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return HS(this._delegate,function(e,t,n){return gI.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=ue(ie().mark((function e(t){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $S(NS(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",KS(this._delegate,DI(this._delegate,t,zS)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=ue(ie().mark((function e(t){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $S(NS(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,FS(this._delegate);case 3:return e.abrupt("return",YI(this._delegate,t,zS));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return X_.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function JS(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&YS.getOrCreate(e))},error:t,complete:n}}function ZS(e,t){var n=function(e,t){var n=US();if(!n)return[];var r=Hb(LS,e,t);switch(n.getItem(r)){case DS.NONE:return[Kb];case DS.LOCAL:return[nI,Px];case DS.SESSION:return[Px];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(nI)||n.push(nI),"undefined"!==typeof window)for(var r=0,i=[Ax,Px];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Kb)||n.push(Kb),n}XS.Persistence=DS;var eT=function(){function e(){v(this,e),this.providerId="phone",this._delegate=new II(BS(jt.auth()))}return g(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return II.credential(e,t)}}]),e}();eT.PHONE_SIGN_IN_METHOD=II.PHONE_SIGN_IN_METHOD,eT.PROVIDER_ID=II.PROVIDER_ID;var tT=Xk,nT=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jt.app();v(this,e),tT(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new pI(i.auth(),t,n),this.type=this._delegate.type}return g(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new ce("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new XS(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Dk,PASSWORD_RESET:Ok,RECOVER_EMAIL:Lk,REVERT_SECOND_FACTOR_ADDITION:Mk,VERIFY_AND_CHANGE_EMAIL:Fk,VERIFY_EMAIL:jk}},EmailAuthProvider:a_,FacebookAuthProvider:c_,GithubAuthProvider:f_,GoogleAuthProvider:l_,OAuthProvider:u_,SAMLAuthProvider:d_,PhoneAuthProvider:eT,PhoneMultiFactorGenerator:BE,RecaptchaVerifier:nT,TwitterAuthProvider:p_,Auth:XS,AuthCredential:Iw,Error:G}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.4.3")}(jt);var rT,iT="firebasestorage.googleapis.com",aT="storageBucket",oT=function(e){w(n,e);var t=I(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return v(this,n),(i=t.call(this,sT(e),"Firebase Storage: ".concat(r," (").concat(sT(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(k(i),n.prototype),i}return g(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return sT(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(G);function sT(e){return"storage/"+e}function uT(){return new oT(rT.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function cT(){return new oT(rT.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function lT(){return new oT(rT.CANCELED,"User canceled the upload/download.")}function fT(){return new oT(rT.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function hT(e){return new oT(rT.INVALID_ARGUMENT,e)}function dT(){return new oT(rT.APP_DELETED,"The Firebase app was deleted.")}function pT(e){return new oT(rT.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function vT(e,t){return new oT(rT.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function mT(e){throw new oT(rT.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(rT||(rT={}));var gT,yT=function(){function e(t,n){v(this,e),this.bucket=t,this.path_=n}return g(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r,i;try{r=e.makeFromUrl(t,n)}catch(a){return new e(t,"")}if(""===r.path)return r;throw i=t,new oT(rT.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===iT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<u.length;c++){var l=u[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new oT(rT.INVALID_URL,"Invalid URL '"+e+"'.")}(t);return r}}]),e}(),kT=function(){function e(t){v(this,e),this.promise_=Promise.reject(t)}return g(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function bT(e){return"string"===typeof e||e instanceof String}function wT(e){return _T()&&e instanceof Blob}function _T(){return"undefined"!==typeof Blob&&!U()}function xT(e,t,n,r){if(r<t)throw hT("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw hT("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function IT(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function ET(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function ST(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(gT||(gT={}));var TT=function(){function e(t,n,r,i,a,o,s,u,c,l,f){var h=this,d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];v(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return g(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(u){i(u)}else if(null!==a){var s=uT();s.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,s)):i(s)}else{if(n.canceled)i(e.appDelete_?dT():lT());else i(cT())}};this.canceled_?t(0,new CT(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,s=0;function u(){return 2===s}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,u())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(u()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===s?(s=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(s=2),clearTimeout(i),f(0)):e||(s=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new CT(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===gT.NO_ERROR,a=r.getStatus();if(!n||ST(a,e.additionalRetryCodes_)&&e.retry){var o=r.getErrorCode()===gT.ABORT;t(!1,new CT(!1,null,o))}else{var s=-1!==e.successCodes_.indexOf(a);t(!0,new CT(s,r))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),CT=g((function e(t,n,r){v(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function NT(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function AT(){for(var e=NT(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(_T())return new Blob(n);throw new oT(rT.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function RT(e){if("undefined"===typeof atob)throw t="base-64",new oT(rT.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}var PT={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},DT=g((function e(t,n){v(this,e),this.data=t,this.contentType=n||null}));function OT(e,t){switch(e){case PT.RAW:return new DT(LT(t));case PT.BASE64:case PT.BASE64URL:return new DT(MT(e,t));case PT.DATA_URL:return new DT(function(e){var t=new FT(e);return t.base64?MT(PT.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw vT(PT.DATA_URL,"Malformed data URL.")}return LT(t)}(t.rest)}(t),new FT(t).contentType)}throw uT()}function LT(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function MT(e,t){switch(e){case PT.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw vT(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case PT.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw vT(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=RT(t)}catch(c){if(c.message.includes("polyfill"))throw c;throw vT(e,"Invalid character found")}for(var s=new Uint8Array(o.length),u=0;u<o.length;u++)s[u]=o.charCodeAt(u);return s}var FT=g((function e(t){v(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw vT(PT.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}));var jT=function(){function e(t,n){v(this,e);var r=0,i="";wT(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return g(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(wT(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(_T()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(AT.apply(null,i))}var a=n.map((function(e){return bT(e)?OT(PT.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var s=new Uint8Array(o),u=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)s[u++]=e[t]})),new e(s,!0)}}]),e}();function UT(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function VT(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function zT(e,t){return t}var BT=g((function e(t,n,r,i){v(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||zT})),qT=null;function GT(){if(qT)return qT;var e=[];e.push(new BT("bucket")),e.push(new BT("generation")),e.push(new BT("metageneration")),e.push(new BT("name","fullPath",!0));var t=new BT("name");t.xform=function(e,t){return function(e){return!bT(e)||e.length<2?e:VT(e)}(t)},e.push(t);var n=new BT("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new BT("timeCreated")),e.push(new BT("updated")),e.push(new BT("md5Hash",null,!0)),e.push(new BT("cacheControl",null,!0)),e.push(new BT("contentDisposition",null,!0)),e.push(new BT("contentEncoding",null,!0)),e.push(new BT("contentLanguage",null,!0)),e.push(new BT("contentType",null,!0)),e.push(new BT("metadata","customMetadata",!0)),qT=e}function KT(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new yT(n,r);return t._makeStorageReference(i)}})}(r,e),r}function HT(e,t,n){var r=UT(t);return null===r?null:KT(e,r,n)}function WT(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var QT="prefixes",YT="items";function $T(e,t,n){var r=UT(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[QT]){var i,a=y(n[QT]);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),s=e._makeStorageReference(new yT(t,o));r.prefixes.push(s)}}catch(h){a.e(h)}finally{a.f()}}if(n[YT]){var u,c=y(n[YT]);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=e._makeStorageReference(new yT(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var XT=g((function e(t,n,r,i){v(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function JT(e){if(!e)throw uT()}function ZT(e,t){return function(n,r){var i=HT(e,r,t);return JT(null!==i),i}}function eC(e,t){return function(n,r){var i=HT(e,r,t);return JT(null!==i),function(e,t,n,r){var i=UT(t);if(null===i)return null;if(!bT(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent,s=a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return IT("/b/"+o(i)+"/o/"+o(a),n,r)+ET({alt:"media",token:t})}));return s[0]}(i,r,e.host,e._protocol)}}function tC(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new oT(rT.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new oT(rT.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new oT(rT.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new oT(rT.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function nC(e){var t=tC(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new oT(rT.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function rC(e,t,n){var r=IT(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new XT(r,"GET",ZT(e,n),i);return a.errorHandler=nC(t),a}function iC(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=IT(t.bucketOnlyServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,u=new XT(o,"GET",function(e,t){return function(n,r){var i=$T(e,t,r);return JT(null!==i),i}}(e,t.bucket),s);return u.urlParams=a,u.errorHandler=tC(t),u}function aC(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function oC(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+s;var u=aC(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+WT(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",f=jT.getBlob(c,r,l);if(null===f)throw fT();var h={name:u.fullPath},d=IT(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new XT(d,"POST",ZT(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=tC(t),v}var sC=g((function e(t,n,r,i){v(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function uC(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){JT(!1)}return JT(!!n&&-1!==(t||["active"]).indexOf(n)),n}var cC=262144;function lC(e,t,n,r,i,a,o,s){var u=new sC(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new oT(rT.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var f=u.current,h=f+l,d={"X-Goog-Upload-Command":0===l?"finalize":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(u.current)},p=r.slice(f,h);if(null===p)throw fT();var v=t.maxUploadRetryTime,m=new XT(n,"POST",(function(e,n){var i,o=uC(e,["active","final"]),s=u.current+l,c=r.size();return i="final"===o?ZT(t,a)(e,n):null,new sC(s,c,"final"===o,i)}),v);return m.headers=d,m.body=p.uploadData(),m.progressCallback=s||null,m.errorHandler=tC(e),m}var fC={STATE_CHANGED:"state_changed"},hC={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function dC(e){switch(e){case"running":case"pausing":case"canceling":return hC.RUNNING;case"paused":return hC.PAUSED;case"success":return hC.SUCCESS;case"canceled":return hC.CANCELED;default:return hC.ERROR}}var pC=g((function e(t,n,r){v(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function vC(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var mC=null,gC=function(){function e(){var t=this;v(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=gT.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=gT.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=gT.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return g(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw mT("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw mT("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw mT("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw mT("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw mT("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),yC=function(e){w(n,e);var t=I(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(gC);function kC(){return mC?mC():new yC}var bC=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;v(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=GT(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){if(r._request=void 0,r._chunkMultiplier=1,e._codeEquals(rT.CANCELED))r._needToFetchStatus=!0,r.completeTransitions_();else{var t=r.isExponentialBackoffExpired();if(ST(e.status,[])){if(!t)return r.sleepTime=Math.max(2*r.sleepTime,1e3),r._needToFetchStatus=!0,void r.completeTransitions_();e=cT()}r._error=e,r._transition("error")}},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals(rT.CANCELED)?r.completeTransitions_():(r._error=e,r._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return g(e,[{key:"isExponentialBackoffExpired",value:function(){return this.sleepTime>this.maxSleepTime}},{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){var e=this;"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((function(){e.pendingTimeout=void 0,e._continueUpload()}),this.sleepTime):this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=c(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=aC(t,r,i),s={name:o.fullPath},u=IT(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=WT(o,n),f=e.maxUploadRetryTime,h=new XT(u,"POST",(function(e){var t;uC(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){JT(!1)}return JT(bT(t)),t}),f);return h.urlParams=s,h.headers=c,h.body=l,h.errorHandler=tC(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,kC,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new XT(n,"POST",(function(e){var t=uC(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){JT(!1)}n||JT(!1);var i=Number(n);return JT(!isNaN(i)),new sC(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=tC(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,kC,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=cC*this._chunkMultiplier,n=new sC(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=lC(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(u){return e._error=u,void e._transition("error")}var s=e._ref.storage._makeRequest(o,kC,i,a,!1);e._request=s,s.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){2*(cC*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=rC(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,kC,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=oC(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,kC,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=lT(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=dC(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new pC(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(dC(this._state)){case hC.SUCCESS:vC(this._resolve.bind(null,this.snapshot))();break;case hC.CANCELED:case hC.ERROR:vC(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(dC(this._state)){case hC.RUNNING:case hC.PAUSED:e.next&&vC(e.next.bind(e,this.snapshot))();break;case hC.SUCCESS:e.complete&&vC(e.complete.bind(e))();break;default:e.error&&vC(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),wC=function(){function e(t,n){v(this,e),this._service=t,this._location=n instanceof yT?n:yT.makeFromUrl(n,t.host)}return g(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new yT(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return VT(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new yT(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw pT(e)}}]),e}();function _C(e,t,n){return xC.apply(this,arguments)}function xC(){return(xC=ue(ie().mark((function e(t,n,r){var i,a,o,s;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,IC(t,o);case 3:if(s=e.sent,(i=n.prefixes).push.apply(i,oe(s.prefixes)),(a=n.items).push.apply(a,oe(s.items)),null==s.nextPageToken){e.next=9;break}return e.next=9,_C(t,n,s.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function IC(e,t){null!=t&&"number"===typeof t.maxResults&&xT("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=iC(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,kC)}function EC(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=IT(t.fullServerUrl(),e.host,e._protocol),a=WT(n,r),o=e.maxOperationRetryTime,s=new XT(i,"PATCH",ZT(e,r),o);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=a,s.errorHandler=nC(t),s}(e.storage,e._location,t,GT());return e.storage.makeRequestWithTokens(n,kC)}function SC(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=IT(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new XT(r,"GET",eC(e,n),i);return a.errorHandler=nC(t),a}(e.storage,e._location,GT());return e.storage.makeRequestWithTokens(t,kC).then((function(e){if(null===e)throw new oT(rT.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function TC(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=IT(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new XT(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=nC(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,kC)}function CC(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new yT(e._location.bucket,n);return new wC(e.storage,r)}function NC(e,t){if(e instanceof PC){var n=e;if(null==n._bucket)throw new oT(rT.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+aT+"' property when initializing the app?");var r=new wC(n,n._bucket);return null!=t?NC(r,t):r}return void 0!==t?CC(e,t):e}function AC(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof PC)return new wC(e,t);throw hT("To use ref(service, url), the first argument must be a Storage instance.")}return NC(e,t)}function RC(e,t){var n=null===t||void 0===t?void 0:t[aT];return null==n?null:yT.makeFromBucketSpec(n,e)}var PC=function(){function e(t,n,r,i,a){v(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=iT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?yT.makeFromBucketSpec(i,this._host):RC(this._host,this.app.options)}return g(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=yT.makeFromBucketSpec(this._url,e):this._bucket=RC(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){xT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){xT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=ue(ie().mark((function e(){var t,n;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=ue(ie().mark((function e(){var t,n;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new wC(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new kT(dT());var o=function(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=ET(e.urlParams),u=e.url+s,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new TT(u,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=ue(ie().mark((function e(t,n){var r,i,a,o;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=c(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),DC="@firebase/storage",OC="0.11.2",LC="storage";function MC(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new bC(e,new jT(t),n)}(e=re(e),t,n)}function FC(e){return function(e){e._throwIfRoot("getMetadata");var t=rC(e.storage,e._location,GT());return e.storage.makeRequestWithTokens(t,kC)}(e=re(e))}function jC(e){return function(e){var t={prefixes:[],items:[]};return _C(e,t).then((function(){return t}))}(e=re(e))}function UC(e,t){return AC(e=re(e),t)}function VC(e,t,n){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:F(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function zC(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new PC(r,i,a,n,ot)}Ze(new ce(LC,zC,"PUBLIC").setMultipleInstances(!0)),ht(DC,OC,""),ht(DC,OC,"esm2017");var BC=function(){function e(t,n,r){v(this,e),this._delegate=t,this.task=n,this.ref=r}return g(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),qC=function(){function e(t,n){v(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return g(e,[{key:"snapshot",get:function(){return new BC(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new BC(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new BC(e,i,i._ref))}:{next:t.next?function(e){return t.next(new BC(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),GC=function(){function e(t,n){v(this,e),this._delegate=t,this._service=n}return g(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new KC(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new KC(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),KC=function(){function e(t,n){v(this,e),this._delegate=t,this.storage=n}return g(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return CC(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new qC(MC(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:PT.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=OT(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new qC(new bC(this._delegate,new jT(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return jC(this._delegate).then((function(t){return new GC(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return IC(e=re(e),t)}(this._delegate,e||void 0).then((function(e){return new GC(e,t.storage)}))}},{key:"getMetadata",value:function(){return FC(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return EC(e=re(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return SC(re(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),TC(re(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw pT(e)}}]),e}(),HC=function(){function e(t,n){v(this,e),this.app=t,this._delegate=n}return g(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(WC(e))throw hT("ref() expected a child path but got a URL, use refFromURL instead.");return new KC(UC(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!WC(e))throw hT("refFromURL() expected a full URL but got a child path, use ref() instead.");try{yT.makeFromUrl(e,this._delegate.host)}catch(t){throw hT("refFromUrl() expected a valid full URL but got an invalid one.")}return new KC(UC(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};VC(this._delegate,e,t,n)}}]),e}();function WC(e){return/^[A-Za-z]+:\/\//.test(e)}function QC(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new HC(r,i)}!function(e){var t={TaskState:hC,TaskEvent:fC,StringFormat:PT,Storage:HC,Reference:KC};e.INTERNAL.registerComponent(new ce("storage-compat",QC,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.2")}(jt);var YC=jt.initializeApp({apiKey:"AIzaSyADlKNCHnbYCuGKs73D6ENbToV2Kfk96UE",authDomain:"ls-book.firebaseapp.com",projectId:"ls-book",storageBucket:"ls-book.appspot.com",messagingSenderId:"883649431057",appId:"1:883649431057:web:f9c0b44534a5be1f6fd3b0",measurementId:"G-J3Y0L19Q62"}).firestore(),$C=jt.auth(),XC=jt.storage();var JC=function(e){var n=c((0,t.useState)(""),2),r=n[0],i=n[1],a=c((0,t.useState)(""),2),o=a[0],s=a[1],u=c((0,t.useState)(""),2),f=u[0],h=u[1],d=c((0,t.useState)(!1),2),p=d[0],v=d[1],m=c((0,t.useState)(!1),2),g=m[0],y=m[1],k=c((0,t.useState)(!1),2),b=k[0],w=k[1],_=c((0,t.useState)(!1),2),x=_[0],I=_[1],E=c((0,t.useState)([]),2),S=E[0],T=E[1];(0,t.useEffect)((function(){YC.collection("users").onSnapshot((function(e){T(e.docs.map((function(e){return e.data()})))}))}),[]),(0,t.useEffect)((function(){var e=setTimeout((function(){console.log("Checking form validity!"),v(o.includes("@")&&f.trim().length>=8&&r&&!S.map((function(e){return e.username})).includes(r))}),500);return function(){console.log("CLEANUP"),clearTimeout(e)}}),[r,o,f,S]);var C=function(){console.log("login btn clicked"),e.onLoginClicked()};return(0,l.jsxs)("div",{className:"register__div",children:[(0,l.jsxs)("nav",{className:"mobile__nav",children:[(0,l.jsx)("h1",{className:"nav__logo",children:"l'sBook"}),(0,l.jsx)("button",{onClick:C,children:"Login"})]}),(0,l.jsx)("div",{className:"login-container",children:(0,l.jsxs)("div",{className:"card",children:[(0,l.jsxs)("div",{className:"card-left",children:[(0,l.jsxs)("h1",{children:["L's.",(0,l.jsx)("br",{}),"BOOK"]}),(0,l.jsx)("p",{children:"Share your memories. Chat with your friends, Like and Comment on their post."}),(0,l.jsx)("span",{children:"Already have an account?"}),(0,l.jsx)("button",{onClick:C,children:"Login"})]}),(0,l.jsxs)("div",{className:"card-right",children:[(0,l.jsx)("h1",{children:"Register"}),(0,l.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.onRegister(r,o,f)},children:[(0,l.jsxs)("div",{className:"input ".concat(x?"invalidUsername":""),children:[(0,l.jsx)("input",{type:"text",placeholder:"Username",value:r,onChange:function(e){i(e.target.value)},onBlur:function(){r&&!S.map((function(e){return e.username})).includes(r)||I(!0)}}),(0,l.jsxs)("p",{className:"error ".concat(x?"errorUsernameMsg":""),children:[!r&&"Username is required.",S.map((function(e){return e.username})).includes(r)&&"Username already exists."]})]}),(0,l.jsxs)("div",{className:"input ".concat(g?"invalidEmail":""),children:[(0,l.jsx)("input",{type:"email",placeholder:"Email",value:o,onChange:function(e){s(e.target.value)},onBlur:function(){o.includes("@")||y(!0)}}),(0,l.jsx)("p",{className:"error ".concat(g?"errorEmailMsg":""),children:"Please enter a valid email adress."})]}),(0,l.jsxs)("div",{className:"input ".concat(b?"invalidPassword":""),children:[(0,l.jsx)("input",{type:"password",placeholder:"Password",value:f,onChange:function(e){h(e.target.value)},onBlur:function(){f.trim().length>=8||w(!0)}}),(0,l.jsx)("p",{className:"error ".concat(b?"errorPasswordMsg":""),children:"Password must have atleast 8 characters."})]}),(0,l.jsx)("button",{disabled:!p,type:"submit",children:"Register"})]})]})]})})]})};var ZC=function(e){var n=c((0,t.useState)(!1),2),r=n[0],i=n[1],a=c((0,t.useState)(""),2),o=a[0],s=a[1],u=(0,t.useRef)();(0,t.useEffect)((function(){var e=function(e){u.current.contains(e.target)||i(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[]);var f=function(){e.onLogout()};return(0,l.jsx)("div",{children:(0,l.jsxs)("nav",{className:"Navbar",ref:u,children:[(0,l.jsxs)("div",{className:"navElements__left",children:[(0,l.jsx)("h1",{className:"nav__logo",onClick:f,children:"l'sBook"}),(0,l.jsxs)("div",{className:"search__container",children:[(0,l.jsx)("input",{className:"nav__search",type:"text",placeholder:"Search",value:o,onChange:function(e){s(e.target.value)}}),(0,l.jsx)("button",{className:"search__btn",disabled:!o,onClick:function(){o&&(e.searchedProfile(o),s(""))},children:(0,l.jsx)("img",{src:"https://img.icons8.com/?size=25&id=59878&format=png",alt:""})})]})]}),(0,l.jsxs)("div",{className:"navElements__right",children:[(0,l.jsx)("img",{className:"nav__icons",src:"https://img.icons8.com/?size=30&id=20419&format=png",alt:""}),(0,l.jsx)("img",{className:"nav__icons",src:"https://img.icons8.com/?size=30&id=17317&format=png",alt:""}),(0,l.jsx)("img",{className:"nav__icons",src:"https://img.icons8.com/?size=32&id=kDoeg22e5jUY&format=png",alt:"",onClick:function(){i(!r)}})]}),r&&(0,l.jsxs)("div",{className:"nav__profile",children:[(0,l.jsx)("div",{className:"nav__profileIcons nav__profileUser",onClick:function(){e.profileClicked()},children:(0,l.jsxs)("div",{className:"test",children:[(0,l.jsx)("img",{className:"nav__profileIcon",src:"https://img.icons8.com/?size=25&id=ABBSjQJK83zf&format=png",alt:""}),(0,l.jsx)("h3",{children:e.username.displayName})]})}),(0,l.jsxs)("div",{className:"nav__profileIcons",children:[(0,l.jsxs)("div",{className:"test",children:[(0,l.jsx)("img",{className:"nav__profileIcon",src:"https://img.icons8.com/?size=25&id=2969&format=png",alt:""}),(0,l.jsx)("h3",{children:"Settings & privacy"})]}),(0,l.jsx)("span",{children:(0,l.jsx)("img",{src:"https://img.icons8.com/?size=25&id=7849&format=png",alt:""})})]}),(0,l.jsxs)("div",{className:"nav__profileIcons",children:[(0,l.jsxs)("div",{className:"test",children:[(0,l.jsx)("img",{className:"nav__profileIcon",src:"https://img.icons8.com/?size=25&id=2908&format=png",alt:""}),(0,l.jsx)("h3",{children:"Help & support"})]}),(0,l.jsx)("span",{children:(0,l.jsx)("img",{src:"https://img.icons8.com/?size=25&id=7849&format=png",alt:""})})]}),(0,l.jsxs)("div",{className:"nav__profileIcons",onClick:f,children:[(0,l.jsxs)("div",{className:"test",children:[(0,l.jsx)("img",{className:"nav__profileIcon",src:"https://img.icons8.com/?size=25&id=dJ1Prw5a5mj4&format=png",alt:""}),(0,l.jsx)("h3",{children:"Log out"})]}),(0,l.jsx)("span",{children:(0,l.jsx)("img",{src:"https://img.icons8.com/?size=25&id=7849&format=png",alt:""})})]})]})]})})};function eN(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function tN(){return tN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tN.apply(this,arguments)}function nN(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=nN(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var rN=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=nN(e))&&(r&&(r+=" "),r+=t);return r};function iN(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r={};return Object.keys(e).forEach((function(i){r[i]=e[i].reduce((function(e,r){if(r){var i=t(r);""!==i&&e.push(i),n&&n[r]&&e.push(n[r])}return e}),[]).join(" ")})),r}function aN(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var oN=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,sN=aN((function(e){return oN.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));var uN=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),cN=Math.abs,lN=String.fromCharCode,fN=Object.assign;function hN(e){return e.trim()}function dN(e,t,n){return e.replace(t,n)}function pN(e,t){return e.indexOf(t)}function vN(e,t){return 0|e.charCodeAt(t)}function mN(e,t,n){return e.slice(t,n)}function gN(e){return e.length}function yN(e){return e.length}function kN(e,t){return t.push(e),e}var bN=1,wN=1,_N=0,xN=0,IN=0,EN="";function SN(e,t,n,r,i,a,o){return{value:e,root:t,parent:n,type:r,props:i,children:a,line:bN,column:wN,length:o,return:""}}function TN(e,t){return fN(SN("",null,null,"",null,null,0),e,{length:-e.length},t)}function CN(){return IN=xN>0?vN(EN,--xN):0,wN--,10===IN&&(wN=1,bN--),IN}function NN(){return IN=xN<_N?vN(EN,xN++):0,wN++,10===IN&&(wN=1,bN++),IN}function AN(){return vN(EN,xN)}function RN(){return xN}function PN(e,t){return mN(EN,e,t)}function DN(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function ON(e){return bN=wN=1,_N=gN(EN=e),xN=0,[]}function LN(e){return EN="",e}function MN(e){return hN(PN(xN-1,UN(91===e?e+2:40===e?e+1:e)))}function FN(e){for(;(IN=AN())&&IN<33;)NN();return DN(e)>2||DN(IN)>3?"":" "}function jN(e,t){for(;--t&&NN()&&!(IN<48||IN>102||IN>57&&IN<65||IN>70&&IN<97););return PN(e,RN()+(t<6&&32==AN()&&32==NN()))}function UN(e){for(;NN();)switch(IN){case e:return xN;case 34:case 39:34!==e&&39!==e&&UN(IN);break;case 40:41===e&&UN(e);break;case 92:NN()}return xN}function VN(e,t){for(;NN()&&e+IN!==57&&(e+IN!==84||47!==AN()););return"/*"+PN(t,xN-1)+"*"+lN(47===e?e:NN())}function zN(e){for(;!DN(AN());)NN();return PN(e,xN)}var BN="-ms-",qN="-moz-",GN="-webkit-",KN="comm",HN="rule",WN="decl",QN="@keyframes";function YN(e,t){for(var n="",r=yN(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function $N(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case WN:return e.return=e.return||e.value;case KN:return"";case QN:return e.return=e.value+"{"+YN(e.children,r)+"}";case HN:e.value=e.props.join(",")}return gN(n=YN(e.children,r))?e.return=e.value+"{"+n+"}":""}function XN(e){return function(t){t.root||(t=t.return)&&e(t)}}function JN(e){return LN(ZN("",null,null,null,[""],e=ON(e),0,[0],e))}function ZN(e,t,n,r,i,a,o,s,u){for(var c=0,l=0,f=o,h=0,d=0,p=0,v=1,m=1,g=1,y=0,k="",b=i,w=a,_=r,x=k;m;)switch(p=y,y=NN()){case 40:if(108!=p&&58==vN(x,f-1)){-1!=pN(x+=dN(MN(y),"&","&\f"),"&\f")&&(g=-1);break}case 34:case 39:case 91:x+=MN(y);break;case 9:case 10:case 13:case 32:x+=FN(p);break;case 92:x+=jN(RN()-1,7);continue;case 47:switch(AN()){case 42:case 47:kN(tA(VN(NN(),RN()),t,n),u);break;default:x+="/"}break;case 123*v:s[c++]=gN(x)*g;case 125*v:case 59:case 0:switch(y){case 0:case 125:m=0;case 59+l:-1==g&&(x=dN(x,/\f/g,"")),d>0&&gN(x)-f&&kN(d>32?nA(x+";",r,n,f-1):nA(dN(x," ","")+";",r,n,f-2),u);break;case 59:x+=";";default:if(kN(_=eA(x,t,n,c,l,i,s,k,b=[],w=[],f),a),123===y)if(0===l)ZN(x,t,_,_,b,a,f,s,w);else switch(99===h&&110===vN(x,3)?100:h){case 100:case 108:case 109:case 115:ZN(e,_,_,r&&kN(eA(e,_,_,0,0,i,s,k,i,b=[],f),w),i,w,f,s,r?b:w);break;default:ZN(x,_,_,_,[""],w,0,s,w)}}c=l=d=0,v=g=1,k=x="",f=o;break;case 58:f=1+gN(x),d=p;default:if(v<1)if(123==y)--v;else if(125==y&&0==v++&&125==CN())continue;switch(x+=lN(y),y*v){case 38:g=l>0?1:(x+="\f",-1);break;case 44:s[c++]=(gN(x)-1)*g,g=1;break;case 64:45===AN()&&(x+=MN(NN())),h=AN(),l=f=gN(k=x+=zN(RN())),y++;break;case 45:45===p&&2==gN(x)&&(v=0)}}return a}function eA(e,t,n,r,i,a,o,s,u,c,l){for(var f=i-1,h=0===i?a:[""],d=yN(h),p=0,v=0,m=0;p<r;++p)for(var g=0,y=mN(e,f+1,f=cN(v=o[p])),k=e;g<d;++g)(k=hN(v>0?h[g]+" "+y:dN(y,/&\f/g,h[g])))&&(u[m++]=k);return SN(e,t,n,0===i?HN:s,u,c,l)}function tA(e,t,n){return SN(e,t,n,KN,lN(IN),mN(e,2,-2),0)}function nA(e,t,n,r){return SN(e,t,n,WN,mN(e,0,r),mN(e,r+1,-1),r)}var rA=function(e,t,n){for(var r=0,i=0;r=i,i=AN(),38===r&&12===i&&(t[n]=1),!DN(i);)NN();return PN(e,xN)},iA=function(e,t){return LN(function(e,t){var n=-1,r=44;do{switch(DN(r)){case 0:38===r&&12===AN()&&(t[n]=1),e[n]+=rA(xN-1,t,n);break;case 2:e[n]+=MN(r);break;case 4:if(44===r){e[++n]=58===AN()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=lN(r)}}while(r=NN());return e}(ON(e),t))},aA=new WeakMap,oA=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||aA.get(n))&&!r){aA.set(e,!0);for(var i=[],a=iA(t,i),o=n.props,s=0,u=0;s<a.length;s++)for(var c=0;c<o.length;c++,u++)e.props[u]=i[s]?a[s].replace(/&\f/g,o[c]):o[c]+" "+a[s]}}},sA=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function uA(e,t){switch(function(e,t){return 45^vN(e,0)?(((t<<2^vN(e,0))<<2^vN(e,1))<<2^vN(e,2))<<2^vN(e,3):0}(e,t)){case 5103:return GN+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return GN+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return GN+e+qN+e+BN+e+e;case 6828:case 4268:return GN+e+BN+e+e;case 6165:return GN+e+BN+"flex-"+e+e;case 5187:return GN+e+dN(e,/(\w+).+(:[^]+)/,GN+"box-$1$2"+BN+"flex-$1$2")+e;case 5443:return GN+e+BN+"flex-item-"+dN(e,/flex-|-self/,"")+e;case 4675:return GN+e+BN+"flex-line-pack"+dN(e,/align-content|flex-|-self/,"")+e;case 5548:return GN+e+BN+dN(e,"shrink","negative")+e;case 5292:return GN+e+BN+dN(e,"basis","preferred-size")+e;case 6060:return GN+"box-"+dN(e,"-grow","")+GN+e+BN+dN(e,"grow","positive")+e;case 4554:return GN+dN(e,/([^-])(transform)/g,"$1"+GN+"$2")+e;case 6187:return dN(dN(dN(e,/(zoom-|grab)/,GN+"$1"),/(image-set)/,GN+"$1"),e,"")+e;case 5495:case 3959:return dN(e,/(image-set\([^]*)/,GN+"$1$`$1");case 4968:return dN(dN(e,/(.+:)(flex-)?(.*)/,GN+"box-pack:$3"+BN+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+GN+e+e;case 4095:case 3583:case 4068:case 2532:return dN(e,/(.+)-inline(.+)/,GN+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(gN(e)-1-t>6)switch(vN(e,t+1)){case 109:if(45!==vN(e,t+4))break;case 102:return dN(e,/(.+:)(.+)-([^]+)/,"$1"+GN+"$2-$3$1"+qN+(108==vN(e,t+3)?"$3":"$2-$3"))+e;case 115:return~pN(e,"stretch")?uA(dN(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==vN(e,t+1))break;case 6444:switch(vN(e,gN(e)-3-(~pN(e,"!important")&&10))){case 107:return dN(e,":",":"+GN)+e;case 101:return dN(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+GN+(45===vN(e,14)?"inline-":"")+"box$3$1"+GN+"$2$3$1"+BN+"$2box$3")+e}break;case 5936:switch(vN(e,t+11)){case 114:return GN+e+BN+dN(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return GN+e+BN+dN(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return GN+e+BN+dN(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return GN+e+BN+e+e}return e}var cA=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case WN:e.return=uA(e.value,e.length);break;case QN:return YN([TN(e,{value:dN(e.value,"@","@"+GN)})],r);case HN:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return YN([TN(e,{props:[dN(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return YN([TN(e,{props:[dN(t,/:(plac\w+)/,":"+GN+"input-$1")]}),TN(e,{props:[dN(t,/:(plac\w+)/,":-moz-$1")]}),TN(e,{props:[dN(t,/:(plac\w+)/,BN+"input-$1")]})],r)}return""}))}}],lA=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r=e.stylisPlugins||cA;var i,a,o={},s=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)o[t[n]]=!0;s.push(e)}));var u=[oA,sA];var c,l=[$N,XN((function(e){c.insert(e)}))],f=function(e){var t=yN(e);return function(n,r,i,a){for(var o="",s=0;s<t;s++)o+=e[s](n,r,i,a)||"";return o}}(u.concat(r,l));a=function(e,t,n,r){c=n,YN(JN(e?e+"{"+t.styles+"}":t.styles),f),r&&(h.inserted[t.name]=!0)};var h={key:t,sheet:new uN({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:a};return h.sheet.hydrate(s),h};var fA={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hA=/[A-Z]|^ms/g,dA=/_EMO_([^_]+?)_([^]*?)_EMO_/g,pA=function(e){return 45===e.charCodeAt(1)},vA=function(e){return null!=e&&"boolean"!==typeof e},mA=aN((function(e){return pA(e)?e:e.replace(hA,"-$&").toLowerCase()})),gA=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(dA,(function(e,t,n){return kA={name:t,styles:n,next:kA},t}))}return 1===fA[e]||pA(e)||"number"!==typeof t||0===t?t:t+"px"};function yA(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return kA={name:n.name,styles:n.styles,next:kA},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)kA={name:r.name,styles:r.styles,next:kA},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=yA(e,t,n[i])+";";else for(var a in n){var o=n[a];if("object"!==typeof o)null!=t&&void 0!==t[o]?r+=a+"{"+t[o]+"}":vA(o)&&(r+=mA(a)+":"+gA(a,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var s=yA(e,t,o);switch(a){case"animation":case"animationName":r+=mA(a)+":"+s+";";break;default:r+=a+"{"+s+"}"}}else for(var u=0;u<o.length;u++)vA(o[u])&&(r+=mA(a)+":"+gA(a,o[u])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=kA,a=n(e);return kA=i,yA(e,t,a)}}if(null==t)return n;var o=t[n];return void 0!==o?o:n}var kA,bA=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var wA=!!r.useInsertionEffect&&r.useInsertionEffect,_A=wA||function(e){return e()},xA=(wA||t.useLayoutEffect,t.createContext("undefined"!==typeof HTMLElement?lA({key:"css"}):null));xA.Provider;var IA=function(e){return(0,t.forwardRef)((function(n,r){var i=(0,t.useContext)(xA);return e(n,i,r)}))};var EA=t.createContext({});var SA=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},TA=sN,CA=function(e){return"theme"!==e},NA=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?TA:CA},AA=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},RA=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return SA(t,n,r),_A((function(){return function(e,t,n){SA(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}}(t,n,r)})),null},PA=function e(n,r){var i,a,o=n.__emotion_real===n,s=o&&n.__emotion_base||n;void 0!==r&&(i=r.label,a=r.target);var u=AA(n,r,o),c=u||NA(s),l=!c("as");return function(){var f=arguments,h=o&&void 0!==n.__emotion_styles?n.__emotion_styles.slice(0):[];if(void 0!==i&&h.push("label:"+i+";"),null==f[0]||void 0===f[0].raw)h.push.apply(h,f);else{0,h.push(f[0][0]);for(var d=f.length,p=1;p<d;p++)h.push(f[p],f[0][p])}var v=IA((function(e,n,r){var i=l&&e.as||s,o="",f=[],d=e;if(null==e.theme){for(var p in d={},e)d[p]=e[p];d.theme=t.useContext(EA)}"string"===typeof e.className?o=function(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}(n.registered,f,e.className):null!=e.className&&(o=e.className+" ");var v=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";kA=void 0;var a=e[0];null==a||void 0===a.raw?(r=!1,i+=yA(n,t,a)):i+=a[0];for(var o=1;o<e.length;o++)i+=yA(n,t,e[o]),r&&(i+=a[o]);bA.lastIndex=0;for(var s,u="";null!==(s=bA.exec(i));)u+="-"+s[1];var c=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+u;return{name:c,styles:i,next:kA}}(h.concat(f),n.registered,d);o+=n.key+"-"+v.name,void 0!==a&&(o+=" "+a);var m=l&&void 0===u?NA(i):c,g={};for(var y in e)l&&"as"===y||m(y)&&(g[y]=e[y]);return g.className=o,g.ref=r,t.createElement(t.Fragment,null,t.createElement(RA,{cache:n,serialized:v,isStringTag:"string"===typeof i}),t.createElement(i,g))}));return v.displayName=void 0!==i?i:"Styled("+("string"===typeof s?s:s.displayName||s.name||"Component")+")",v.defaultProps=n.defaultProps,v.__emotion_real=v,v.__emotion_base=s,v.__emotion_styles=h,v.__emotion_forwardProp=u,Object.defineProperty(v,"toString",{value:function(){return"."+a}}),v.withComponent=function(t,n){return e(t,tN({},r,n,{shouldForwardProp:AA(v,n,!0)})).apply(void 0,h)},v}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){PA[e]=PA(e)}));function DA(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function OA(e){if(!DA(e))return e;var t={};return Object.keys(e).forEach((function(n){t[n]=OA(e[n])})),t}function LA(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},r=n.clone?tN({},e):e;return DA(e)&&DA(t)&&Object.keys(t).forEach((function(i){"__proto__"!==i&&(DA(t[i])&&i in e&&DA(e[i])?r[i]=LA(e[i],t[i],n):n.clone?r[i]=DA(t[i])?OA(t[i]):t[i]:r[i]=t[i])})),r}var MA=["values","unit","step"],FA=function(e){var t=Object.keys(e).map((function(t){return{key:t,val:e[t]}}))||[];return t.sort((function(e,t){return e.val-t.val})),t.reduce((function(e,t){return tN({},e,p({},t.key,t.val))}),{})};var jA={borderRadius:4},UA={xs:0,sm:600,md:900,lg:1200,xl:1536},VA={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(UA[e],"px)")}};function zA(e,t,n){var r=e.theme||{};if(Array.isArray(t)){var i=r.breakpoints||VA;return t.reduce((function(e,r,a){return e[i.up(i.keys[a])]=n(t[a]),e}),{})}if("object"===typeof t){var a=r.breakpoints||VA;return Object.keys(t).reduce((function(e,r){if(-1!==Object.keys(a.values||UA).indexOf(r)){e[a.up(r)]=n(t[r],r)}else{var i=r;e[i]=t[i]}return e}),{})}return n(t)}function BA(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(null==(e=t.keys)?void 0:e.reduce((function(e,n){return e[t.up(n)]={},e}),{}))||{}}function qA(e,t){return e.reduce((function(e,t){var n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function GA(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function KA(e){if("string"!==typeof e)throw new Error(GA(7));return e.charAt(0).toUpperCase()+e.slice(1)}function HA(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){var r="vars.".concat(t).split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e);if(null!=r)return r}return t.split(".").reduce((function(e,t){return e&&null!=e[t]?e[t]:null}),e)}function WA(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:HA(e,n)||i,t&&(r=t(r,i,e)),r}var QA=function(e){var t=e.prop,n=e.cssProperty,r=void 0===n?e.prop:n,i=e.themeKey,a=e.transform,o=function(e){if(null==e[t])return null;var n=e[t],o=HA(e.theme,i)||{};return zA(e,n,(function(e){var n=WA(o,a,e);return e===n&&"string"===typeof e&&(n=WA(o,a,"".concat(t).concat("default"===e?"":KA(e)),e)),!1===r?n:p({},r,n)}))};return o.propTypes={},o.filterProps=[t],o};var YA=function(e,t){return t?LA(e,t,{clone:!1}):e};var $A={m:"margin",p:"padding"},XA={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},JA={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},ZA=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!JA[e])return[e];e=JA[e]}var t=c(e.split(""),2),n=t[0],r=t[1],i=$A[n],a=XA[r]||"";return Array.isArray(a)?a.map((function(e){return i+e})):[i+a]})),eR=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],tR=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],nR=[].concat(eR,tR);function rR(e,t,n,r){var i,a=null!=(i=HA(e,t,!1))?i:n;return"number"===typeof a?function(e){return"string"===typeof e?e:a*e}:Array.isArray(a)?function(e){return"string"===typeof e?e:a[e]}:"function"===typeof a?a:function(){}}function iR(e){return rR(e,"spacing",8)}function aR(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function oR(e,t,n,r){if(-1===t.indexOf(n))return null;var i=function(e,t){return function(n){return e.reduce((function(e,r){return e[r]=aR(t,n),e}),{})}}(ZA(n),r);return zA(e,e[n],i)}function sR(e,t){var n=iR(e.theme);return Object.keys(e).map((function(r){return oR(e,t,r,n)})).reduce(YA,{})}function uR(e){return sR(e,eR)}function cR(e){return sR(e,tR)}function lR(e){return sR(e,nR)}uR.propTypes={},uR.filterProps=eR,cR.propTypes={},cR.filterProps=tR,lR.propTypes={},lR.filterProps=nR;var fR=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return t.filterProps.forEach((function(n){e[n]=t})),e}),{}),i=function(e){return Object.keys(e).reduce((function(t,n){return r[n]?YA(t,r[n](e)):t}),{})};return i.propTypes={},i.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),i};function hR(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var dR=QA({prop:"border",themeKey:"borders",transform:hR}),pR=QA({prop:"borderTop",themeKey:"borders",transform:hR}),vR=QA({prop:"borderRight",themeKey:"borders",transform:hR}),mR=QA({prop:"borderBottom",themeKey:"borders",transform:hR}),gR=QA({prop:"borderLeft",themeKey:"borders",transform:hR}),yR=QA({prop:"borderColor",themeKey:"palette"}),kR=QA({prop:"borderTopColor",themeKey:"palette"}),bR=QA({prop:"borderRightColor",themeKey:"palette"}),wR=QA({prop:"borderBottomColor",themeKey:"palette"}),_R=QA({prop:"borderLeftColor",themeKey:"palette"}),xR=function(e){if(void 0!==e.borderRadius&&null!==e.borderRadius){var t=rR(e.theme,"shape.borderRadius",4);return zA(e,e.borderRadius,(function(e){return{borderRadius:aR(t,e)}}))}return null};xR.propTypes={},xR.filterProps=["borderRadius"];fR(dR,pR,vR,mR,gR,yR,kR,bR,wR,_R,xR);var IR=function(e){if(void 0!==e.gap&&null!==e.gap){var t=rR(e.theme,"spacing",8);return zA(e,e.gap,(function(e){return{gap:aR(t,e)}}))}return null};IR.propTypes={},IR.filterProps=["gap"];var ER=function(e){if(void 0!==e.columnGap&&null!==e.columnGap){var t=rR(e.theme,"spacing",8);return zA(e,e.columnGap,(function(e){return{columnGap:aR(t,e)}}))}return null};ER.propTypes={},ER.filterProps=["columnGap"];var SR=function(e){if(void 0!==e.rowGap&&null!==e.rowGap){var t=rR(e.theme,"spacing",8);return zA(e,e.rowGap,(function(e){return{rowGap:aR(t,e)}}))}return null};SR.propTypes={},SR.filterProps=["rowGap"];fR(IR,ER,SR,QA({prop:"gridColumn"}),QA({prop:"gridRow"}),QA({prop:"gridAutoFlow"}),QA({prop:"gridAutoColumns"}),QA({prop:"gridAutoRows"}),QA({prop:"gridTemplateColumns"}),QA({prop:"gridTemplateRows"}),QA({prop:"gridTemplateAreas"}),QA({prop:"gridArea"}));function TR(e,t){return"grey"===t?t:e}fR(QA({prop:"color",themeKey:"palette",transform:TR}),QA({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:TR}),QA({prop:"backgroundColor",themeKey:"palette",transform:TR}));function CR(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}var NR=QA({prop:"width",transform:CR}),AR=function(e){if(void 0!==e.maxWidth&&null!==e.maxWidth){return zA(e,e.maxWidth,(function(t){var n,r,i;return{maxWidth:(null==(n=e.theme)||null==(r=n.breakpoints)||null==(i=r.values)?void 0:i[t])||UA[t]||CR(t)}}))}return null};AR.filterProps=["maxWidth"];var RR=QA({prop:"minWidth",transform:CR}),PR=QA({prop:"height",transform:CR}),DR=QA({prop:"maxHeight",transform:CR}),OR=QA({prop:"minHeight",transform:CR}),LR=(QA({prop:"size",cssProperty:"width",transform:CR}),QA({prop:"size",cssProperty:"height",transform:CR}),fR(NR,AR,RR,PR,DR,OR,QA({prop:"boxSizing"})),{border:{themeKey:"borders",transform:hR},borderTop:{themeKey:"borders",transform:hR},borderRight:{themeKey:"borders",transform:hR},borderBottom:{themeKey:"borders",transform:hR},borderLeft:{themeKey:"borders",transform:hR},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:xR},color:{themeKey:"palette",transform:TR},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:TR},backgroundColor:{themeKey:"palette",transform:TR},p:{style:cR},pt:{style:cR},pr:{style:cR},pb:{style:cR},pl:{style:cR},px:{style:cR},py:{style:cR},padding:{style:cR},paddingTop:{style:cR},paddingRight:{style:cR},paddingBottom:{style:cR},paddingLeft:{style:cR},paddingX:{style:cR},paddingY:{style:cR},paddingInline:{style:cR},paddingInlineStart:{style:cR},paddingInlineEnd:{style:cR},paddingBlock:{style:cR},paddingBlockStart:{style:cR},paddingBlockEnd:{style:cR},m:{style:uR},mt:{style:uR},mr:{style:uR},mb:{style:uR},ml:{style:uR},mx:{style:uR},my:{style:uR},margin:{style:uR},marginTop:{style:uR},marginRight:{style:uR},marginBottom:{style:uR},marginLeft:{style:uR},marginX:{style:uR},marginY:{style:uR},marginInline:{style:uR},marginInlineStart:{style:uR},marginInlineEnd:{style:uR},marginBlock:{style:uR},marginBlockStart:{style:uR},marginBlockEnd:{style:uR},displayPrint:{cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:IR},rowGap:{style:SR},columnGap:{style:ER},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:CR},maxWidth:{style:AR},minWidth:{transform:CR},height:{transform:CR},maxHeight:{transform:CR},minHeight:{transform:CR},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}});var MR=function(){function e(e,t,n,r){var i,a=(p(i={},e,t),p(i,"theme",n),i),o=r[e];if(!o)return p({},e,t);var s=o.cssProperty,u=void 0===s?e:s,c=o.themeKey,l=o.transform,f=o.style;if(null==t)return null;if("typography"===c&&"inherit"===t)return p({},e,t);var h=HA(n,c)||{};if(f)return f(a);return zA(a,t,(function(t){var n=WA(h,l,t);return t===n&&"string"===typeof t&&(n=WA(h,l,"".concat(e).concat("default"===t?"":KA(t)),t)),!1===u?n:p({},u,n)}))}return function t(n){var r,i=n||{},a=i.sx,o=i.theme,s=void 0===o?{}:o;if(!a)return null;var u=null!=(r=s.unstable_sxConfig)?r:LR;function c(n){var r=n;if("function"===typeof n)r=n(s);else if("object"!==typeof n)return n;if(!r)return null;var i=BA(s.breakpoints),a=Object.keys(i),o=i;return Object.keys(r).forEach((function(n){var i,a,c=(i=r[n],a=s,"function"===typeof i?i(a):i);if(null!==c&&void 0!==c)if("object"===typeof c)if(u[n])o=YA(o,e(n,c,s,u));else{var l=zA({theme:s},c,(function(e){return p({},n,e)}));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return e.concat(Object.keys(t))}),[]),i=new Set(r);return t.every((function(e){return i.size===Object.keys(e).length}))}(l,c)?o=YA(o,l):o[n]=t({sx:c,theme:s})}else o=YA(o,e(n,c,s,u))})),qA(a,o)}return Array.isArray(a)?a.map(c):c(a)}}();MR.filterProps=["sx"];var FR=MR,jR=["breakpoints","palette","spacing","shape"];var UR=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.palette,i=void 0===r?{}:r,a=e.spacing,o=e.shape,s=void 0===o?{}:o,u=eN(e,jR),c=function(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:900,lg:1200,xl:1536}:t,r=e.unit,i=void 0===r?"px":r,a=e.step,o=void 0===a?5:a,s=eN(e,MA),u=FA(n),c=Object.keys(u);function l(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(i,")")}function f(e){var t="number"===typeof n[e]?n[e]:e;return"@media (max-width:".concat(t-o/100).concat(i,")")}function h(e,t){var r=c.indexOf(t);return"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(i,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[c[r]]?n[c[r]]:t)-o/100).concat(i,")")}return tN({keys:c,values:u,up:l,down:f,between:h,only:function(e){return c.indexOf(e)+1<c.length?h(e,c[c.indexOf(e)+1]):l(e)},not:function(e){var t=c.indexOf(e);return 0===t?l(c[1]):t===c.length-1?f(c[t]):h(e,c[c.indexOf(e)+1]).replace("@media","@media not all and")},unit:i},s)}(n),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=iR({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((function(e){var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}(a),f=LA({breakpoints:c,direction:"ltr",components:{},palette:tN({mode:"light"},i),spacing:l,shape:tN({},jA,s)},u),h=arguments.length,d=new Array(h>1?h-1:0),p=1;p<h;p++)d[p-1]=arguments[p];return(f=d.reduce((function(e,t){return LA(e,t)}),f)).unstable_sxConfig=tN({},LR,null==u?void 0:u.unstable_sxConfig),f.unstable_sx=function(e){return FR({sx:e,theme:this})},f},VR=["variant"];function zR(e){return 0===e.length}function BR(e){var t=e.variant,n=eN(e,VR),r=t||"";return Object.keys(n).sort().forEach((function(t){r+="color"===t?zR(r)?e[t]:KA(e[t]):"".concat(zR(r)?t:KA(t)).concat(KA(e[t].toString()))})),r}var qR=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function GR(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}var KR=UR();function HR(e){var t,n=e.defaultTheme,r=e.theme,i=e.themeId;return t=r,0===Object.keys(t).length?n:r[i]||r}function WR(e,t){var n;return tN({toolbar:(n={minHeight:56},p(n,e.up("xs"),{"@media (orientation: landscape)":{minHeight:48}}),p(n,e.up("sm"),{minHeight:64}),n)},t)}function QR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function YR(e){if(e.type)return e;if("#"===e.charAt(0))return YR(function(e){e=e.slice(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error(GA(9,e));var r,i=e.substring(t+1,e.length-1);if("color"===n){if(r=(i=i.split(" ")).shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error(GA(10,r))}else i=i.split(",");return{type:n,values:i=i.map((function(e){return parseFloat(e)})),colorSpace:r}}function $R(e){var t=e.type,n=e.colorSpace,r=e.values;return-1!==t.indexOf("rgb")?r=r.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function XR(e){var t="hsl"===(e=YR(e)).type||"hsla"===e.type?YR(function(e){var t=(e=YR(e)).values,n=t[0],r=t[1]/100,i=t[2]/100,a=r*Math.min(i,1-i),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-a*Math.max(Math.min(t-3,9-t,1),-1)},s="rgb",u=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===e.type&&(s+="a",u.push(t[3])),$R({type:s,values:u})}(e)).values:e.values;return t=t.map((function(t){return"color"!==e.type&&(t/=255),t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function JR(e,t){if(e=YR(e),t=QR(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return $R(e)}function ZR(e,t){if(e=YR(e),t=QR(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(var r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return $R(e)}var eP={black:"#000",white:"#fff"},tP={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},nP={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},rP={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},iP={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},aP={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},oP={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},sP={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},uP=["mode","contrastThreshold","tonalOffset"],cP={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:eP.white,default:eP.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},lP={text:{primary:eP.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:eP.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function fP(e,t,n,r){var i=r.light||r,a=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=ZR(e.main,i):"dark"===t&&(e.dark=JR(e.main,a)))}function hP(e){var t=e.mode,n=void 0===t?"light":t,r=e.contrastThreshold,i=void 0===r?3:r,a=e.tonalOffset,o=void 0===a?.2:a,s=eN(e,uP),u=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:aP[200],light:aP[50],dark:aP[400]}:{main:aP[700],light:aP[400],dark:aP[800]}}(n),c=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:nP[200],light:nP[50],dark:nP[400]}:{main:nP[500],light:nP[300],dark:nP[700]}}(n),l=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:rP[500],light:rP[300],dark:rP[700]}:{main:rP[700],light:rP[400],dark:rP[800]}}(n),f=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:oP[400],light:oP[300],dark:oP[700]}:{main:oP[700],light:oP[500],dark:oP[900]}}(n),h=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:sP[400],light:sP[300],dark:sP[700]}:{main:sP[800],light:sP[500],dark:sP[900]}}(n),d=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:iP[400],light:iP[300],dark:iP[700]}:{main:"#ed6c02",light:iP[500],dark:iP[900]}}(n);function p(e){var t=function(e,t){var n=XR(e),r=XR(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,lP.text.primary)>=i?lP.text.primary:cP.text.primary;return t}var v=function(e){var t=e.color,n=e.name,r=e.mainShade,i=void 0===r?500:r,a=e.lightShade,s=void 0===a?300:a,u=e.darkShade,c=void 0===u?700:u;if(!(t=tN({},t)).main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error(GA(11,n?" (".concat(n,")"):"",i));if("string"!==typeof t.main)throw new Error(GA(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return fP(t,"light",s,o),fP(t,"dark",c,o),t.contrastText||(t.contrastText=p(t.main)),t},m={dark:lP,light:cP};return LA(tN({common:tN({},eP),mode:n,primary:v({color:u,name:"primary"}),secondary:v({color:c,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:v({color:l,name:"error"}),warning:v({color:d,name:"warning"}),info:v({color:f,name:"info"}),success:v({color:h,name:"success"}),grey:tP,contrastThreshold:i,getContrastText:p,augmentColor:v,tonalOffset:o},m[n]),s)}var dP=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var pP={textTransform:"uppercase"},vP='"Roboto", "Helvetica", "Arial", sans-serif';function mP(e,t){var n="function"===typeof t?t(e):t,r=n.fontFamily,i=void 0===r?vP:r,a=n.fontSize,o=void 0===a?14:a,s=n.fontWeightLight,u=void 0===s?300:s,c=n.fontWeightRegular,l=void 0===c?400:c,f=n.fontWeightMedium,h=void 0===f?500:f,d=n.fontWeightBold,p=void 0===d?700:d,v=n.htmlFontSize,m=void 0===v?16:v,g=n.allVariants,y=n.pxToRem,k=eN(n,dP);var b=o/14,w=y||function(e){return"".concat(e/m*b,"rem")},_=function(e,t,n,r,a){return tN({fontFamily:i,fontWeight:e,fontSize:w(t),lineHeight:n},i===vP?{letterSpacing:"".concat((o=r/t,Math.round(1e5*o)/1e5),"em")}:{},a,g);var o},x={h1:_(u,96,1.167,-1.5),h2:_(u,60,1.2,-.5),h3:_(l,48,1.167,0),h4:_(l,34,1.235,.25),h5:_(l,24,1.334,0),h6:_(h,20,1.6,.15),subtitle1:_(l,16,1.75,.15),subtitle2:_(h,14,1.57,.1),body1:_(l,16,1.5,.15),body2:_(l,14,1.43,.15),button:_(h,14,1.75,.4,pP),caption:_(l,12,1.66,.4),overline:_(l,12,2.66,1,pP),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return LA(tN({htmlFontSize:m,pxToRem:w,fontFamily:i,fontSize:o,fontWeightLight:u,fontWeightRegular:l,fontWeightMedium:h,fontWeightBold:p},x),k,{clone:!1})}function gP(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var yP=["none",gP(0,2,1,-1,0,1,1,0,0,1,3,0),gP(0,3,1,-2,0,2,2,0,0,1,5,0),gP(0,3,3,-2,0,3,4,0,0,1,8,0),gP(0,2,4,-1,0,4,5,0,0,1,10,0),gP(0,3,5,-1,0,5,8,0,0,1,14,0),gP(0,3,5,-1,0,6,10,0,0,1,18,0),gP(0,4,5,-2,0,7,10,1,0,2,16,1),gP(0,5,5,-3,0,8,10,1,0,3,14,2),gP(0,5,6,-3,0,9,12,1,0,3,16,2),gP(0,6,6,-3,0,10,14,1,0,4,18,3),gP(0,6,7,-4,0,11,15,1,0,4,20,3),gP(0,7,8,-4,0,12,17,2,0,5,22,4),gP(0,7,8,-4,0,13,19,2,0,5,24,4),gP(0,7,9,-4,0,14,21,2,0,5,26,4),gP(0,8,9,-5,0,15,22,2,0,6,28,5),gP(0,8,10,-5,0,16,24,2,0,6,30,5),gP(0,8,11,-5,0,17,26,2,0,6,32,5),gP(0,9,11,-5,0,18,28,2,0,7,34,6),gP(0,9,12,-6,0,19,29,2,0,7,36,6),gP(0,10,13,-6,0,20,31,3,0,8,38,7),gP(0,10,13,-6,0,21,33,3,0,8,40,7),gP(0,10,14,-6,0,22,35,3,0,8,42,7),gP(0,11,14,-7,0,23,36,3,0,9,44,8),gP(0,11,15,-7,0,24,38,3,0,9,46,8)],kP=["duration","easing","delay"],bP={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},wP={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function _P(e){return"".concat(Math.round(e),"ms")}function xP(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}function IP(e){var t=tN({},bP,e.easing),n=tN({},wP,e.duration);return tN({getAutoHeightDuration:xP,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.duration,a=void 0===i?n.standard:i,o=r.easing,s=void 0===o?t.easeInOut:o,u=r.delay,c=void 0===u?0:u;eN(r,kP);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof a?a:_P(a)," ").concat(s," ").concat("string"===typeof c?c:_P(c))})).join(",")}},e,{easing:t,duration:n})}var EP={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},SP=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function TP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mixins,n=void 0===t?{}:t,r=e.palette,i=void 0===r?{}:r,a=e.transitions,o=void 0===a?{}:a,s=e.typography,u=void 0===s?{}:s,c=eN(e,SP);if(e.vars)throw new Error(GA(18));var l=hP(i),f=UR(e),h=LA(f,{mixins:WR(f.breakpoints,n),palette:l,shadows:yP.slice(),typography:mP(l,u),transitions:IP(o),zIndex:tN({},EP)});h=LA(h,c);for(var d=arguments.length,p=new Array(d>1?d-1:0),v=1;v<d;v++)p[v-1]=arguments[v];return(h=p.reduce((function(e,t){return LA(e,t)}),h)).unstable_sxConfig=tN({},LR,null==c?void 0:c.unstable_sxConfig),h.unstable_sx=function(e){return FR({sx:e,theme:this})},h}var CP=TP(),NP="$$material",AP=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.themeId,n=e.defaultTheme,r=void 0===n?KR:n,i=e.rootShouldForwardProp,a=void 0===i?GR:i,o=e.slotShouldForwardProp,s=void 0===o?GR:o,u=function(e){return FR(tN({},e,{theme:HR(tN({},e,{defaultTheme:r,themeId:t}))}))};return u.__mui_systemSx=!0,function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}(e,(function(e){return e.filter((function(e){return!(null!=e&&e.__mui_systemSx)}))}));var i=n.name,o=n.slot,l=n.skipVariantsResolver,f=n.skipSx,h=n.overridesResolver,d=eN(n,qR),p=void 0!==l?l:o&&"Root"!==o||!1,v=f||!1;var m=GR;"Root"===o?m=a:o?m=s:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(m=void 0);var g=function(e,t){return PA(e,t)}(e,tN({shouldForwardProp:m,label:undefined},d)),y=function(n){for(var a=arguments.length,o=new Array(a>1?a-1:0),s=1;s<a;s++)o[s-1]=arguments[s];var l=o?o.map((function(e){return"function"===typeof e&&e.__emotion_real!==e?function(n){return e(tN({},n,{theme:HR(tN({},n,{defaultTheme:r,themeId:t}))}))}:e})):[],f=n;i&&h&&l.push((function(e){var n=HR(tN({},e,{defaultTheme:r,themeId:t})),a=function(e,t){return t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null}(i,n);if(a){var o={};return Object.entries(a).forEach((function(t){var r=c(t,2),i=r[0],a=r[1];o[i]="function"===typeof a?a(tN({},e,{theme:n})):a})),h(e,o)}return null})),i&&!p&&l.push((function(e){var n=HR(tN({},e,{defaultTheme:r,themeId:t}));return function(e,t,n,r){var i,a,o=e.ownerState,s=void 0===o?{}:o,u=[],c=null==n||null==(i=n.components)||null==(a=i[r])?void 0:a.variants;return c&&c.forEach((function(n){var r=!0;Object.keys(n.props).forEach((function(t){s[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)})),r&&u.push(t[BR(n.props)])})),u}(e,function(e,t){var n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);var r={};return n.forEach((function(e){var t=BR(e.props);r[t]=e.style})),r}(i,n),n,i)})),v||l.push(u);var d=l.length-o.length;if(Array.isArray(n)&&d>0){var m=new Array(d).fill("");(f=[].concat(oe(n),oe(m))).raw=[].concat(oe(n.raw),oe(m))}else"function"===typeof n&&n.__emotion_real!==n&&(f=function(e){return n(tN({},e,{theme:HR(tN({},e,{defaultTheme:r,themeId:t}))}))});var y=g.apply(void 0,[f].concat(oe(l)));return e.muiName&&(y.muiName=e.muiName),y};return g.withConfig&&(y.withConfig=g.withConfig),y}}({themeId:NP,defaultTheme:CP,rootShouldForwardProp:function(e){return GR(e)&&"classes"!==e}}),RP=AP;function PP(e,t){var n=tN({},t);return Object.keys(e).forEach((function(r){if(r.toString().match(/^(components|slots)$/))n[r]=tN({},e[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){var i=e[r]||{},a=t[r];n[r]={},a&&Object.keys(a)?i&&Object.keys(i)?(n[r]=tN({},a),Object.keys(i).forEach((function(e){n[r][e]=PP(i[e],a[e])}))):n[r]=a:n[r]=i}else void 0===n[r]&&(n[r]=e[r])})),n}function DP(e){var t=e.theme,n=e.name,r=e.props;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?PP(t.components[n].defaultProps,r):r}var OP=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=t.useContext(EA);return r&&(e=r,0!==Object.keys(e).length)?r:n},LP=UR();var MP=function(){return OP(arguments.length>0&&void 0!==arguments[0]?arguments[0]:LP)};function FP(e){return function(e){var t=e.props,n=e.name,r=e.defaultTheme,i=e.themeId,a=MP(r);return i&&(a=a[i]||a),DP({theme:a,name:n,props:t})}({props:e.props,name:e.name,defaultTheme:CP,themeId:NP})}var jP=KA,UP=function(e){return e},VP=function(){var e=UP;return{configure:function(t){e=t},generate:function(t){return e(t)},reset:function(){e=UP}}}(),zP={active:"active",checked:"checked",completed:"completed",disabled:"disabled",readOnly:"readOnly",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function BP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",r=zP[t];return r?"".concat(n,"-").concat(r):"".concat(VP.generate(e),"-").concat(t)}function qP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",r={};return t.forEach((function(t){r[t]=BP(e,t,n)})),r}function GP(e){return BP("MuiSvgIcon",e)}qP("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var KP=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],HP=RP("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"inherit"!==n.color&&t["color".concat(jP(n.color))],t["fontSize".concat(jP(n.fontSize))]]}})((function(e){var t,n,r,i,a,o,s,u,c,l,f,h,d,p,v,m,g,y=e.theme,k=e.ownerState;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:k.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(t=y.transitions)||null==(n=t.create)?void 0:n.call(t,"fill",{duration:null==(r=y.transitions)||null==(i=r.duration)?void 0:i.shorter}),fontSize:{inherit:"inherit",small:(null==(a=y.typography)||null==(o=a.pxToRem)?void 0:o.call(a,20))||"1.25rem",medium:(null==(s=y.typography)||null==(u=s.pxToRem)?void 0:u.call(s,24))||"1.5rem",large:(null==(c=y.typography)||null==(l=c.pxToRem)?void 0:l.call(c,35))||"2.1875rem"}[k.fontSize],color:null!=(f=null==(h=(y.vars||y).palette)||null==(d=h[k.color])?void 0:d.main)?f:{action:null==(p=(y.vars||y).palette)||null==(v=p.action)?void 0:v.active,disabled:null==(m=(y.vars||y).palette)||null==(g=m.action)?void 0:g.disabled,inherit:void 0}[k.color]}})),WP=t.forwardRef((function(e,n){var r=FP({props:e,name:"MuiSvgIcon"}),i=r.children,a=r.className,o=r.color,s=void 0===o?"inherit":o,u=r.component,c=void 0===u?"svg":u,f=r.fontSize,h=void 0===f?"medium":f,d=r.htmlColor,p=r.inheritViewBox,v=void 0!==p&&p,m=r.titleAccess,g=r.viewBox,y=void 0===g?"0 0 24 24":g,k=eN(r,KP),b=t.isValidElement(i)&&"svg"===i.type,w=tN({},r,{color:s,component:c,fontSize:h,instanceFontSize:e.fontSize,inheritViewBox:v,viewBox:y,hasSvgAsChild:b}),_={};v||(_.viewBox=y);var x=function(e){var t=e.color,n=e.fontSize,r=e.classes;return iN({root:["root","inherit"!==t&&"color".concat(jP(t)),"fontSize".concat(jP(n))]},GP,r)}(w);return(0,l.jsxs)(HP,tN({as:c,className:rN(x.root,a),focusable:"false",color:d,"aria-hidden":!m||void 0,role:m?"img":void 0,ref:n},_,k,b&&i.props,{ownerState:w,children:[b?i.props.children:i,m?(0,l.jsx)("title",{children:m}):null]}))}));WP.muiName="SvgIcon";var QP=WP;var YP=function(e,n){function r(t,r){return(0,l.jsx)(QP,tN({"data-testid":"".concat(n,"Icon"),ref:r},t,{children:e}))}return r.muiName=QP.muiName,t.memo(t.forwardRef(r))}((0,l.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function $P(e){return BP("MuiAvatar",e)}qP("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);var XP=["alt","children","className","component","imgProps","sizes","src","srcSet","variant"],JP=RP("div",{name:"MuiAvatar",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],n.colorDefault&&t.colorDefault]}})((function(e){var t=e.theme,n=e.ownerState;return tN({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},"rounded"===n.variant&&{borderRadius:(t.vars||t).shape.borderRadius},"square"===n.variant&&{borderRadius:0},n.colorDefault&&tN({color:(t.vars||t).palette.background.default},t.vars?{backgroundColor:t.vars.palette.Avatar.defaultBg}:{backgroundColor:"light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[600]}))})),ZP=RP("img",{name:"MuiAvatar",slot:"Img",overridesResolver:function(e,t){return t.img}})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),eD=RP(YP,{name:"MuiAvatar",slot:"Fallback",overridesResolver:function(e,t){return t.fallback}})({width:"75%",height:"75%"});var tD=t.forwardRef((function(e,n){var r=FP({props:e,name:"MuiAvatar"}),i=r.alt,a=r.children,o=r.className,s=r.component,u=void 0===s?"div":s,f=r.imgProps,h=r.sizes,d=r.src,p=r.srcSet,v=r.variant,m=void 0===v?"circular":v,g=eN(r,XP),y=null,k=function(e){var n=e.crossOrigin,r=e.referrerPolicy,i=e.src,a=e.srcSet,o=c(t.useState(!1),2),s=o[0],u=o[1];return t.useEffect((function(){if(i||a){u(!1);var e=!0,t=new Image;return t.onload=function(){e&&u("loaded")},t.onerror=function(){e&&u("error")},t.crossOrigin=n,t.referrerPolicy=r,t.src=i,a&&(t.srcset=a),function(){e=!1}}}),[n,r,i,a]),s}(tN({},f,{src:d,srcSet:p})),b=d||p,w=b&&"error"!==k,_=tN({},r,{colorDefault:!w,component:u,variant:m}),x=function(e){var t=e.classes;return iN({root:["root",e.variant,e.colorDefault&&"colorDefault"],img:["img"],fallback:["fallback"]},$P,t)}(_);return y=w?(0,l.jsx)(ZP,tN({alt:i,src:d,srcSet:p,sizes:h,ownerState:_,className:x.img},f)):null!=a?a:b&&i?i[0]:(0,l.jsx)(eD,{ownerState:_,className:x.fallback}),(0,l.jsx)(JP,tN({as:u,ownerState:_,className:rN(x.root,o),ref:n},g,{children:y}))})),nD=tD;var rD=function(e){return(0,l.jsx)("div",{children:(0,l.jsxs)("nav",{className:"leftNavbar",children:[e.username&&(0,l.jsxs)("div",{id:"userProfile",className:"nav__elements",onClick:function(){e.profileClicked()},children:[(0,l.jsx)(nD,{alt:e.username.displayName,src:"apf.jpg"}),(0,l.jsx)("h3",{children:e.username.displayName})]}),(0,l.jsxs)("div",{id:"home",className:"nav__elements",onClick:function(){e.homeClicked()},children:[(0,l.jsx)("img",{src:"https://img.icons8.com/?size=40&id=12229&format=png",alt:""}),(0,l.jsx)("h3",{children:"Home"})]}),(0,l.jsxs)("div",{className:"nav__elements",children:[(0,l.jsx)("img",{className:"nav__icon",src:"https://img.icons8.com/?size=40&id=55460&format=png",alt:""}),(0,l.jsx)("h3",{children:"Friends"})]}),(0,l.jsxs)("div",{className:"nav__elements",children:[(0,l.jsx)("img",{src:"https://img.icons8.com/?size=40&id=13652&format=png",alt:""}),(0,l.jsx)("h3",{children:"Groups"})]}),(0,l.jsxs)("div",{className:"nav__elements",children:[(0,l.jsx)("img",{src:"https://img.icons8.com/?size=40&id=uNToIe0zQRBV&format=png",alt:""}),(0,l.jsx)("h3",{children:"Watch"})]}),(0,l.jsxs)("div",{className:"nav__elements",children:[(0,l.jsx)("img",{src:"https://img.icons8.com/?size=40&id=EYOe5z0CyyYB&format=png",alt:""}),(0,l.jsx)("h3",{children:"Pages"})]}),(0,l.jsxs)("div",{className:"nav__elements",children:[(0,l.jsx)("img",{src:"https://img.icons8.com/?size=40&id=26089&format=png",alt:""}),(0,l.jsx)("h3",{children:"Saved"})]}),(0,l.jsxs)("div",{className:"nav__elements",children:[(0,l.jsx)("img",{src:"https://img.icons8.com/?size=40&id=12784&format=png",alt:""}),(0,l.jsx)("h3",{children:"Settings"})]}),(0,l.jsx)("div",{className:"copyright",children:(0,l.jsx)("p",{children:"@LM. All rights reserved. 2023."})})]})})},iD=t.createContext({users:[],posts:[]});var aD=function(e){var n=(0,t.useContext)(iD),r=c((0,t.useState)([]),2),i=r[0],a=r[1],o=c((0,t.useState)(""),2),s=o[0],u=o[1],f=c((0,t.useState)(!1),2),h=f[0],d=f[1];return(0,t.useEffect)((function(){var t;return e.postID&&(t=YC.collection("posts").doc(e.postID).collection("comments").onSnapshot((function(e){a(e.docs.map((function(e){return{id:e.id,comment:e.data()}})))}))),function(){t()}}),[e.postID]),(0,l.jsxs)("div",{children:[h&&(0,l.jsxs)("div",{className:"delete__post",children:[(0,l.jsxs)("div",{className:"delete__text",children:[(0,l.jsx)("h1",{children:"Delete Post?"}),(0,l.jsx)("p",{children:"Are you sure you want to delete this post?"})]}),(0,l.jsx)("button",{className:"delete__btn",onClick:function(){YC.collection("posts").doc(e.postID).delete(),d(!1),window.onscroll=function(){}},children:"Delete"}),(0,l.jsx)("button",{className:"cancel__btn",onClick:function(){d(!1),window.onscroll=function(){}},children:"Cancel"})]}),(0,l.jsxs)("div",{className:"post",children:[(0,l.jsxs)("div",{className:"post__header",children:[(0,l.jsxs)("div",{className:"postheader__name",children:[(0,l.jsx)(nD,{className:"post__avatar",alt:e.userProfile[0].profile.username,src:"abc.jpg"}),(0,l.jsx)("h1",{className:"profile__username",children:e.userProfile[0].profile.username})]}),e.userProfile[0].profile.username===e.user.displayName&&(0,l.jsx)("button",{className:"delete",onClick:function(){d(!0);var e=window.scrollY||document.documentElement.scrollTop,t=window.scrollX||document.documentElement.scrollLeft;window.onscroll=function(){window.scrollTo(t,e)}},children:(0,l.jsx)("img",{src:"https://img.icons8.com/?size=20&id=67884&format=png",alt:""})})]}),(0,l.jsx)("div",{className:"post__caption",children:(0,l.jsx)("p",{children:e.caption})}),(0,l.jsx)("img",{className:"post__img",src:e.img,alt:""}),(0,l.jsxs)("div",{className:"post__comments",children:[(0,l.jsx)("p",{children:(0,l.jsx)("strong",{children:"Comments:"})}),i.map((function(e){e.id;var t,r=e.comment;return(0,l.jsx)("div",{className:"comment",children:(0,l.jsxs)("p",{children:[(0,l.jsxs)("strong",{children:[(t=r.userID,n.users.filter((function(e){e.id;var n=e.profile;return t===n.userID}))[0].profile.username),":"]})," ",r.text]})})}))]}),e.user&&(0,l.jsxs)("form",{className:"post__commentBox",children:[(0,l.jsx)("input",{className:"post__input",type:"text",placeholder:"Add a comment...",value:s,onChange:function(e){return u(e.target.value)}}),(0,l.jsx)("button",{disabled:!s,className:"post__button",type:"submit",onClick:function(t){t.preventDefault(),YC.collection("posts").doc(e.postID).collection("comments").add({text:s,userID:n.users.filter((function(t){t.id;var n=t.profile;return e.user.displayName===n.username}))[0].profile.userID,timeStamp:jt.firestore.FieldValue.serverTimestamp()}),u("")},children:"Post"})]})]})]})};var oD=function(){return(0,l.jsxs)("div",{className:"rightbar",children:[(0,l.jsxs)("div",{className:"friends",children:[(0,l.jsx)("h3",{children:"Friends"}),(0,l.jsxs)("div",{className:"friend",children:[(0,l.jsxs)("div",{className:"friend__user",children:[(0,l.jsx)(nD,{className:"friend__avatar",alt:"username",src:"https://c4.wallpaperflare.com/wallpaper/106/962/482/death-note-lawliet-l-black-background-simple-wallpaper-preview.jpg"}),(0,l.jsx)("p",{children:"L"}),(0,l.jsx)("img",{src:"https://img.icons8.com/?size=18&id=2sZ0sdlG9kWP&format=png",alt:""})]}),(0,l.jsx)("div",{className:"online"})]}),(0,l.jsxs)("div",{className:"friend",children:[(0,l.jsxs)("div",{className:"friend__user",children:[(0,l.jsx)(nD,{className:"friend__avatar",alt:"username",src:"https://c4.wallpaperflare.com/wallpaper/93/409/220/anime-death-note-shinigami-ryuk-wallpaper-thumb.jpg"}),(0,l.jsx)("p",{children:"shinigami"})]}),(0,l.jsx)("div",{className:"online"})]}),(0,l.jsxs)("div",{className:"friend",children:[(0,l.jsxs)("div",{className:"friend__user",children:[(0,l.jsx)(nD,{className:"friend__avatar",alt:"username",src:"https://c1.wallpaperflare.com/preview/182/936/1023/hacker-silhouette-hack-anonymous.jpg"}),(0,l.jsx)("p",{children:"hacker_tom"})]}),(0,l.jsx)("div",{className:"online"})]}),(0,l.jsxs)("div",{className:"friend",children:[(0,l.jsxs)("div",{className:"friend__user",children:[(0,l.jsx)(nD,{className:"friend__avatar",alt:"username",src:"https://c4.wallpaperflare.com/wallpaper/439/19/825/sono-bisque-doll-wa-koi-wo-suru-kitagawa-marin-cosplay-hd-wallpaper-preview.jpg"}),(0,l.jsx)("p",{children:"scarlett.77"})]}),(0,l.jsx)("div",{className:"online"})]}),(0,l.jsxs)("div",{className:"friend",children:[(0,l.jsxs)("div",{className:"friend__user",children:[(0,l.jsx)(nD,{className:"friend__avatar",alt:"username",src:"https://c4.wallpaperflare.com/wallpaper/596/276/906/anime-ssss-gridman-akane-shinjou-hd-wallpaper-preview.jpg"}),(0,l.jsx)("p",{children:"akane_rin"})]}),(0,l.jsx)("div",{className:"online"})]})]}),(0,l.jsxs)("div",{className:"suggestions",children:[(0,l.jsx)("h3",{children:"Suggested for you:"}),(0,l.jsxs)("div",{className:"suggestion",children:[(0,l.jsxs)("div",{className:"friend__user",children:[(0,l.jsx)(nD,{className:"friend__avatar",alt:"username",src:"https://images.unsplash.com/photo-1513364776144-60967b0f800f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1171&q=80"}),(0,l.jsx)("p",{children:"Art_World"}),(0,l.jsx)("img",{src:"https://img.icons8.com/?size=18&id=2sZ0sdlG9kWP&format=png",alt:""})]}),(0,l.jsx)("div",{className:"follow",children:"follow"})]}),(0,l.jsxs)("div",{className:"suggestion",children:[(0,l.jsxs)("div",{className:"friend__user",children:[(0,l.jsx)(nD,{className:"friend__avatar",alt:"username",src:"https://images.unsplash.com/photo-1621768216002-5ac171876625?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8YXBwbGUlMjBsb2dvfGVufDB8fDB8fHww&auto=format&fit=crop&w=500&q=60"}),(0,l.jsx)("p",{children:"Apple Inc."}),(0,l.jsx)("img",{src:"https://img.icons8.com/?size=18&id=2sZ0sdlG9kWP&format=png",alt:""})]}),(0,l.jsx)("div",{className:"follow",children:"follow"})]}),(0,l.jsxs)("div",{className:"suggestion",children:[(0,l.jsxs)("div",{className:"friend__user",children:[(0,l.jsx)(nD,{className:"friend__avatar",alt:"username",src:"https://wallpapercave.com/dwp1x/wp9029030.jpg"}),(0,l.jsx)("p",{children:"ufotable.Inc."}),(0,l.jsx)("img",{src:"https://img.icons8.com/?size=18&id=2sZ0sdlG9kWP&format=png",alt:""})]}),(0,l.jsx)("div",{className:"follow",children:"follow"})]}),(0,l.jsxs)("div",{className:"suggestion",children:[(0,l.jsxs)("div",{className:"friend__user",children:[(0,l.jsx)(nD,{className:"friend__avatar",alt:"username",src:"https://c4.wallpaperflare.com/wallpaper/186/380/857/your-name-sky-stars-kimi-no-na-wa-wallpaper-preview.jpg"}),(0,l.jsx)("p",{children:"anime.Official"}),(0,l.jsx)("img",{src:"https://img.icons8.com/?size=18&id=2sZ0sdlG9kWP&format=png",alt:""})]}),(0,l.jsx)("div",{className:"follow",children:"follow"})]}),(0,l.jsxs)("div",{className:"suggestion",children:[(0,l.jsxs)("div",{className:"friend__user",children:[(0,l.jsx)(nD,{className:"friend__avatar",alt:"username",src:"https://c4.wallpaperflare.com/wallpaper/269/278/550/anime-attack-on-titan-scouting-legion-wings-of-dom-hd-wallpaper-preview.jpg"}),(0,l.jsx)("p",{children:"Isayama_Hajime"}),(0,l.jsx)("img",{src:"https://img.icons8.com/?size=18&id=2sZ0sdlG9kWP&format=png",alt:""})]}),(0,l.jsx)("div",{className:"follow",children:"follow"})]}),(0,l.jsxs)("div",{className:"suggestion",children:[(0,l.jsxs)("div",{className:"friend__user",children:[(0,l.jsx)(nD,{className:"friend__avatar",alt:"username",src:"https://c4.wallpaperflare.com/wallpaper/237/534/454/google-general-atomics-mq-9-reaper-simple-background-logo-wallpaper-preview.jpg"}),(0,l.jsx)("p",{children:"Google"}),(0,l.jsx)("img",{src:"https://img.icons8.com/?size=18&id=2sZ0sdlG9kWP&format=png",alt:""})]}),(0,l.jsx)("div",{className:"follow",children:"follow"})]}),(0,l.jsxs)("div",{className:"suggestion",children:[(0,l.jsxs)("div",{className:"friend__user",children:[(0,l.jsx)(nD,{className:"friend__avatar",alt:"username",src:"https://c4.wallpaperflare.com/wallpaper/535/151/730/minimalism-logo-logo-studio-wallpaper-preview.jpg"}),(0,l.jsx)("p",{children:"MARVEL"}),(0,l.jsx)("img",{src:"https://img.icons8.com/?size=18&id=2sZ0sdlG9kWP&format=png",alt:""})]}),(0,l.jsx)("div",{className:"follow",children:"follow"})]})]})]})};var sD=function(){var e=c((0,t.useState)(!1),2),n=e[0],r=e[1],i=(0,t.useRef)();return(0,t.useEffect)((function(){var e=function(e){i.current.contains(e.target)||(r(!1),window.onscroll=function(){})};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[]),(0,l.jsxs)("div",{ref:i,children:[n&&(0,l.jsxs)("div",{className:"story__upload",id:"story__upload",children:[(0,l.jsx)("input",{type:"file",id:"story__img"}),(0,l.jsxs)("label",{for:"story__img",children:[(0,l.jsx)("img",{src:"https://img.icons8.com/?size=30&id=57212&format=png",alt:""}),"Add Image"]}),(0,l.jsxs)("div",{className:"story__caption",children:[(0,l.jsx)("input",{type:"text",placeholder:"Add a caption..."}),(0,l.jsx)("button",{children:"Add"})]})]}),(0,l.jsxs)("div",{className:"stories",children:[(0,l.jsxs)("div",{className:"story",children:[(0,l.jsx)("button",{className:"add__story",onClick:function(){r(!n);var e=window.scrollY||document.documentElement.scrollTop,t=window.scrollX||document.documentElement.scrollLeft;window.onscroll=function(){window.scrollTo(t,e)}},children:"+"}),(0,l.jsx)("p",{className:"user__name",children:"Add to Story"})]}),(0,l.jsxs)("div",{className:"story",children:[(0,l.jsx)(nD,{className:"user__image",alt:"username",src:"https://c4.wallpaperflare.com/wallpaper/106/962/482/death-note-lawliet-l-black-background-simple-wallpaper-preview.jpg"}),(0,l.jsx)("p",{className:"user__name",children:"L"})]}),(0,l.jsxs)("div",{className:"story",children:[(0,l.jsx)(nD,{className:"user__image",alt:"username",src:"https://img.freepik.com/premium-photo/cute-anime-girl-kawaiistyle-cartoon-anime-style-girl-ai-generated_755721-14204.jpg?size=626&ext=jpg&ga=GA1.1.553828089.1687008485&semt=ais"}),(0,l.jsx)("p",{className:"user__name",children:"smiley.me"})]}),(0,l.jsxs)("div",{className:"story",children:[(0,l.jsx)(nD,{className:"user__image",alt:"username",src:"https://c4.wallpaperflare.com/wallpaper/439/19/825/sono-bisque-doll-wa-koi-wo-suru-kitagawa-marin-cosplay-hd-wallpaper-preview.jpg"}),(0,l.jsx)("p",{className:"user__name",children:"scarlett.77"})]}),(0,l.jsxs)("div",{className:"story",children:[(0,l.jsx)(nD,{className:"user__image",alt:"username",src:"https://img.freepik.com/free-photo/galaxy-nature-aesthetic-background-starry-sky-mountain-remixed-media_53876-126761.jpg?size=626&ext=jpg&ga=GA1.1.553828089.1687008485&semt=sph"}),(0,l.jsx)("p",{className:"user__name",children:"Nyx"})]}),(0,l.jsxs)("div",{className:"story",children:[(0,l.jsx)(nD,{className:"user__image",alt:"username",src:"https://img.freepik.com/free-photo/closeup-multicolored-wooden-pencils-drawing-isolated_169016-19939.jpg?size=626&ext=jpg&ga=GA1.1.553828089.1687008485&semt=sph"}),(0,l.jsx)("p",{className:"user__name",children:"sketchify99"})]}),(0,l.jsxs)("div",{className:"story",children:[(0,l.jsx)(nD,{className:"user__image",alt:"username",src:"https://img.freepik.com/premium-photo/digital-artwork_456341-2249.jpg?size=626&ext=jpg&ga=GA1.1.553828089.1687008485&semt=sph"}),(0,l.jsx)("p",{className:"user__name",children:"light.yagami"})]}),(0,l.jsxs)("div",{className:"story",children:[(0,l.jsx)(nD,{className:"user__image",alt:"username",src:"https://img.freepik.com/free-photo/red-black-brush-stroke-banner-background-perfect-canva_1361-3597.jpg?size=626&ext=jpg&ga=GA1.2.553828089.1687008485&semt=sph"}),(0,l.jsx)("p",{className:"user__name",children:"shin"})]})]})]})};var uD=function(e){return(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:"nav__bottomElements",children:[(0,l.jsx)("div",{className:"nav__bottomElement",onClick:function(){e.homeClicked()},children:(0,l.jsx)("img",{src:"https://img.icons8.com/?size=30&id=73&format=png",alt:""})}),(0,l.jsx)("div",{className:"nav__bottomElement",children:(0,l.jsx)("img",{src:"https://img.icons8.com/?size=30&id=132&format=png",alt:""})}),(0,l.jsx)("div",{className:"nav__bottomElement",children:(0,l.jsx)("img",{src:"https://img.icons8.com/?size=30&id=24717&format=png",alt:""})}),(0,l.jsx)("div",{className:"nav__bottomElement",children:(0,l.jsx)("img",{src:"https://img.icons8.com/?size=30&id=PxI9IPCyBAOD&format=png",alt:""})}),(0,l.jsx)("div",{className:"nav__bottomElement",onClick:function(){e.profileClicked()},children:(0,l.jsx)("img",{src:"https://img.icons8.com/?size=30&id=uOoIUTYvxnso&format=png",alt:""})})]})})};var cD=function(e){var n=(0,t.useContext)(iD),r=c((0,t.useState)([]),2),i=r[0],a=r[1],o=c((0,t.useState)(!1),2),s=o[0],u=o[1],f=c((0,t.useState)(e.username),2),h=f[0],d=f[1],p=c((0,t.useState)(e.userbio),2),v=p[0],m=p[1];return(0,t.useEffect)((function(){a(n.posts.filter((function(t){t.id;var n=t.post;return e.userID===n.userID})))}),[n,e]),(0,l.jsxs)("div",{children:[s&&(0,l.jsxs)("div",{className:"update__profile",children:[(0,l.jsx)("button",{className:"cancel__update",onClick:function(){u(!1),window.onscroll=function(){}},children:(0,l.jsx)("img",{src:"https://img.icons8.com/?size=18&id=8112&format=png",alt:""})}),(0,l.jsx)("input",{type:"file",className:"update__img",id:"update__img"}),(0,l.jsx)("label",{for:"update__img",children:(0,l.jsx)(nD,{className:"userimg",alt:e.username,src:e.username})}),(0,l.jsx)("input",{className:"update__info",type:"text",value:h,placeholder:"Usernme",onChange:function(e){d(e.target.value)}}),(0,l.jsx)("input",{className:"update__info",type:"text",placeholder:"Bio",value:v,onChange:function(e){m(e.target.value)}}),(0,l.jsx)("button",{className:"update__btn",onClick:function(){u(!1),window.onscroll=function(){},setTimeout((function(){document.getElementById("userProfile").click()}),1e3)},children:"Update"})]}),(0,l.jsx)("div",{className:"update__container"}),(0,l.jsxs)("div",{className:"user__profile",children:[(0,l.jsxs)("div",{className:"profileheader",children:[(0,l.jsx)(nD,{className:"profileheader__left",alt:e.username,src:e.userimg}),(0,l.jsxs)("div",{className:"profileheader__right",children:[(0,l.jsxs)("div",{className:"profile__details",children:[(0,l.jsx)("h1",{className:"profile__username",children:e.username}),e.user.displayName===e.username?(0,l.jsx)("button",{className:"edit__profile",onClick:function(){u(!0);var e=window.scrollY||document.documentElement.scrollTop,t=window.scrollX||document.documentElement.scrollLeft;window.onscroll=function(){window.scrollTo(t,e)}},children:(0,l.jsx)("img",{src:"https://img.icons8.com/?size=25&id=111452&format=png",alt:""})}):(0,l.jsx)("div",{})]}),(0,l.jsxs)("div",{className:"profile__details",children:[1===i.length?(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"1"})," post"]}):(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:i.length})," posts"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"0"})," followers"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"0"})," following"]})]})]})]}),(0,l.jsx)("div",{className:"profile__bio",children:(0,l.jsx)("p",{children:e.userbio})}),(0,l.jsxs)("div",{className:"profile__posts",children:[(0,l.jsx)("h1",{children:"POSTS"}),i.map((function(t){var n=t.id,r=t.post;return(0,l.jsx)(aD,{id:n,postID:n,user:e.user,currentUser:e.userProfile,userProfile:e.userProfile,username:r.username,caption:r.caption,img:r.img})}))]})]})]})};var lD=function(e){var n=(0,t.useContext)(iD),r=c((0,t.useState)(""),2),i=r[0],a=r[1],o=c((0,t.useState)(null),2),s=o[0],u=o[1],f=c((0,t.useState)(0),2),h=f[0],d=f[1],p=c((0,t.useState)(!1),2),v=p[0],m=p[1],g=c((0,t.useState)([]),2),y=g[0],k=g[1],b=function(){m(!0);var t=n.users.filter((function(t){t.id;var n=t.profile;return e.user.displayName===n.username}));k(t),console.log(y[0])},w=function(){m(!1),window.onscroll=function(){}};return(0,l.jsxs)("div",{children:[(0,l.jsx)(ZC,{username:e.user,onLogout:function(){e.onLogOut()},profileClicked:b,searchedProfile:function(e){m(!0),k(n.users.filter((function(t){t.id;var n=t.profile;return e===n.username})))}}),(0,l.jsx)(rD,{username:e.user,profileClicked:b,homeClicked:w}),(0,l.jsx)(uD,{profileClicked:b,homeClicked:w}),v&&y.map((function(t){var n=t.id,r=t.profile;return(0,l.jsx)(cD,{docID:n,userID:r.userID,user:e.user,userProfile:y,username:r.username,userimg:r.userimg,userbio:r.userbio},n)})),!v&&(0,l.jsx)(oD,{}),!v&&(0,l.jsxs)("div",{className:"home__container",children:[(0,l.jsx)(sD,{}),(0,l.jsxs)("div",{className:"new__post",children:[(0,l.jsx)("h1",{children:"Create a new post..."}),(0,l.jsx)("progress",{className:"imageupload__progress",value:h,max:"100"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("input",{className:"post__caption",type:"text",placeholder:"enter a caption...",onChange:function(e){a(e.target.value)}}),(0,l.jsxs)("div",{className:"post__opt",children:[(0,l.jsxs)("div",{className:"post__image",children:[(0,l.jsx)("input",{id:"img__input",type:"file",placeholder:"Image",onChange:function(e){e.target.files[0]&&u(e.target.files[0])}}),(0,l.jsx)("img",{src:"https://img.icons8.com/?size=40&id=80584&format=png",alt:""}),(0,l.jsx)("label",{for:"img__input",children:"Select file"})]}),(0,l.jsx)("button",{disabled:!s,className:"post__btn",type:"submit",onClick:function(){var t=n.users.filter((function(t){t.id;var n=t.profile;return e.user.displayName===n.username}));XC.ref("images/".concat(s.name)).put(s).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);d(t)}),(function(e){console.log(e),alert(e.message)}),(function(){XC.ref("images").child(s.name).getDownloadURL().then((function(e){YC.collection("posts").add({timestamp:jt.firestore.FieldValue.serverTimestamp(),postID:Date.now()+Math.floor(1e5*Math.random()),caption:i,img:e,userID:t[0].profile.userID}),d(0),a(""),u(null)}))}))},children:"POST"})]})]})]}),n.posts.map((function(t){var r=t.id,i=t.post;return(0,l.jsx)(aD,{postID:r,postUser:i.userID,user:e.user,currentUser:n.users.filter((function(t){t.id;var n=t.profile;return e.user.displayName===n.username})),userProfile:n.users.filter((function(e){e.id;return e.profile.userID===i.userID})),caption:i.caption,img:i.img},r)}))]})]})};var fD=function(){var e=c((0,t.useState)(!1),2),n=e[0],r=e[1],i=c((0,t.useState)(!0),2),a=i[0],o=i[1],s=c((0,t.useState)(!1),2),u=s[0],h=s[1],d=c((0,t.useState)(null),2),p=d[0],v=d[1],m=c((0,t.useState)([]),2),g=m[0],y=m[1],k=c((0,t.useState)([]),2),b=k[0],w=k[1];(0,t.useEffect)((function(){YC.collection("users").onSnapshot((function(e){y(e.docs.map((function(e){return{id:e.id,profile:e.data()}})))}))}),[]),(0,t.useEffect)((function(){YC.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){w(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[]),(0,t.useEffect)((function(){var e=$C.onAuthStateChanged((function(e){e?(console.log(e),v(e)):v(null)}));return function(){e()}}),[p]),(0,t.useEffect)((function(){var e=localStorage.getItem("login"),t=localStorage.getItem("home");"1"===e&&(r(!0),h(!1),o(!1)),"1"===t&&(h(!0),o(!1),r(!1))}),[u,n,a]),(0,t.useEffect)((function(){}));var _=function(){v(null),h(!1),r(!1),o(!0),localStorage.removeItem("home"),localStorage.removeItem("login"),console.log(p)};return(0,l.jsx)(iD.Provider,{value:{users:g,posts:b},children:(0,l.jsxs)("div",{className:"App",children:[a&&(0,l.jsx)(JC,{onRegister:function(e,t,n){$C.createUserWithEmailAndPassword(t,n).then((function(t){t.user.updateProfile({displayName:e}),YC.collection("users").add({userID:Date.now()+Math.floor(1e5*Math.random()),username:e,userimg:"url",userbio:"Your bio"}),v(t),h(!0),r(!1),o(!1),localStorage.setItem("home","1")})).catch((function(e){alert(e.message)}))},onLoginClicked:function(){v(null),h(!1),r(!0),o(!1),localStorage.setItem("login","1")}}),n&&(0,l.jsx)(f,{onLogin:function(e,t){$C.signInWithEmailAndPassword(e,t).then((function(e){v(e),h(!0),r(!1),o(!1),localStorage.setItem("home","1")})).catch((function(e){alert(e.message)}))},onRegisterClicked:_}),u&&(0,l.jsx)(lD,{onLogOut:_,user:p})]})})};i.createRoot(document.getElementById("root")).render((0,l.jsx)(t.StrictMode,{children:(0,l.jsx)(fD,{})}))}()}();
//# sourceMappingURL=main.ae442995.js.map